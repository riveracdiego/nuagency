;/*FB_PKG_DELIM*/

__d("ArmadilloDataTraceType",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("I64"))).of_string("13");l.armadilloMessageSend=s}),98);
__d("XPlatReactTextEncoder",[],(function(t,n,r,o,a,i){"use strict";var e=self.TextEncoder;i.TextEncoder=e}),66);
__d("base64Binary",["invariant"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){for(var t="",n=0;n<e.byteLength;n+=3){var r=e.subarray(n,n+3);t+=m(r)}var o=(e.byteLength+2)%3;return t.slice(0,t.length+o-2)+"==".slice(o)}function u(e){var t,n;e.length%4===0||s(0,51156);for(var r=e.length/4,o=(t=(n=e.match(/={0,2}$/))==null?void 0:n[0].length)!=null?t:0,a=new Uint8Array(r*3-o),i=0;i<r;i++){var l=p(e.slice(i*4,i*4+4));a.set(l.subarray(0,a.byteLength-i*3),i*3)}return a}var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=">___?456789:;<=___\0___\0\x07\b	\n\v\f\r______\x1B !\"#$%&'()*+,-./0123";function m(e){var t,n,r=e[0]<<16|((t=e[1])!=null?t:0)<<8|((n=e[2])!=null?n:0);return String.fromCharCode(c.charCodeAt(r>>>18),c.charCodeAt(r>>>12&63),c.charCodeAt(r>>>6&63),c.charCodeAt(r&63))}function p(e){var t=d.charCodeAt(e.charCodeAt(0)-43)<<18|d.charCodeAt(e.charCodeAt(1)-43)<<12|d.charCodeAt(e.charCodeAt(2)-43)<<6|d.charCodeAt(e.charCodeAt(3)-43);return new Uint8Array([t>>>16,t>>>8&255,t&255])}l.encode=e,l.decode=u}),98);
__d("Base64Utils",["XPlatReactTextEncoder","base64Binary"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("base64Binary").encode(new(o("XPlatReactTextEncoder")).TextEncoder().encode(e))}function s(e){return o("base64Binary").encode(new Uint8Array(e))}function u(e){return o("base64Binary").decode(e).buffer}l.encodeUnicode=e,l.fromArrayBuffer=s,l.toArrayBuffer=u}),98);
__d("BinarySearch",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e={GREATEST_LOWER_BOUND:"GREATEST_LOWER_BOUND",GREATEST_STRICT_LOWER_BOUND:"GREATEST_STRICT_LOWER_BOUND",LEAST_STRICT_UPPER_BOUND:"LEAST_STRICT_UPPER_BOUND",LEAST_UPPER_BOUND:"LEAST_UPPER_BOUND",NEAREST:"NEAREST"},s=function(t,n){if(typeof t!="number"||typeof n!="number")throw r("FBLogger")("comet_infra").mustfixThrow("The default comparator can only be used with sequences of numbers.");return t-n},u=e.GREATEST_LOWER_BOUND,c=e.GREATEST_STRICT_LOWER_BOUND,d=e.LEAST_STRICT_UPPER_BOUND,m=e.LEAST_UPPER_BOUND,p=e.NEAREST;function _(e,t,n,r,o){o===void 0&&(o=s);var a=m,i=g(e,t,n,r,o,a);if(n<=i&&i<r){var l=e(i);return o(l,t)===0?l:void 0}else return}function f(e,t,n,r,o){o===void 0&&(o=s);var a=m,i=g(e,t,n,r,o,a);return n<=i&&i<r&&o(e(i),t)===0?i:-1}function g(e,t,n,o,a,i){switch(i){case m:return h(e,t,n,o,a);case u:return y(e,t,n,o,a);case d:return C(e,t,n,o,a);case c:return b(e,t,n,o,a);case p:return v(e,t,n,o,a);default:throw r("FBLogger")("comet_infra").mustfixThrow("Invalid mode %s",i)}}function h(e,t,n,r,o){for(var a=n,i=r;a+1<i;){var l=a+Math.floor((i-a)/2);o(e(l),t)>=0?i=l:a=l}return a<i&&o(e(a),t)>=0?a:i}function y(e,t,n,r,o){return C(e,t,n,r,o)-1}function C(e,t,n,r,o){for(var a=n,i=r;a+1<i;){var l=a+Math.floor((i-a)/2);o(e(l),t)>0?i=l:a=l}return a<i&&o(e(a),t)>0?a:i}function b(e,t,n,r,o){return h(e,t,n,r,o)-1}function v(e,t,n,r,o){var a=y(e,t,n,r,o),i=Math.abs(o(e(a),t)),l=Math.abs(o(e(a+1),t));return i<l?Math.max(a,n):Math.min(a+1,r-1)}function S(e,t,n){return _(function(t){return e[t]},t,0,e.length,n)}function R(e,t,n){return f(function(t){return e[t]},t,0,e.length,n)}function L(e,t,n,r){return g(function(t){return e[t]},t,0,e.length,n,r)}l.GREATEST_LOWER_BOUND=u,l.GREATEST_STRICT_LOWER_BOUND=c,l.LEAST_STRICT_UPPER_BOUND=d,l.LEAST_UPPER_BOUND=m,l.NEAREST=p,l.find=_,l.findIndex=f,l.findBound=g,l.leastUpperBound=h,l.greatestLowerBound=y,l.leastStrictUpperBound=C,l.greatestStrictLowerBound=b,l.nearest=v,l.findInArray=S,l.findIndexInArray=R,l.findBoundInArray=L}),98);
__d("CryptoLogger",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return r("FBLogger")("labyrinth_web","crypto."+e)}function s(e,t){return t instanceof Error?e.catching(t):e}l.CryptoLogger=e,l.captureError=s}),98);
__d("EBMarkerIdToQPLEvent",["I64","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=(e||(e=o("I64"))).to_int32(t);switch(n){case 1021646192:return r("qpl")._(1021646192,"3099");case 1021656232:return r("qpl")._(1021656232,"3100");case 1021647318:return r("qpl")._(1021647318,"3101");case 1021651622:return r("qpl")._(1021651622,"3102");case 1021655799:return r("qpl")._(1021655799,"3103");case 1021648929:return r("qpl")._(1021648929,"3104");case 1021647593:return r("qpl")._(1021647593,"3105");case 1021653744:return r("qpl")._(1021653744,"3106");case 1021655355:return r("qpl")._(1021655355,"3107");case 1021648240:return r("qpl")._(1021648240,"3108");case 1021651939:return r("qpl")._(1021651939,"3109");case 1021656851:return r("qpl")._(1021656851,"3110");case 1021652813:return r("qpl")._(1021652813,"3111");case 1021653501:return r("qpl")._(1021653501,"3112");case 1021655710:return r("qpl")._(1021655710,"3114");case 1021655643:return r("qpl")._(1021655643,"3115");case 1021646076:return r("qpl")._(1021646076,"3116");case 1021642512:return r("qpl")._(1021642512,"3117");case 1021654781:return r("qpl")._(1021654781,"3118");case 1021649468:return r("qpl")._(1021649468,"3120");case 1021652080:return r("qpl")._(1021652080,"3121");case 1021652512:return r("qpl")._(1021652512,"3122");case 1021655828:return r("qpl")._(1021655828,"3124");case 1021642298:return r("qpl")._(1021642298,"3126");case 1021652377:return r("qpl")._(1021652377,"3127");case 521471316:return r("qpl")._(521471316,"2831");case 521478596:return r("qpl")._(521478596,"1329");case 521479468:return r("qpl")._(521479468,"3128");case 521482563:return r("qpl")._(521482563,"3129");case 521482912:return r("qpl")._(521482912,"3131");case 521481876:return r("qpl")._(521481876,"1407");case 521471732:return r("qpl")._(521471732,"1454");case 521477507:return r("qpl")._(521477507,"1406");case 521478817:return r("qpl")._(521478817,"2806");case 521476801:return r("qpl")._(521476801,"3132");case 521484724:return r("qpl")._(521484724,"141");case 521473756:return r("qpl")._(521473756,"2768");case 521477113:return r("qpl")._(521477113,"2698");case 521478750:return r("qpl")._(521478750,"2850");case 521479165:return r("qpl")._(521479165,"3055");case 521484370:return r("qpl")._(521484370,"2995");case 521473213:return r("qpl")._(521473213,"27");case 521482281:return r("qpl")._(521482281,"2703");case 521476771:return r("qpl")._(521476771,"2454");case 521474469:return r("qpl")._(521474469,"2612");case 521471755:return r("qpl")._(521471755,"2586");case 521476367:return r("qpl")._(521476367,"2704");case 521473850:return r("qpl")._(521473850,"2910");case 521482558:return r("qpl")._(521482558,"2558");case 521482880:return r("qpl")._(521482880,"16");case 521473150:return r("qpl")._(521473150,"2143");case 521473369:return r("qpl")._(521473369,"2834");case 521485893:return r("qpl")._(521485893,"2835");case 521473922:return r("qpl")._(521473922,"2832");case 521479146:return r("qpl")._(521479146,"3133");case 521471468:return r("qpl")._(521471468,"2968");case 521480391:return r("qpl")._(521480391,"1167");case 521480745:return r("qpl")._(521480745,"3134");case 521481602:return r("qpl")._(521481602,"829");case 521475102:return r("qpl")._(521475102,"3135");case 521484676:return r("qpl")._(521484676,"2684");case 521485625:return r("qpl")._(521485625,"1876");case 521482085:return r("qpl")._(521482085,"409");case 521471024:return r("qpl")._(521471024,"2275");case 521474385:return r("qpl")._(521474385,"263");case 521479842:return r("qpl")._(521479842,"2163");case 521485383:return r("qpl")._(521485383,"2200");case 521478580:return r("qpl")._(521478580,"3136");case 521485815:return r("qpl")._(521485815,"3137");case 521482969:return r("qpl")._(521482969,"1519");case 521485406:return r("qpl")._(521485406,"272");case 521479972:return r("qpl")._(521479972,"3138");case 521484777:return r("qpl")._(521484777,"2715");case 521483076:return r("qpl")._(521483076,"3140");case 521482858:return r("qpl")._(521482858,"1290");case 521472542:return r("qpl")._(521472542,"295");case 521472456:return r("qpl")._(521472456,"1646");case 521476140:return r("qpl")._(521476140,"378");case 521473194:return r("qpl")._(521473194,"1331");case 521482763:return r("qpl")._(521482763,"296");case 521484295:return r("qpl")._(521484295,"1460");case 521476165:return r("qpl")._(521476165,"2432");case 521477947:return r("qpl")._(521477947,"2395");case 521486220:return r("qpl")._(521486220,"827");case 521482576:return r("qpl")._(521482576,"1069");case 521479124:return r("qpl")._(521479124,"1939");case 521476098:return r("qpl")._(521476098,"504");case 521472095:return r("qpl")._(521472095,"2859")}return null}l.markerIdToQPLEvent=s}),98);
__d("EncryptedBackupUploadSuccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("5729"),s=o("FalcoLoggerInternal").create("encrypted_backup_upload_success",e),u=s;l.default=u}),98);
__d("IGDThreadTTLCUtils",["IGDInstamadilloUtils","InstagramMediaProductTypeName","LSThreadBitOffset","ZenonRTWebBrowserFeatureSupport","gkx","qex"],(function(t,n,r,o,a,i,l){"use strict";var e=[225,235,226,227,228,229,230,231,232,233,234,236];function s(e,t){return e==null||o("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(e)||!r("qex")._("954")?!1:o("LSThreadBitOffset").has(t,e)}function u(e){return s(e,225)}function c(e){return!r("gkx")("2400")||!o("ZenonRTWebBrowserFeatureSupport").isInsertableStreamsSupported()?!1:s(e,235)}function d(e){return s(e,226)}function m(e){return s(e,227)}function p(e){return s(e,228)}function _(e){return s(e,229)}function f(e){return s(e,230)}function g(e){return s(e,231)}function h(e){return s(e,232)}function y(e){return s(e,233)}function C(e){return s(e,234)}function b(e){return s(e,236)}function v(e){return e==null||o("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(e)||!r("qex")._("954")?!1:S(e)}function S(t){return t==null?!1:e.some(function(e){return o("LSThreadBitOffset").has(e,t)})}function R(e,t){var n=e.isDisappearingModeSettingOn,o=e.isTTLCClipEnabled,a=e.isTTLCGenericXMAShareEnabled,i=e.isTTLCMediaShareEnabled,l=e.isTTLCStoryShareEnabled,s=r("InstagramMediaProductTypeName").cast(t);if(s==null||n||!r("qex")._("954"))return!1;switch(s){case"feed":case"carousel_container":case"ad":return i;case"clips":return o;case"story":return l;case"live":return a;default:return!1}}function L(e){return new Map([["Text",u(e)],["Clip",d(e)],["Reel Share",m(e)],["Media Share",p(e)],["Story Share",_(e)],["Link",f(e)],["Generic XMA",g(e)],["Profile",b(e)],["Image",h(e)],["Video",y(e)],["Audio",C(e)],["Gif/Sticker/Avatar",void 0],["Raven",void 0],["Media Collection",void 0],["Calling",c(e)],["Rest of Message Types",void 0]])}function E(e){return{is_instamadillo_ttlc:String(v(e)),is_instamadillo_ttlc_audio:String(C(e)),is_instamadillo_ttlc_clip:String(d(e)),is_instamadillo_ttlc_generic_xma:String(g(e)),is_instamadillo_ttlc_image:String(h(e)),is_instamadillo_ttlc_link:String(f(e)),is_instamadillo_ttlc_media_share:String(p(e)),is_instamadillo_ttlc_profile:String(b(e)),is_instamadillo_ttlc_reel_share:String(m(e)),is_instamadillo_ttlc_story_share:String(_(e)),is_instamadillo_ttlc_text:String(u(e)),is_instamadillo_ttlc_video:String(y(e))}}function k(e){return{is_instamadillo_ttlc:v(e),is_instamadillo_ttlc_audio:C(e),is_instamadillo_ttlc_clip:d(e),is_instamadillo_ttlc_generic_xma:g(e),is_instamadillo_ttlc_image:h(e),is_instamadillo_ttlc_link:f(e),is_instamadillo_ttlc_media_share:p(e),is_instamadillo_ttlc_profile:b(e),is_instamadillo_ttlc_reel_share:m(e),is_instamadillo_ttlc_story_share:_(e),is_instamadillo_ttlc_text:u(e),is_instamadillo_ttlc_video:y(e)}}function I(e,t){if(e==null)return!1;switch(e.__typename){case"XMSGIgReceiverFetchXmaFeedFetchParams":return p(t);case"XMSGIgReceiverFetchXmaProfileFetchParams":return g(t);case"XMSGIgReceiverFetchXmaClipFetchParams":return d(t);default:return!1}}function T(e){return e==null?!1:o("LSThreadBitOffset").has(261,e)}l.isInstamadilloTTLCTextEnabled=u,l.isInstamadilloTTLCCallingEnabled=c,l.isInstamadilloTTLCClipEnabled=d,l.isInstamadilloTTLCReelShareEnabled=m,l.isInstamadilloTTLCMediaShareEnabled=p,l.isInstamadilloTTLCStoryShareEnabled=_,l.isInstamadilloTTLCLinkEnabled=f,l.isInstamadilloTTLCGenericXmaEnabled=g,l.isInstamadilloTTLCImageEnabled=h,l.isInstamadilloTTLCVideoEnabled=y,l.isInstamadilloTTLCAudioEnabled=C,l.isInstamadilloTTLCProfileEnabled=b,l.isIGDTTLCEnabledForThread=v,l.threadHasInstamadilloTTLCCapability=S,l.isIGDTTLCEnabledForIGDCandidate=R,l.getTtlcMessageTypeMap=L,l.getTTLCLoggingExtraData=E,l.getTTLCBooleanAnnotations=k,l.isXmaReceiverFetchTTLCEnabled=I,l.isInstamadilloOptionalE2EE=T}),98);
__d("IGDInstamadilloUtils",["IGDThreadTTLCUtils","LSThreadBitOffset","gkx","isInstamadillo"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return(e==null?void 0:e.transportKey)==="Instamadillo"}function s(e){return e==null?!1:o("LSThreadBitOffset").has(214,e)}function u(e){return e==null?!1:o("LSThreadBitOffset").has(212,e)}function c(e){return e==null?!1:o("LSThreadBitOffset").has(38,e)}function d(e){return e==null?!1:o("LSThreadBitOffset").has(211,e)}function m(e){var t=s(e),n=p(e);return n||t}function p(e){if(r("gkx")("6650"))return!1;var t=c(e),n=s(e),a=o("IGDThreadTTLCUtils").threadHasInstamadilloTTLCCapability(e);return t&&(n||a)}function _(t,n){var r=e(t)&&t.ephemeralExpirationTs!=null;return n&&r||!n&&!r}function f(t){var n=e(t);return n?r("isInstamadillo")():!0}l.isInstamadilloMessage=e,l.isInstamadilloCutover=s,l.isInstamadilloDMToggleEnabled=u,l.isIGDDisappearingModeEnabled=c,l.isInstamadilloTransportEnabled=d,l.isInstamadilloHardblockEnabled=m,l.isDMHardblockedEnabled=p,l.shouldRenderMessageReply=_,l.canMutateIGDMessage=f}),98);
__d("LSDatascriptRuntimeTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["UI","BROKER"]);i.TopLevelCallOrigin=e}),66);
__d("LSClientDependencies",[],(function(t,n,r,o,a,i){}),null);
__d("LSComputeParticipantCapabilities",["LSGetViewerFBID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[0]=t[0],t})},function(n){return t.filter(t.db.table(14).fetch([[[e[1],r[0]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.contactId,r[0])}).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[!1,!1],r[1]=n[0],r[2]=n[1],n):(t=i.item,o=[t.isAdmin==null?!1:t.isAdmin,t.isModerator],r[1]=o[0],r[2]=o[1])})},function(n){return t.filter(t.db.table(14).fetch([[[e[1],e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.contactId,e[0])}).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[!1,!1],r[4]=n[0],r[5]=n[1],n):(t=i.item,o=[t.isAdmin==null?!1:t.isAdmin,t.isModerator],r[4]=o[0],r[5]=o[1])})},function(n){return t.filter(t.db.table(7).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.id,e[0])&&t.i64.eq(t.i64.cast([0,1]),t.i64.cast([0,1]))}).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(o=[t.i64.cast([0,1073741823]),t.i64.cast([0,0]),!1],r[7]=o[0],r[8]=o[1],r[9]=o[2],o):(n=l.item,a=[n.capabilities==null?t.i64.cast([0,1073741823]):n.capabilities,n.contactTypeExact==null?t.i64.cast([0,0]):n.contactTypeExact,n.isManagedByViewer==null?!1:n.isManagedByViewer],r[7]=a[0],r[8]=a[1],r[9]=a[2])})},function(e){return r[12]=t.i64.eq(r[8],t.i64.cast([0,4]))?r[9]?t.i64.cast([0,2612119]):t.i64.or_(t.i64.cast([0,2612119]),t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,3])))):r[7],t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[11]=t[0],t})},function(o){return r[13]=t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,20]))),r[15]=r[1]&&!r[4]&&t.i64.neq(r[11],e[0])||t.i64.eq(t.i64.and_(r[12],r[13]),t.i64.cast([0,0]))?r[12]:t.i64.sub(r[12],r[13]),t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[14]=t[0],t})},function(o){return r[16]=t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,22]))),r[19]=r[4]&&r[1]&&t.i64.neq(r[14],e[0])||t.i64.eq(t.i64.and_(r[15],r[16]),t.i64.cast([0,0]))?r[15]:t.i64.sub(r[15],r[16]),r[2]?r[17]=!(r[4]||r[5]):r[17]=!0,t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[18]=t[0],t})},function(n){return r[20]=t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,21]))),o[0]=(r[1]||r[2])&&r[17]&&t.i64.neq(e[0],r[18])||t.i64.eq(t.i64.and_(r[19],r[20]),t.i64.cast([0,0]))?r[19]:t.i64.sub(r[19],r[20])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxComputeParticipantCapabilitiesStoredProcedure",e.__tables__=["participants","contacts"],a.exports=e}),null);
__d("LSAddParticipantIdToGroupThread",["LSComputeParticipantCapabilities"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.storedProcedure(n("LSComputeParticipantCapabilities"),e[1],e[0]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(n){return t.filter(t.db.table(14).fetch([[[e[0],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.contactId,e[1])&&t.i64.gt(n.authorityLevel,e[9])}).next().then(function(n){var o=n.done,a=n.value;return o?t.db.table(14).put({threadKey:e[0],contactId:e[1],readWatermarkTimestampMs:e[2],readActionTimestampMs:e[3],deliveredWatermarkTimestampMs:e[4],nickname:e[5],normalizedSearchTerms:e[10],isAdmin:e[6],isSuperAdmin:e[13],subscribeSource:e[7],authorityLevel:e[9],participantCapabilities:r[0],groupParticipantJoinState:e[11],isModerator:e[12],threadRoles:e[14]}):0})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxAddParticipantIdToGroupThreadStoredProcedure",e.__tables__=["participants"],a.exports=e}),null);
__d("LSCheckAuthoritativeMessageExists",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.filter(t.db.table(12).fetch([[[e[1]]],"optimistic"]),function(n){return t.i64.eq(n.threadKey,e[0])&&n.offlineThreadingId===e[1]&&t.i64.eq(n.authorityLevel,t.i64.cast([0,80]))}).next().then(function(e,t){var r=e.done,o=e.value;return r?n[0]=!1:(t=o.item,n[0]=!0)})},function(e){return r[0]=n[0]}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxCheckAuthoritativeMessageExistsStoredProcedure",e.__tables__=["messages"],a.exports=e}),null);
__d("LSClearPinnedMessages",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(205).fetch([[[e[0]]]]),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxClearPinnedMessagesStoredProcedure",e.__tables__=["msg_pinned_messages_v2"],a.exports=e}),null);
__d("WAAssertUnreachable",["err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){throw r("err")("Impossible value, the default statement should never be reached for value: "+e)}l.default=e}),98);
__d("WAJids",["WAAssertUnreachable","err"],(function(t,n,r,o,a,i,l){"use strict";var e=0,s="@me",u="@system",c="status@broadcast",d="0@s.whatsapp.net",m="call",p="@g.us",_=/^([1-9][0-9]{0,19}|(?!10)[1-9][0-9]{4,19}-[1-9][0-9]{9})@g.us$/,f="@call",g="@msgr",h="msgr",y="@interop",C="interop",b=/^([1-9][0-9]{0,2}-[1-9][0-9]{0,14}(:[0])?)@interop$/,v=/^([1-9][0-9]{0,2}-[1-9][0-9]{0,14}(:[0])?)@interop$/,S=/^([1-9][0-9]{0,19}(:[1-9][0-9]{0,2})?)@msgr$/,R=/^([1-9][0-9]{0,19})@msgr$/,L=/^([1-9][0-9]{0,19})(:0)?@msgr$/,E="@s.whatsapp.net",k="s.whatsapp.net",I="@s.whatsapp.net",T="s.whatsapp.net",D="lid",x="@newsletter",$=/^([1-9][0-9]{0,19})@newsletter$/,P=/^(0|((?!10)[1-9][0-9]{4,19}(\.[0-9]{1,2})?(:[0-9]{1,2})))@s.whatsapp.net$/,N=/^(0|((?!10)[1-9][0-9]{4,19})(\.[0-9]{1,2})?)@s.whatsapp.net$/,M="@lid",w="lid",A=/^([1-9][0-9]{0,14})@lid$/,F=/^([1-9][0-9]{0,14}(:[0-9]{1,2})?)@lid$/,O="@broadcast",B=/^(status|location|[1-9][0-9]{0,19})@broadcast$/,W=/^([0-9a-fA-F]{18,32})@call$/,q="@hosted",U="hosted",V=/^(((?!10)[1-9][0-9]{4,19})):99@hosted$/,H="@hosted.lid",G="hosted.lid",z=/^([1-9][0-9]{0,14}):99@hosted.lid$/,j="@bot",K=/^[1-9][0-9]{0,19}(:0)?@bot$/,Q="16505361212"+I,X=/([0-9a-zA-Z-:]+)@(g\.us|call|s\.whatsapp\.net|broadcast|msgr|lid)/g;function Y(e){return""+e+I}function J(e){return""+e+M}function Z(e){return""+e+g}function ee(e){return e.endsWith(p)?e:""+e+p}function te(e){return e.endsWith(x)?e:""+e+x}function ne(e){return e.endsWith(q)?e:""+e+q}function re(e){return e.endsWith(H)?e:""+e+H}function oe(){return p}function ae(e){if(e.endsWith(I))return e.slice(0,-I.length);if(e.endsWith(g))return e.slice(0,-g.length);if(e.endsWith(y))return e.slice(0,-y.length);if(e.endsWith(M))return e.slice(0,-M.length);if(e.endsWith(j))return e.slice(0,-j.length);throw r("err")('userIdFromJid called with non-user jid "'+e+'"')}function ie(e,t){return ae(e)+":"+t+I}function le(e,t){return ae(e)+":"+t+g}function se(e,t){return Ee(e)+":"+t+M}function ue(e,t){return ae(e)+":"+t+Ct(e)}function ce(e){return""+e+O}function de(e){return e.split("@")[0]}function me(e){return e.split("@")[0]}function pe(e){var t=e.split("@")[0],n=t.split(":"),r=n[0],o=n[1],a=parseInt(o,10);return{userId:r,deviceID:a}}function _e(e){var t=pe(e);return t.deviceID}function fe(e,t){return e===s||e===u?t:de(e)}function ge(e){return e===s||e===u?null:e}function he(e){return e===s||e===u||!e.endsWith(I)?null:e}function ye(e){if(!e.endsWith(I))throw r("err")('phoneNumberFromJid called with non-user jid "'+e+'"');return e.slice(0,-I.length)}function Ce(e){if(e.endsWith(I))return ye(e);if(e.endsWith(M))return Ee(e);throw r("err")('lidOrPhoneFromUserJid called with non phone or lid jid "'+e+'"')}function be(e){return e.endsWith(I)||e.endsWith(y)||e.endsWith(g)||e.endsWith(M)?e:null}function ve(e){return e.endsWith(I)?e:null}function Se(e){return e===c?null:e}function Re(e){return e===c?null:e}function Le(e){return e===c?c:null}function Ee(e){if(!e.endsWith(M))throw r("err")('lidFromLidUserJid called with non-LidUserJid "'+e+'"');return e.slice(0,-M.length)}function ke(e){var t=e.split("@"),n=t[0],r=t[1];return n=n.split(":")[0],n=n.split(".")[0],r===U&&(r=T),r===G&&(r=D),n+"@"+r}function Ie(e){return ke(e)}function Te(e){return ke(e)}function De(e){return e.jidType==="phoneDevice"||e.jidType==="interopDevice"||e.jidType==="lidDevice"||e.jidType==="msgrDevice"?e.deviceJid:e.jidType==="lidUser"||e.jidType==="interopUser"||e.jidType==="msgrUser"||e.jidType==="phoneUser"?e.userJid:e.jidType==="group"?e.groupJid:e.jidType==="status"?e.statusJid:e.jidType==="call"?e.callJid:e.jidType==="newsletter"?e.newsletterJid:e.jidType==="hosted"?e.hostedDeviceJid:e.jidType==="hostedLid"?e.hostedLidDeviceJid:e.jidType==="bot"?e.botJid:(e.jidType,e.broadcastJid)}function xe(t){return ae(t)+":"+e+I}function $e(t){return ae(t)+":"+e+g}function Pe(t){return se(t,e)}function Ne(t){return _e(t)===e}function Me(e){return e}function we(e){return e}function Ae(e){var t=e.split("@"),n=t[0],r=t[1],o=n.split(":"),a=o[0],i=o[1],l=a.split("."),s=l[0],u=l[1];return{user:s,device:i,agent:u,server:r}}function Fe(e){var t=Ae(e),n=t.agent,r=n===void 0?"0":n,o=t.device,a=o===void 0?"0":o,i=t.server,l=t.user;return l+"."+r+":"+a+"@"+i}function Oe(e){switch(e.jidType){case"interopUser":return e.userJid;case"lidUser":return e.userJid;case"msgrUser":return e.userJid;case"phoneUser":return e.userJid;case"group":return e.groupJid;case"status":return e.statusJid;case"interopDevice":return e.deviceJid;case"lidDevice":return e.deviceJid;case"msgrDevice":return e.deviceJid;case"phoneDevice":return e.deviceJid;case"broadcast":return e.broadcastJid;case"call":return e.callJid;case"newsletter":return e.newsletterJid;case"hosted":return e.hostedDeviceJid;case"hostedLid":return e.hostedLidDeviceJid;case"bot":return e.botJid;default:return r("WAAssertUnreachable")(e.jidType)}}function Be(e){if(e===m)return{jidType:"call",callJid:m};if(e===c)return{jidType:"status",statusJid:c};if(N.test(e))return{jidType:"phoneUser",userJid:e};if(v.test(e))return{jidType:"interopUser",userJid:e};if(R.test(e))return{jidType:"msgrUser",userJid:e};if(L.test(e)){var t=e.substr(0,e.indexOf(":"));return{jidType:"msgrUser",userJid:Z(t)}}else return P.test(e)?{jidType:"phoneDevice",deviceJid:e}:b.test(e)?{jidType:"interopDevice",deviceJid:e}:S.test(e)?{jidType:"msgrDevice",deviceJid:e}:_.test(e)?{jidType:"group",groupJid:e.endsWith(p)?e:""+e+p}:B.test(e)?{jidType:"broadcast",broadcastJid:e}:W.test(e)?{jidType:"call",callJid:e}:A.test(e)?{jidType:"lidUser",userJid:e}:F.test(e)?{jidType:"lidDevice",deviceJid:e}:$.test(e)?{jidType:"newsletter",newsletterJid:e}:V.test(e)?{jidType:"hosted",hostedDeviceJid:e}:z.test(e)?{jidType:"hostedLid",hostedLidDeviceJid:e}:K.test(e)?{jidType:"bot",botJid:e}:{jidType:"unknown"}}function We(e){return e==="status@broadcast"?e:null}function qe(e){if(N.test(e)||v.test(e)||R.test(e)||A.test(e)||K.test(e))return e;if(L.test(e)){var t=e.substr(0,e.indexOf(":"));return Z(t)}else return null}function Ue(e){return A.test(e)?e:null}function Ve(e){return B.test(e)?e:null}function He(e){return P.test(e)||S.test(e)||b.test(e)||F.test(e)||V.test(e)||z.test(e)?e:N.test(e)?bt(e):K.test(e)?vt(e):null}function Ge(e){return b.test(e)?e:null}function ze(e){return _.test(e)?e:null}function je(e){return We(e)||ze(e)||Ve(e)?e:null}function Ke(e){return W.test(e)?e:null}function Qe(e){return e==="s.whatsapp.net"||e==="g.us"||e==="call"?e:null}function Xe(e){return qe(e)||ze(e)}function Ye(e){return $.test(e)?e:null}function Je(e){return V.test(e)?e:null}function Ze(e){return z.test(e)?e:null}function et(e){return be(e)==null?e:null}function tt(e){var t=Ae(e),n=t.device,r=n===void 0?"0":n,o=t.server,a=t.user;return a+":"+r+"@"+o}function nt(e){if(e.endsWith(p))return e.slice(0,-p.length);throw r("err")('groupId called with non-group jid "'+e+'"')}function rt(e){var t=Be(e);return t.jidType==="unknown"?e:t.jidType==="status"?t.statusJid:(t.jidType,Oe(t).replace(/^([^@]*)([^@][^@][^@][^@])@(.*)$/,"...$2@$3"))}function ot(e){return e.includes("@")?e.replace(X,rt):e}function at(e){return e.endsWith(p)?e:null}function it(e,t){if(e.endsWith(I))return t.phoneUser(e);if(e.endsWith(g))return t.msgrUser(e);if(e.endsWith(y))return t.interopUser(e);if(e.endsWith(M))return t.lidUser(e);if(at(e)!=null)return t.group(e);throw r("err")("Can not switch on chat jid "+e)}function lt(e,t){if(e.endsWith(g))return t.user(e);if(at(e)!=null)return t.group(e);throw r("err")("Can not switch on chat jid "+e)}function st(e,t){if(e.endsWith(I))return t.user(e);if(at(e)!=null)return t.group(e);throw r("err")("Can not switch on chat jid "+e)}function ut(e,t){return it(e,{lidUser:function(n){return t.user(n)},interopUser:function(n){return t.user(n)},msgrUser:function(n){return t.user(n)},phoneUser:function(n){return t.user(n)},group:function(n){return t.group(n)}})}function ct(e,t){return e===c?t.status():st(e,{user:t.user,group:t.group})}function dt(e,t){return e===c?t.status():it(e,{interopUser:t.interopUser,phoneUser:t.phoneUser,msgrUser:t.msgrUser,lidUser:t.lidUser,group:t.group})}function mt(e,t){return e===c?t.multicast(c):st(e,{user:t.user,group:t.multicast})}function pt(e){return e.endsWith(M)}function _t(e){return e==="@me"}function ft(e){return e==="@system"}function gt(){return g}function ht(){return I}function yt(){return E}function Ct(e){if(e.endsWith(I))return I;if(e.endsWith(g))return g;if(e.endsWith(M))return M;if(e.endsWith(j))return j;throw r("err")('userDomainFromJid called with non-user jid "'+e+'"')}function bt(t){return ae(t)+":"+e+Ct(t)}function vt(e){return""+ae(e)+Ct(e)}function St(e){var t=e.platform,n=t==="msgr"?g:I;function r(e){return""+e+n}function o(){return n}return{toUserJid:r,getUserDomain:o}}function Rt(e){return e}function Lt(e){return e}function Et(e){return e}function kt(e){return e}function It(e){return e}function Tt(e){return e}function Dt(e){return e}function xt(e){return e}function $t(e){return e}function Pt(e){return e}function Nt(e){return e}function Mt(e){return e}function wt(e){return e}function At(e){return e}function Ft(e){return e}function Ot(e){return e}function Bt(e){return it(e,{group:function(t){return nt(t)},lidUser:function(t){return ae(t)},interopUser:function(t){return ae(t)},phoneUser:function(t){return ae(t)},msgrUser:function(t){return ae(t)}})}function Wt(){return f}l.DEFAULT_DEVICE_ID=e,l.AUTHOR_ME=s,l.AUTHOR_SYSTEM=u,l.STATUS_JID=c,l.PSA_JID=d,l.CALL_LINK_JID=m,l.MSGR_USER_DOMAIN=g,l.MSGR_USER_JID_SUFFIX=h,l.INTEROP_DOMAIN=y,l.INTEROP_USER_JID_SUFFIX=C,l.WA_SERVER_JID_SUFFIX=k,l.WA_USER_DOMAIN=I,l.WA_USER_JID_SUFFIX=T,l.WA_LID_SUFFIX=D,l.WA_NEWSLETTER_JID_DOMAIN=x,l.LID_DOMAIN=M,l.LID_SUFFIX=w,l.HOSTED_DOMAIN=q,l.HOSTED_SUFFIX=U,l.HOSTED_LID_DOMAIN=H,l.HOSTED_LID_SUFFIX=G,l.BOT_DOMAIN=j,l.SURVEY_USER_JID=Q,l.toPhoneUserJid=Y,l.toLidUserJid=J,l.toMsgrUserJid=Z,l.toGroupJid=ee,l.toNewsletterJid=te,l.toHostedDeviceJid=ne,l.toHostedLidDeviceJid=re,l.getGroupDomain=oe,l.userIdFromJid=ae,l.toPhoneDeviceJid=ie,l.toMsgrDeviceJid=le,l.toLidDeviceJid=se,l.toDeviceJid=ue,l.toBroadcastJid=ce,l.extractUserId=de,l.extractChatId__DANGEROUS=me,l.extractDeviceIDParts=pe,l.extractDeviceId=_e,l.authorToUserId=fe,l.authorAsUserJid=ge,l.authorAsPhoneUserJid=he,l.phoneNumberFromJid=ye,l.lidOrPhoneFromUserJid=Ce,l.interpretAsUserJid=be,l.interpretAsPhoneUserJid=ve,l.asChatJid=Se,l.asPhoneChatJid=Re,l.asStatusJid=Le,l.lidFromLidUserJid=Ee,l.extractUserJid=ke,l.extractPhoneUserJid=Ie,l.extractLidUserJid=Te,l.extractJidFromJidWithType=De,l.defaultPhoneDeviceJidForUser=xe,l.defaultMsgrDeviceJidForUser=$e,l.defaultLidDeviceJidForLidUserJid=Pe,l.isPrimaryDevice=Ne,l.interpretAsDeviceId=Me,l.interpretAsNumber=we,l.parseJidParts=Ae,l.fullFormDeviceJidString=Fe,l.extractFromJid=Oe,l.interpretAndValidateJid=Be,l.validateStatusJid=We,l.validateUserJid=qe,l.validateLidUserJid=Ue,l.validateBroadcastJid=Ve,l.validateDeviceJid=He,l.validateInteropDeviceJid=Ge,l.validateGroupJid=ze,l.validateMulticastJid=je,l.validateCallJid=Ke,l.validateDomainJid=Qe,l.validateChatJid=Xe,l.validateNewsletterJid=Ye,l.validateHostedDeviceJid=Je,l.validateHostedLidDeviceJid=Ze,l.asMulticastJid=et,l.stripAgentIdFromPhoneDeviceJid=tt,l.groupIdFromJid=nt,l.sanitizeJidForLogging=rt,l.maybeSanitizeLogLineText=ot,l.interpretAsGroupJid=at,l.switchOnChatJidType=it,l.switchOnMsgrChatJidType=lt,l.switchOnPhoneChatJidType=st,l.switchOnUserChatJidType=ut,l.switchOnPhoneJidType=ct,l.switchOnJidType=dt,l.switchOnMulticastJidType=mt,l.isLidUser=pt,l.isAuthorMe=_t,l.isAuthorSystem=ft,l.getMsgrUserDomain=gt,l.getWhatsappUserDomain=ht,l.getServerDomain=yt,l.defaultDeviceJidForUser=bt,l.defaultDeviceJidForBot=vt,l.createJidUtils=St,l.unsafeCoerceToChatJid=Rt,l.unsafeCoerceToDeviceJid=Lt,l.unsafeCoerceToPhoneDeviceJid=Et,l.unsafeCoerceToMsgrDeviceJid=kt,l.unsafeCoerceToInteropDeviceJid=It,l.unsafeCoerceToLidDeviceJid=Tt,l.unsafeCoerceToUserJid=Dt,l.unsafeCoerceToLidUserJid=xt,l.unsafeCoerceToPhoneUserJid=$t,l.unsafeCoerceToInteropUserJid=Pt,l.unsafeCoerceToMsgrUserJid=Nt,l.unsafeCoerceToGroupJid=Mt,l.unsafeCoerceToDeviceId=wt,l.unsafeCoerceToNewsletterJid=At,l.unsafeCoerceToHostedDeviceJid=Ft,l.unsafeCoerceToHostedLidDeviceJid=Ot,l.threadIdForChatJid=Bt,l.getGroupCallDomain=Wt}),98);
__d("getChatJidForLSDBJid",["I64","LSMessagingThreadTypeUtil","ReQL","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t,n,r){var a=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.threads).getKeyRange(n));if(a!=null){var i=(e||(e=o("I64"))).to_string(r);return o("LSMessagingThreadTypeUtil").isGroup(a.threadType)?o("WAJids").toGroupJid(i):o("WAJids").toMsgrUserJid(i)}}l.getMaybeChatJidForLSDBJid=s}),98);
__d("LSShimCompleteThreadCutover.nop",["FBLogger","I64","ReQL","cr:7344","getChatJidForLSDBJid"],(function(t,n,r,o,a,i,l){"use strict";var e,s=async function(a,i,l,s,u){var t=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.cutover_threads).getKeyRange(s));if(t!=null){var c=t.showOpenMessageHistory===!1;if(c)return[(e||(e=o("I64"))).one];var d=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.mi_act_mapping_table.index("jid")).getKeyRange(t.armadilloThreadId));if(d!=null){var m=await o("getChatJidForLSDBJid").getMaybeChatJidForLSDBJid(a,d.serverThreadKey,d.jid);return m==null?[(e||(e=o("I64"))).one]:(n("cr:7344").load().then(function(t){var n=t.fireAndForget;n("backend","insertAdminMessageInCutoverThreads",{openThreadId:(e||(e=o("I64"))).to_string(s),threadJid:m,traceId:u})}).catch(function(e){r("FBLogger")("messenger_web_product").catching(e).warn("Failed to insert admin message in cutover threads")}),[(e||(e=o("I64"))).zero])}return[(e||(e=o("I64"))).one]}return[(e||(e=o("I64"))).one]};s.__nop_name__="LSShimCompleteThreadCutover",l.default=s}),98);
__d("LSCompleteThreadCutover",["LSShimCompleteThreadCutover.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.nativeOperation(n("LSShimCompleteThreadCutover.nop"),e[0],e[1],e[2]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxCompleteThreadCutoverStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSDeleteBanner",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(118).fetch([[[e[1],e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.bannerId,e[0])}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSInThreadBannerDeleteBannerStoredProcedure",e.__tables__=["in_thread_banner"],a.exports=e}),null);
__d("LSDeleteBannersByIds",["LSArrayGetObjectAt"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.sequence([function(o){return r[1]=t.createArray(),r[2]=t.i64.of_int32(e[1].length),t.i64.gt(r[2],t.i64.cast([0,0]))?t.loopAsync(r[2],function(o){return r[4]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[1],r[4]).then(function(e){var t;return t=e,r[5]=t[0],r[6]=t[1],t})},function(e){return r[7]=(r[1].push(t.i64.to_string(r[5])),r[1])}])}):t.resolve()},function(e){return r[3]=r[1].join(","),r[0]=r[3]}])},function(n){return t.forEach(t.filter(t.db.table(118).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&e[1].some(function(e){return t.i64.eq(n.bannerId,e)})}),function(e){return e.delete()})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSInThreadBannerDeleteBannersByIdsStoredProcedure",e.__tables__=["in_thread_banner"],a.exports=e}),null);
__d("LSDeleteExistingMessageRanges",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(13).fetch([[[e[0]]]]),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteExistingMessageRangesStoredProcedure",e.__tables__=["messages_ranges_v2__generated"],a.exports=e}),null);
__d("LSDeleteRowRichStatusCustomAudience",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSOmnistoreSettingsDeleteRowRichStatusCustomAudienceStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSDeleteThenInsertAvatarFeatureConfig",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSContactDeleteThenInsertAvatarFeatureConfigStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSDeleteThenInsertBotProfileInfoV2",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(299).put({botId:e[0],isCreatedByViewer:e[1],description:e[4],tintColor:e[2],shortDescription:e[3]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSContactDeleteThenInsertBotProfileInfoV2StoredProcedure",e.__tables__=["bot_profile_info_v2"],a.exports=e}),null);
__d("LSDeleteThenInsertCmChannelList",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(167).put({communityId:e[0],threadId:e[1],categoryId:e[2],channelPrivacy:e[3]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsDeleteThenInsertCmChannelListStoredProcedure",e.__tables__=["cm_channel_list"],a.exports=e}),null);
__d("LSDeleteThenInsertCommunityUnjoinedThread",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return n[1]=e[12]==null?t.i64.cast([0,19]):e[12],n[2]="community",n[3]=t.i64.cast([0,0])==null?t.i64.cast([0,0]):t.i64.cast([0,0]),t.db.table(9).fetch([[[e[0]]]]).next().then(function(r,o){var a,i,l=r.done,s=r.value;return l?t.db.table(9).put({threadKey:e[0],parentThreadKey:e[1],mailboxType:t.i64.cast([0,0]),threadType:n[1],threadName:e[2],folderName:n[2],threadPictureUrl:e[3],threadPictureUrlFallback:e[4],threadPictureUrlExpirationTimestampMs:e[5],authorityLevel:e[6],lastActivityTimestampMs:e[7],lastReadWatermarkTimestampMs:e[8],muteExpireTimeMs:n[3],removeWatermarkTimestampMs:t.i64.cast([-1,4294967295]),ongoingCallState:t.i64.cast([0,0]),threadDescription:e[9],snippet:e[10],hasPendingInvitation:e[13],eventStartTimestampMs:e[14],eventEndTimestampMs:e[15],takedownState:e[16],cannotReplyReason:e[17],themeFbid:e[18],threadStatus:e[19],needsAdminApprovalForNewParticipant:e[20],joinRequestApprovalSetting:e[21],snippetText:e[24],hasPendingJoinRequest:e[25],capabilities:t.i64.cast([0,0]),capabilities2:t.i64.cast([0,0]),capabilities3:t.i64.cast([0,0]),capabilities4:t.i64.cast([0,0]),syncSource:e[26]}):(o=s.item,n[4]=o.lastActivityTimestampMs,n[6]=o.parentThreadKey,n[5]=o.disappearingThreadKey,n[7]=o.isDisappearingMode,t.i64.le(o.authorityLevel,e[6])?t.i64.gt(n[4],e[7])&&t.i64.neq(n[5],void 0)?(t.i64.eq(e[1],t.i64.cast([-1,4294967286]))&&t.i64.eq(n[6],t.i64.cast([0,0]))?(a=[n[6],o.folderName],n[8]=a[0],n[9]=a[1]):(i=[e[1],n[2]],n[8]=i[0],n[9]=i[1]),t.db.table(9).put({threadKey:e[0],parentThreadKey:n[8],mailboxType:t.i64.cast([0,0]),threadType:n[1],threadName:e[2],folderName:n[9],threadPictureUrl:e[3],threadPictureUrlFallback:e[4],threadPictureUrlExpirationTimestampMs:e[5],authorityLevel:e[6],lastActivityTimestampMs:n[4],lastReadWatermarkTimestampMs:o.lastReadWatermarkTimestampMs,muteExpireTimeMs:n[3],removeWatermarkTimestampMs:t.i64.cast([-1,4294967295]),ongoingCallState:t.i64.cast([0,0]),threadDescription:e[9],snippet:e[10],hasPendingInvitation:e[13],eventStartTimestampMs:e[14],eventEndTimestampMs:e[15],takedownState:e[16],cannotReplyReason:e[17],themeFbid:e[18],threadStatus:e[19],needsAdminApprovalForNewParticipant:e[20],joinRequestApprovalSetting:e[21],snippetText:e[24],hasPendingJoinRequest:e[25],capabilities:t.i64.cast([0,0]),capabilities2:t.i64.cast([0,0]),capabilities3:t.i64.cast([0,0]),capabilities4:t.i64.cast([0,0]),syncSource:e[26],disappearingThreadKey:n[5],isDisappearingMode:n[7]})):t.db.table(9).put({threadKey:e[0],parentThreadKey:e[1],mailboxType:t.i64.cast([0,0]),threadType:n[1],threadName:e[2],folderName:n[2],threadPictureUrl:e[3],threadPictureUrlFallback:e[4],threadPictureUrlExpirationTimestampMs:e[5],authorityLevel:e[6],lastActivityTimestampMs:e[7],lastReadWatermarkTimestampMs:e[8],muteExpireTimeMs:n[3],removeWatermarkTimestampMs:t.i64.cast([-1,4294967295]),ongoingCallState:t.i64.cast([0,0]),threadDescription:e[9],snippet:e[10],hasPendingInvitation:e[13],eventStartTimestampMs:e[14],eventEndTimestampMs:e[15],takedownState:e[16],cannotReplyReason:e[17],themeFbid:e[18],threadStatus:e[19],needsAdminApprovalForNewParticipant:e[20],joinRequestApprovalSetting:e[21],snippetText:e[24],hasPendingJoinRequest:e[25],capabilities:t.i64.cast([0,0]),capabilities2:t.i64.cast([0,0]),capabilities3:t.i64.cast([0,0]),capabilities4:t.i64.cast([0,0]),syncSource:e[26],disappearingThreadKey:n[5],isDisappearingMode:n[7]}):t.resolve())})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteThenInsertCommunityUnjoinedThreadStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSDeleteThenInsertRankingRequest",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(135).put({scoreType:e[0],requestId:e[1]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSRankingDeleteThenInsertRankingRequestStoredProcedure",e.__tables__=["ranking_requests"],a.exports=e}),null);
__d("LSDeleteThenInsertRankingScore",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(134).put({contactId:e[0],scoreType:e[1],contactType:e[2],score:e[3],scoreIndex:e[4]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSRankingDeleteThenInsertRankingScoreStoredProcedure",e.__tables__=["ranking_scores"],a.exports=e}),null);
__d("LSShape",["LSDict"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return r("LSDict").fromObject(e)}function s(e){return r("LSDict").shapeToRecord(e)}l.ofRecord=e,l.toRecord=s}),98);
__d("LSFillDeanonCacheForE2EEThread.nop",["I64","LSShape","LSSynchronousPromise","LSVec","PromiseOrValue","ReQL","cr:7871","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(a,i,l,u){if(n("cr:7871")==null||!r("gkx")("15959"))return o("LSSynchronousPromise").makeSynchronousPromise();var t=r("LSVec").toArray(u).map(function(t){var n=o("LSShape").toRecord(t),r=n.offline_threading_id,a=n.sort_order_ms;return{externalId:r,msgType:"unknown-deanon",sortOrderMs:(e||(e=o("I64"))).to_float(a)}}),c=o("ReQL").fromTableAscending(a.mi_act_mapping_table).getKeyRange(l).iterator(new WeakMap);return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise((s||(s=o("PromiseOrValue"))).map(c.next(),function(e){var r;((r=e.value)==null?void 0:r[1].jid)!=null&&n("cr:7871").initDeanonCacheDescForThread(e.value[1].jid,t)}))};u.__nop_name__="LSFillDeanonCacheForE2EEThread",l.default=u}),98);
__d("LSFillDeanonCacheForE2EEThread",["LSFillDeanonCacheForE2EEThread.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(r){return t.nativeOperation(n("LSFillDeanonCacheForE2EEThread.nop"),e[0],e[1])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxFillDeanonCacheForE2EEThreadStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSShimHybridThreadDeleteByThreadKey.nop",[],(function(t,n,r,o,a,i){"use strict";var e=async function(t,n,r){};e.__nop_name__="LSShimHybridThreadDeleteByThreadKey",i.default=e}),66);
__d("LSHybridThreadDelete",["LSShimHybridThreadDeleteByThreadKey.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(r){return t.nativeOperation(n("LSShimHybridThreadDeleteByThreadKey.nop"),e[0])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxHybridThreadDeleteStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSInsertAttachmentCta",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(19).add({ctaId:e[0],attachmentFbid:e[1],attachmentIndex:e[2],threadKey:e[3],messageId:e[5],title:e[6],type_:e[7],platformToken:e[8],actionUrl:e[9],nativeUrl:e[10],urlWebviewType:e[11],actionContentBlob:e[12],enableExtensions:e[13],extensionHeightType:e[14],targetId:e[15]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxInsertAttachmentCtaStoredProcedure",e.__tables__=["attachment_ctas"],a.exports=e}),null);
__d("LSInsertAttachmentItem",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(18).add({attachmentFbid:e[0],attachmentIndex:e[1],threadKey:e[2],messageId:e[4],defaultActionEnableExtensions:e[31],originalPageSenderId:e[7],titleText:e[8],subtitleText:e[9],bodyText:e[12],playableUrl:e[13],playableUrlFallback:e[14],playableUrlExpirationTimestampMs:e[15],playableUrlMimeType:e[16],dashManifest:e[17],previewUrl:e[18],previewUrlFallback:e[19],previewUrlExpirationTimestampMs:e[20],previewUrlMimeType:e[21],previewWidth:e[22],previewHeight:e[23],imageUrl:e[24],defaultCtaId:e[25],defaultCtaTitle:e[26],defaultCtaType:e[27],defaultButtonType:e[29],defaultActionUrl:e[30],defaultWebviewHeightRatio:e[33],attachmentCta1Id:e[35],cta1Title:e[36],cta1IconType:e[37],cta1Type:e[38],attachmentCta2Id:e[40],cta2Title:e[41],cta2IconType:e[42],cta2Type:e[43],attachmentCta3Id:e[45],cta3Title:e[46],cta3IconType:e[47],cta3Type:e[48],faviconUrl:e[49],faviconUrlFallback:e[50],faviconUrlExpirationTimestampMs:e[51],previewUrlLarge:e[52]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxInsertAttachmentItemStoredProcedure",e.__tables__=["attachment_items"],a.exports=e}),null);
__d("LSInsertBlobAttachment",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.sequence([function(n){return t.forEach(t.filter(t.db.table(16).fetch([[[e[27],e[32],e[34]]]]),function(n){return t.i64.eq(n.threadKey,e[27])&&t.i64.eq(t.i64.cast([0,0]),e[28])&&n.messageId===e[32]&&n.attachmentFbid===e[34]&&t.i64.lt(n.authorityLevel,e[48])&&(t.i64.eq(n.attachmentType,t.i64.cast([0,2]))||t.i64.eq(n.attachmentType,t.i64.cast([0,3]))||t.i64.eq(n.attachmentType,t.i64.cast([0,4]))||t.i64.eq(n.attachmentType,t.i64.cast([0,5]))||t.i64.eq(n.attachmentType,t.i64.cast([0,6]))||t.i64.eq(n.attachmentType,t.i64.cast([0,10]))||t.i64.eq(n.attachmentType,t.i64.cast([0,14]))||t.i64.eq(n.attachmentType,t.i64.cast([0,15])))&&t.i64.eq(n.ephemeralMediaState,void 0)&&n.isSharable===!1}),function(e){return e.delete()})},function(n){return t.db.table(16).add({threadKey:e[27],messageId:e[32],attachmentFbid:e[34],filename:e[0],filesize:e[1],hasMedia:e[2],isSharable:!1,playableUrl:e[3],playableUrlFallback:e[4],playableUrlExpirationTimestampMs:e[5],playableUrlMimeType:e[6],dashManifest:e[7],previewUrl:e[8],previewUrlFallback:e[9],previewUrlExpirationTimestampMs:e[10],previewUrlMimeType:e[11],miniPreview:e[13],previewWidth:e[14],previewHeight:e[15],attributionAppId:e[16],attributionAppName:e[17],attributionAppIcon:e[18],attributionAppIconFallback:e[19],attributionAppIconUrlExpirationTimestampMs:e[20],localPlayableUrl:e[21],playableDurationMs:e[22],attachmentIndex:e[23],accessibilitySummaryText:e[24],isPreviewImage:e[25],originalFileHash:e[26],attachmentType:e[29],timestampMs:e[31],offlineAttachmentId:e[33],hasXma:e[35],xmaLayoutType:e[36],xmasTemplateType:e[37],titleText:e[38],subtitleText:e[39],descriptionText:e[40],sourceText:e[41],faviconUrlExpirationTimestampMs:e[42],isBorderless:e[44],previewUrlLarge:e[45],samplingFrequencyHz:e[46],waveformData:e[47],authorityLevel:e[48]})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxInsertBlobAttachmentStoredProcedure",e.__tables__=["attachments"],a.exports=e}),null);
__d("LSClearMessagePlaceholderRange",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(13).fetch([[[e[0],t.i64.cast([0,0])]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&n.minMessageId===e[1]&&t.i64.eq(t.i64.cast([0,0]),n.minTimestampMs)&&t.i64.eq(e[2],n.maxTimestampMs)}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxClearMessagePlaceholderRangeStoredProcedure",e.__tables__=["messages_ranges_v2__generated"],a.exports=e}),null);
__d("LSInsertNewMessageRange",["LSClearMessagePlaceholderRange"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(r){return t.storedProcedure(n("LSClearMessagePlaceholderRange"),e[0],e[9],t.i64.cast([0,0]))},function(n){return t.filter(t.db.table(13).fetch([[[e[0],{lte:e[5]}]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.le(n.minTimestampMs,e[5])&&t.i64.ge(n.maxTimestampMs,e[5])}).next().then(function(t,n){var o,a,i=t.done,l=t.value;return i?(o=[e[1],e[3],e[7]],r[0]=o[0],r[1]=o[1],r[2]=o[2],o):(n=l.item,a=[n.minTimestampMs,n.minMessageId,n.hasMoreBefore],r[0]=a[0],r[1]=a[1],r[2]=a[2])})},function(n){return t.filter(t.db.table(13).fetch([[[e[0],{lte:e[6]}]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.le(n.minTimestampMs,e[6])&&t.i64.ge(n.maxTimestampMs,e[6])}).next().then(function(t,n){var o,a,i=t.done,l=t.value;return i?(o=[e[2],e[4],e[8]],r[4]=o[0],r[5]=o[1],r[6]=o[2],o):(n=l.item,a=[n.maxTimestampMs,n.maxMessageId,n.hasMoreAfter],r[4]=a[0],r[5]=a[1],r[6]=a[2])})},function(n){return t.forEach(t.filter(t.db.table(13).fetch([[[e[0],{lte:e[6]}]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.ge(e[6],n.minTimestampMs)&&t.i64.le(e[5],n.maxTimestampMs)}),function(e){return e.delete()})},function(n){return t.db.table(13).put({threadKey:e[0],minTimestampMs:r[0],minMessageId:r[1],maxTimestampMs:r[4],maxMessageId:r[5],isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:r[2],hasMoreAfter:r[6]})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxInsertNewMessageRangeStoredProcedure",e.__tables__=["messages_ranges_v2__generated"],a.exports=e}),null);
__d("LSIssueFetchThreadCapabilitiesTask",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSMailboxIssueFetchThreadCapabilitiesTaskStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSIssueInsertPersistentMenuItemsForThreadTask",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("thread_key",e[0]),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),"insert_persistent_menu_items",t.i64.cast([0,117]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSOmnistoreSettingsIssueInsertPersistentMenuItemsForThreadTaskStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSIssueNextSync",["LSIssueNewTaskAndGetTaskID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.count(t.filter(t.db.table(310).fetch(),function(t){return t.projectName===e[1]})).then(function(e){return r[0]=e})},function(o){return t.i64.gt(r[0],t.i64.cast([0,0]))&&e[3]===!0?t.resolve(0):t.sequence([function(n){return t.forEach(t.filter(t.db.table(310).fetch(),function(t){return t.projectName===e[1]}),function(e){return e.delete()})},function(o){return t.i64.gt(e[2],t.i64.cast([0,0]))?(r[3]=t.i64.of_float(Date.now()),r[1]=t.i64.add(r[3],e[2])):r[1]=t.i64.cast([0,0]),t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),["acs_sync","_",e[1]].join(""),t.i64.cast([0,362]),"",void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,r[1],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[2]=t[0],t})},function(n){return t.db.table(310).add({taskId:r[2],projectName:e[1],maxClientTokenPoolSize:e[0]})}])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSAnonymousCredentialsIssueNextSyncStoredProcedure",e.__tables__=["acs_request_context"],a.exports=e}),null);
__d("LSMailboxTaskCompletionApiOnTaskCompletion",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(233).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({success:e[1]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreMailboxTaskCompletionApiOnTaskCompletionStoredProcedure",e.__tables__=["mailbox_task_completion_api_tasks"],a.exports=e}),null);
__d("LSMarkThreadReadV2",["LSGetViewerFBID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[0]=t.i64.cast([0,0]):(n=a.item,r[0]=n.lastActivityTimestampMs)})},function(o){return t.i64.gt(r[0],e[1])?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[2]=t[0],t})},function(n){return t.count(t.filter(t.db.table(12).fetch([[[e[0],{gt:e[1]}]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(n.senderId,r[2])&&t.i64.gt(n.timestampMs,e[1])})).then(function(e){return r[3]=e})},function(n){return t.count(t.db.table(12).fetch([[[e[0],{gt:e[1]}]]])).then(function(e){return r[4]=e})},function(n){return t.i64.eq(r[3],r[4])&&t.i64.gt(r[4],t.i64.cast([0,0]))?t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(e){var t=e.update,n=e.item;return t({lastReadWatermarkTimestampMs:n.lastActivityTimestampMs})}):t.forEach(t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.gt(e[1],n.lastReadWatermarkTimestampMs)}),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[1]})})}]):t.forEach(t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.gt(e[1],n.lastReadWatermarkTimestampMs)}),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[1]})})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxMarkThreadReadV2StoredProcedure",e.__tables__=["threads","messages"],a.exports=e}),null);
__d("LSReplaceOptimisticReaction",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(8).fetch([[[e[0],e[2],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&n.messageId===e[2]&&t.i64.eq(n.actorId,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.le(n.authorityLevel,t.i64.cast([0,20]))}),function(e){var n=e.update,r=e.item;return n({authorityLevel:t.i64.cast([0,60])})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxReplaceOptimisticReactionStoredProcedure",e.__tables__=["reactions"],a.exports=e}),null);
__d("LSSetForwardScore",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(12).fetch([[[e[0],e[2],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.timestampMs,e[2])&&n.messageId===e[1]}),function(t){var n=t.update,r=t.item;return n({forwardScore:e[3]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxSetForwardScoreStoredProcedure",e.__tables__=["messages"],a.exports=e}),null);
__d("LSSetMessageDisplayedContentTypes",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.sequence([function(r){return t.db.table(16).fetch([[[e[0],e[1]]]]).next().then(function(e,t){var r,o,a=e.done,i=e.value;return a?(r=[void 0,void 0],n[0]=r[0],n[1]=r[1],r):(t=i.item,o=[t.attachmentType,t.xmaLayoutType],n[0]=o[0],n[1]=o[1])})},function(r){return t.filter(t.db.table(12).fetch([[[e[0],e[2],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.timestampMs,e[2])&&n.messageId===e[1]}).next().then(function(e,r){var o,a,i=e.done,l=e.value;return i?(o=[t.i64.cast([0,0]),void 0,void 0],n[3]=o[0],n[4]=o[1],n[5]=o[2],o):(r=l.item,a=[r.replySourceTypeV2,r.replySourceId,r.text],n[3]=a[0],n[4]=a[1],n[5]=a[2])})},function(r){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,t){var r=e.done,o=e.value;return r?n[7]=void 0:(t=o.item,n[7]=t.customEmoji)})},function(r){return t.i64.eq(n[0],t.i64.cast([0,6]))?n[9]=t.i64.cast([0,64]):(t.i64.eq(n[0],t.i64.cast([0,5]))?n[16]=t.i64.cast([0,4]):(t.i64.eq(n[0],t.i64.cast([0,3]))?n[17]=t.i64.cast([0,16384]):(t.i64.eq(n[0],t.i64.cast([0,2]))?n[18]=t.i64.cast([0,2]):(t.i64.eq(n[0],t.i64.cast([0,4]))?n[19]=t.i64.cast([0,2]):n[19]=e[5]?t.i64.cast([0,4096]):t.i64.cast([0,0]),n[18]=n[19]),n[17]=n[18]),n[16]=n[17]),n[9]=n[16]),n[10]=n[5]!==void 0&&n[5]!==""&&n[5]!==n[7]?t.i64.or_(n[9],t.i64.cast([0,1])):n[9],n[11]=n[7]!==void 0&&n[7]===n[5]?t.i64.or_(n[10],t.i64.cast([0,128])):n[10],n[12]=t.i64.eq(n[0],t.i64.cast([0,7]))?t.i64.or_(n[11],t.i64.cast([0,8])):n[11],n[13]=t.i64.eq(n[1],t.i64.cast([0,0]))?t.i64.or_(n[12],t.i64.cast([0,1024])):t.i64.eq(n[1],t.i64.cast([0,1]))?t.i64.or_(n[12],t.i64.cast([0,2048])):n[12],n[14]=t.i64.eq(n[3],t.i64.cast([0,2]))&&n[4]!==void 0?t.i64.or_(n[13],t.i64.cast([0,512])):n[13],n[15]=n[5]!==void 0&&n[5]!==""&&n[5]!==n[7]&&t.i64.eq(n[3],t.i64.cast([0,5]))?t.i64.or_(n[14],t.i64.cast([0,512])):n[14],t.forEach(t.filter(t.db.table(12).fetch([[[e[0],e[2],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.timestampMs,e[2])&&n.messageId===e[1]}),function(r){var o=r.update,a=r.item;return o({displayedContentTypes:e[4]?t.i64.cast([0,32]):t.i64.eq(n[3],t.i64.cast([0,3]))?t.i64.or_(n[15],t.i64.cast([0,8192])):n[15]})})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxSetMessageDisplayedContentTypesStoredProcedure",e.__tables__=["attachments","messages","threads"],a.exports=e}),null);
__d("LSDeleteAllCommunityChannelCategories",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.sequence([function(e){return t.forEach(t.db.table(182).fetch(),function(e){return e.delete()})},function(e){return t.forEach(t.db.table(9).fetch([[[t.i64.cast([0,20])]],"threadTypeLastActivityTimestampMs"]),function(e){return e.delete()})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteAllCommunityChannelCategoriesStoredProcedure",e.__tables__=["cm_category_list","threads"],a.exports=e}),null);
__d("LSDeleteAllCommunityFolders",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.sequence([function(e){return t.forEach(t.db.table(162).fetch(),function(e){return e.delete()})},function(e){return t.forEach(t.db.table(9).fetch([[[t.i64.cast([0,17])]],"threadTypeLastActivityTimestampMs"]),function(e){return e.delete()})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteAllCommunityFoldersStoredProcedure",e.__tables__=["community_folders","threads"],a.exports=e}),null);
__d("LSDeleteThenInsertCmCommunityList",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(166).put({communityId:e[0]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsDeleteThenInsertCmCommunityListStoredProcedure",e.__tables__=["cm_community_list"],a.exports=e}),null);
__d("LSBase64Decode",["Base64Utils","CryptoLogger","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\./g,"=").replace("/,/","="),n=4-t.length%4;if(n<4)for(var r=0;r<n;r++)t+="=";return t}function s(t){var n=o("CryptoLogger").CryptoLogger("base64decode");try{return t!=null?o("Base64Utils").toArrayBuffer(e(t)):void 0}catch(e){var a=r("getErrorSafe")(e);if(a.message==null)return;n.catching(a).mustfix(a.message)}}l.decode=s}),98);
__d("LSResult",[],(function(t,n,r,o,a,i){"use strict";function e(e){return[e]}i.default=e}),66);
__d("LSBase64Decode.nop",["LSBase64Decode","LSResult","LSSynchronousPromise"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,a){return o("LSSynchronousPromise").makeSynchronousPromise(r("LSResult")(o("LSBase64Decode").decode(a)))};e.__nop_name__="LSBase64Decode",l.default=e}),98);
__d("LSMinosVerifySingleEpoch.nop",["cr:8434"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,r,o,a,i,l,s,u,c){return n("cr:8434")(t,r,o,a,i,l,s,u,c)};e.__nop_name__="LSMinosVerifySingleEpochCall",l.default=e}),98);
__d("WAHashStringToNumber",[],(function(t,n,r,o,a,i){"use strict";function e(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);t=(t<<5)-t+r,t|=0}return Math.abs(t)}i.hashStringToNumber=e}),66);
__d("LSQplAnnotateString.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u,c){try{var t,d=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),m=o("WAHashStringToNumber").hashStringToNumber(s);return r("QPLUserFlow").addAnnotations(d,{string:(t={},t[u]=c,t)},{instanceKey:m}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};s.__nop_name__="LSQplAnnotateString",l.default=s}),98);
__d("LSQplMarkEnd.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u){try{var t=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),c=o("WAHashStringToNumber").hashStringToNumber(s);return u?r("QPLUserFlow").endSuccess(t,{instanceKey:c}):r("QPLUserFlow").endFailure(t,"failure",{instanceKey:c}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};s.__nop_name__="LSQplMarkEnd",l.default=s}),98);
__d("LSQplMarkPoint.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u){try{var t=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),c=o("WAHashStringToNumber").hashStringToNumber(s);return r("QPLUserFlow").addPoint(t,u,{instanceKey:c}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};s.__nop_name__="LSQplMarkPoint",l.default=s}),98);
__d("LSQplStartTrace.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u,c){try{var t=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),d=o("WAHashStringToNumber").hashStringToNumber(s);return r("QPLUserFlow").start(t,{instanceKey:d}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};s.__nop_name__="LSQplStartTrace",l.default=s}),98);
__d("LSSetThreadImageURL",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({threadPictureUrl:e[1]===""?void 0:e[1],threadPictureUrlFallback:e[2],threadPictureUrlExpirationTimestampMs:e[3],isCustomThreadPicture:e[4],shouldRoundThreadPicture:e[5]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxSetThreadImageURLStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSWriteMinosPublicKey.nop",["cr:8435"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,r,o,a,i,l,s,u,c,d,m,p){return n("cr:8435")(t,r,o,a,i,l,s,u,c,d,m,p)};e.__nop_name__="LSWriteMinosPublicKeyCall",l.default=e}),98);
__d("LSDeleteThenInsertContact",["LSBase64Decode.nop","LSGetViewerFBID","LSMinosVerifySingleEpoch.nop","LSQplAnnotateString.nop","LSQplMarkEnd.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop","LSSetThreadImageURL","LSWriteMinosPublicKey.nop","gkx"],(function(t,n,r,o,a,i,l){function e(){var e=arguments,t=e[e.length-1],o=[],a=[];return t.sequence([function(a){return t.sequence([function(r){return e[50]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[50]).then(function(e){var t;return t=e,o[17]=t[0],t})},function(e){return o[0]=o[17]}]):t.resolve(o[0]=void 0)},function(r){return e[52]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[52]).then(function(e){var t;return t=e,o[17]=t[0],t})},function(e){return o[1]=o[17]}]):t.resolve(o[1]=void 0)},function(r){return e[53]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[53]).then(function(e){var t;return t=e,o[17]=t[0],t})},function(e){return o[2]=o[17]}]):t.resolve(o[2]=void 0)},function(r){return e[55]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[55]).then(function(e){var t;return t=e,o[17]=t[0],t})},function(e){return o[3]=o[17]}]):t.resolve(o[3]=void 0)},function(r){return e[56]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[56]).then(function(e){var t;return t=e,o[17]=t[0],t})},function(e){return o[4]=o[17]}]):t.resolve(o[4]=void 0)},function(r){return e[57]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[57]).then(function(e){var t;return t=e,o[17]=t[0],t})},function(e){return o[5]=o[17]}]):t.resolve(o[5]=void 0)},function(r){return e[58]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[58]).then(function(e){var t;return t=e,o[17]=t[0],t})},function(e){return o[6]=o[17]}]):t.resolve(o[6]=void 0)},function(a){var i,l,s;return o[16]="LSContactDeleteThenInsertContactStoredProcedure",r("gkx")("11690")&&r("gkx")("16269")?t.sequence([function(r){var a;return o[17]=t.i64.random(),o[27]=t.i64.to_string(o[17]),t.blobs.eq(o[2],void 0)&&t.blobs.eq(o[1],void 0)&&t.i64.eq(e[51],void 0)&&t.i64.eq(e[54],void 0)&&t.blobs.eq(o[3],void 0)&&t.blobs.eq(o[4],void 0)&&t.blobs.eq(o[5],void 0)&&t.blobs.eq(o[0],void 0)?t.resolve((a=[o[0],o[2],o[1],e[51],e[54],o[3],o[4],o[5],o[6]],o[18]=a[0],o[19]=a[1],o[20]=a[2],o[21]=a[3],o[22]=a[4],o[23]=a[5],o[24]=a[6],o[25]=a[7],o[26]=a[8],a)):t.sequence([function(e){return o[27]!==void 0?t.nativeOperation(n("LSQplStartTrace.nop"),t.i64.cast([0,1021650676]),o[27],!0,void 0):t.resolve()},function(e){return o[27]!==void 0&&o[16]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[27],"source_for_validation",o[16]):t.resolve()},function(r){return t.blobs.neq(o[2],void 0)?t.sequence([function(r){return t.blobs.neq(o[4],void 0)?t.sequence([function(r){return t.blobs.neq(o[3],void 0)?t.sequence([function(r){return t.blobs.neq(o[0],void 0)?t.sequence([function(r){return t.blobs.neq(o[5],void 0)?t.sequence([function(r){return t.nativeOperation(n("LSMinosVerifySingleEpoch.nop"),o[2],e[0],o[3],o[0],o[4],o[6],o[5]).then(function(e){var t;return t=e,o[42]=t[0],t})},function(r){return o[42]?t.sequence([function(e){return o[27]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,1021650676]),o[27],"native_op_success"):t.resolve()},function(e){return o[27]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,1021650676]),o[27],!0):t.resolve()}]):t.sequence([function(r){return o[43]=["MinosPublicKeyClientUtils",".",["Key verification failed for contact id: ","",t.i64.to_string(e[0])].join("")].join(""),o[27]!==void 0&&o[43]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[27],"error",o[43]):t.resolve()},function(e){return o[27]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,1021650676]),o[27],!1):t.resolve()}])},function(e){return o[41]=o[42]}]):t.sequence([function(e){return o[42]=["MinosPublicKeyClientUtils",".","Missing or Null Epoch Signature Self"].join(""),o[27]!==void 0&&o[42]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[27],"error",o[42]):t.resolve()},function(e){return o[27]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,1021650676]),o[27],!1):t.resolve()},function(e){return o[41]=!1}])},function(e){return o[40]=o[41]}]):t.sequence([function(e){return o[41]=["MinosPublicKeyClientUtils",".","Missing or Null Minos Encryption Public Key"].join(""),o[27]!==void 0&&o[41]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[27],"error",o[41]):t.resolve()},function(e){return o[27]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,1021650676]),o[27],!1):t.resolve()},function(e){return o[40]=!1}])},function(e){return o[39]=o[40]}]):t.sequence([function(e){return o[40]=["MinosPublicKeyClientUtils",".","Missing or Null Minos Signing Public Key"].join(""),o[27]!==void 0&&o[40]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[27],"error",o[40]):t.resolve()},function(e){return o[27]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,1021650676]),o[27],!1):t.resolve()},function(e){return o[39]=!1}])},function(e){return o[38]=o[39]}]):t.sequence([function(e){return o[39]=["MinosPublicKeyClientUtils",".","Missing or Null Minos Auth Public Key"].join(""),o[27]!==void 0&&o[39]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[27],"error",o[39]):t.resolve()},function(e){return o[27]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,1021650676]),o[27],!1):t.resolve()},function(e){return o[38]=!1}])},function(e){return o[28]=o[38]}]):t.sequence([function(e){return o[38]=["MinosPublicKeyClientUtils",".","Missing or Null Minos Epoch Anon ID"].join(""),o[27]!==void 0&&o[38]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[27],"error",o[38]):t.resolve()},function(e){return o[27]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,1021650676]),o[27],!1):t.resolve()},function(e){return o[28]=!1}])},function(n){var r,a,i,l,s;return o[28]?(r=[o[0],o[2],o[1],e[51],e[54],o[3],o[4],o[5],o[6]],o[29]=r[0],o[30]=r[1],o[31]=r[2],o[32]=r[3],o[33]=r[4],o[34]=r[5],o[35]=r[6],o[36]=r[7],o[37]=r[8]):(o[38]=t.createArray(),o[51]=(o[38].push(e[0]),o[38]),o[39]=new t.Map,o[40]=o[39].get(e[0]),o[40]?o[41]=!1:o[41]=!0,o[41]?(i=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],o[42]=i[0],o[43]=i[1],o[44]=i[2],o[45]=i[3],o[46]=i[4],o[47]=i[5],o[48]=i[6],o[49]=i[7],o[50]=i[8]):(o[51]=o[40].get("mailbox_encryption_public_key"),o[52]=o[40].get("epoch_anon_id"),o[53]=o[40].get("epoch_head"),o[54]=o[40].get("epoch_head_creation_time"),o[55]=o[40].get("minos_mailbox_public_keys_fbid"),a=[o[51],o[52],o[53],o[54],o[55],void 0,void 0,void 0,void 0],o[42]=a[0],o[43]=a[1],o[44]=a[2],o[45]=a[3],o[46]=a[4],o[47]=a[5],o[48]=a[6],o[49]=a[7],o[50]=a[8]),l=[o[42],o[43],o[44],o[45],o[46],o[47],o[48],o[49],o[50]],o[29]=l[0],o[30]=l[1],o[31]=l[2],o[32]=l[3],o[33]=l[4],o[34]=l[5],o[35]=l[6],o[36]=l[7],o[37]=l[8]),s=[o[29],o[30],o[31],o[32],o[33],o[34],o[35],o[36],o[37]],o[18]=s[0],o[19]=s[1],o[20]=s[2],o[21]=s[3],o[22]=s[4],o[23]=s[5],o[24]=s[6],o[25]=s[7],o[26]=s[8]}])},function(e){var t;return t=[o[18],o[19],o[20],o[21],o[22],o[23],o[24],o[25],o[26]],o[7]=t[0],o[8]=t[1],o[9]=t[2],o[10]=t[3],o[11]=t[4],o[12]=t[5],o[13]=t[6],o[14]=t[7],o[15]=t[8],t}]):t.resolve((o[17]=t.createArray(),o[30]=(o[17].push(e[0]),o[17]),o[18]=new t.Map,o[19]=o[18].get(e[0]),o[19]?o[20]=!1:o[20]=!0,o[20]?(l=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],o[21]=l[0],o[22]=l[1],o[23]=l[2],o[24]=l[3],o[25]=l[4],o[26]=l[5],o[27]=l[6],o[28]=l[7],o[29]=l[8]):(o[30]=o[19].get("mailbox_encryption_public_key"),o[31]=o[19].get("epoch_anon_id"),o[32]=o[19].get("epoch_head"),o[33]=o[19].get("epoch_head_creation_time"),o[34]=o[19].get("minos_mailbox_public_keys_fbid"),i=[o[30],o[31],o[32],o[33],o[34],void 0,void 0,void 0,void 0],o[21]=i[0],o[22]=i[1],o[23]=i[2],o[24]=i[3],o[25]=i[4],o[26]=i[5],o[27]=i[6],o[28]=i[7],o[29]=i[8]),s=[o[21],o[22],o[23],o[24],o[25],o[26],o[27],o[28],o[29]],o[7]=s[0],o[8]=s[1],o[9]=s[2],o[10]=s[3],o[11]=s[4],o[12]=s[5],o[13]=s[6],o[14]=s[7],o[15]=s[8]))},function(a){return r("gkx")("20879")&&r("gkx")("16269"),r("gkx")("11690")&&r("gkx")("16269")?t.nativeOperation(n("LSWriteMinosPublicKey.nop"),e[0],o[8],o[10],o[7],o[9],o[11],o[14],o[13],o[12],o[15]):t.resolve()},function(r){return t.sequence([function(r){return t.db.table(53).fetch([[[e[0]]],"optimistic"]).next().then(function(e,r){var a=e.done,i=e.value;return a?o[17]=t.i64.cast([0,0]):(r=i.item,t.sequence([function(e){return t.sortBy(t.filter(t.db.table(54).fetch(),function(e){return t.i64.eq(e.bucketId,r.bucketId)}),[["timestampMs","DESC"]]).next().then(function(e,r){var a=e.done,i=e.value;return a?o[19]=t.i64.cast([0,0]):(r=i.item,t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,o[21]=t[0],t})},function(e){return t.db.table(55).fetch([[[r.storyId,o[21],t.i64.cast([0,1])]]]).next().then(function(e,n){var r=e.done,a=e.value;return r?(o[24]=t.i64.cast([0,1]),o[22]=o[24]):(n=a.item,o[24]=t.i64.cast([0,2]),o[22]=o[24])})},function(e){return o[19]=o[22]}]))})},function(e){return o[17]=o[19]}]))})},function(n){return t.filter(t.db.table(7).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.id,e[0])&&t.i64.eq(t.i64.cast([0,1]),t.i64.cast([0,1]))&&t.i64.gt(n.authorityLevel,e[21])}).next().then(function(n){var r=n.done,a=n.value;return r?t.db.table(7).put({id:e[0],profilePictureUrl:e[2],profilePictureFallbackUrl:e[3],profilePictureUrlExpirationTimestampMs:e[4],profilePictureLargeUrl:e[5],profilePictureLargeFallbackUrl:e[6],profilePictureLargeUrlExpirationTimestampMs:e[7],name:e[9],secondaryName:e[41],normalizedNameForSearch:e[10],normalizedSearchTerms:e[33],isMessengerUser:e[11],isMemorialized:e[12],isManagedByViewer:e[35],blockedByViewerStatus:e[14],rank:e[17],firstName:e[18],contactType:e[19],contactTypeExact:e[20],authorityLevel:e[21],messengerCallLogThirdPartyId:e[22],profileRingColor:e[23],requiresMultiway:e[24],blockedSinceTimestampMs:e[25],fbUnblockedSinceTimestampMs:e[48],canViewerMessage:e[26],profileRingColorExpirationTimestampMs:e[27],phoneNumber:e[28],emailAddress:e[29],workCompanyId:e[30],workCompanyName:e[31],workJobTitle:e[32],deviceContactId:e[34],workForeignEntityType:e[36],capabilities:e[37],capabilities2:e[38],profileRingState:o[17],contactViewerRelationship:e[39],gender:e[40],username:e[43],contactReachabilityStatusType:e[44],friendshipStatus:e[45],restrictionType:e[46],waConnectStatus:e[47],isEmployee:!1,pageType:e[49]}):0})}])},function(r){return t.storedProcedure(n("LSSetThreadImageURL"),e[0],e[2],e[3],e[4],!1,!0)}])},function(e){return t.resolve(a)}])}e.__sproc_name__="LSContactDeleteThenInsertContactStoredProcedure",e.__tables__=["story_buckets","stories","story_viewers","contacts"];var s=e;l.default=s}),98);
__d("LSDeleteThenInsertMessageRequest",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(34).put({threadKey:e[0],messageRequestStatus:e[2]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteThenInsertMessageRequestStoredProcedure",e.__tables__=["message_requests"],a.exports=e}),null);
__d("LSDeleteThenInsertNotificationsSettingsGraphQLSnapshot",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(175).put({id:e[0],globalMuteUntil:e[1],showMessagePreview:e[4],isSoundOn:e[7],groupNotificationSetting:e[8],oneToOneNotificationSetting:e[9],replyReminderSetting:e[10],messageReminderDisabled:e[12],messageSound:e[13],ringtoneSound:e[14],newFriendBumpDisabledSetting:e[15],globalMuteMessageUntil:e[2],globalMuteCallUntil:e[3],includeInSwitchAccountBadges:e[11],dismissNfbThreadsCount:e[16],mutePageAccountMessageReminder:e[17]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsDeleteThenInsertNotificationsSettingsGraphQLSnapshotStoredProcedure",e.__tables__=["notification_settings"],a.exports=e}),null);
__d("LSDeleteThenInsertThread",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.db.table(9).fetch([[[e[7]]]]).next().then(function(r,o){var a,i,l=r.done,s=r.value;return l?t.db.table(9).put({threadKey:e[7],lastReadWatermarkTimestampMs:e[1],authorityLevel:e[6],mailboxType:e[8],threadType:e[9],folderName:e[10],ongoingCallState:e[29],parentThreadKey:e[35],lastActivityTimestampMs:e[0],snippet:e[2],threadName:e[3],threadPictureUrl:e[4],needsAdminApprovalForNewParticipant:e[5],threadPictureUrlFallback:e[11],threadPictureUrlExpirationTimestampMs:e[12],removeWatermarkTimestampMs:e[13],muteExpireTimeMs:e[14],muteCallsExpireTimeMs:e[15],groupNotificationSettings:e[16],isAdminSnippet:e[17],snippetSenderContactId:e[18],snippetText:e[20],snippetStringHash:e[21],snippetStringArgument1:e[22],snippetAttribution:e[23],snippetAttributionStringHash:e[24],disappearingSettingTtl:e[25],disappearingSettingUpdatedTs:e[26],disappearingSettingUpdatedBy:e[27],cannotReplyReason:e[30],customEmoji:e[31],customEmojiImageUrl:e[32],outgoingBubbleColor:e[33],themeFbid:e[34],nullstateDescriptionText1:e[36],nullstateDescriptionType1:e[37],nullstateDescriptionText2:e[38],nullstateDescriptionType2:e[39],nullstateDescriptionText3:e[40],nullstateDescriptionType3:e[41],snippetHasEmoji:e[42],hasPersistentMenu:e[43],disableComposerInput:e[44],cannotUnsendReason:e[45],viewedPluginKey:e[46],viewedPluginContext:e[47],clientThreadKey:e[48],capabilities:e[49],shouldRoundThreadPicture:e[50],proactiveWarningDismissTime:e[51],isCustomThreadPicture:e[52],otidOfFirstMessage:e[53],normalizedSearchTerms:e[54],additionalThreadContext:e[55],disappearingThreadKey:e[56],isDisappearingMode:e[57],disappearingModeInitiator:e[58],unreadDisappearingMessageCount:e[59],lastMessageCtaId:e[61],lastMessageCtaType:e[62],consistentThreadFbid:e[63],threadDescription:e[64],unsendLimitMs:e[65],syncGroup:e[66],threadInvitesEnabled:e[67],threadInviteLink:e[68],numUnreadSubthreads:e[69],subthreadCount:e[70],threadInvitesEnabledV2:e[71],joinRequestApprovalSetting:e[72],pendingJoinRequestsCount:e[73],eventStartTimestampMs:e[74],eventEndTimestampMs:e[75],takedownState:e[76],memberCount:e[77],admodCount:e[78],secondaryParentThreadKey:e[79],igFolder:e[80],inviterId:e[81],threadTags:e[82],readReceiptsDisabledV2:e[83],threadStatus:e[84],threadSubtype:e[85],pauseThreadTimestamp:e[86],metadata:e[87],syncSource:e[88]}):(o=s.item,n[1]=o.lastActivityTimestampMs,n[3]=o.parentThreadKey,n[2]=o.disappearingThreadKey,n[4]=o.isDisappearingMode,t.i64.le(o.authorityLevel,e[6])?t.i64.gt(n[1],e[0])&&t.i64.neq(n[2],void 0)?(t.i64.eq(e[35],t.i64.cast([-1,4294967286]))&&t.i64.eq(n[3],t.i64.cast([0,0]))?(a=[n[3],o.folderName],n[5]=a[0],n[6]=a[1]):(i=[e[35],e[10]],n[5]=i[0],n[6]=i[1]),t.db.table(9).put({threadKey:e[7],lastReadWatermarkTimestampMs:o.lastReadWatermarkTimestampMs,authorityLevel:e[6],mailboxType:e[8],threadType:e[9],folderName:n[6],ongoingCallState:e[29],parentThreadKey:n[5],lastActivityTimestampMs:n[1],snippet:e[2],threadName:e[3],threadPictureUrl:e[4],needsAdminApprovalForNewParticipant:e[5],threadPictureUrlFallback:e[11],threadPictureUrlExpirationTimestampMs:e[12],removeWatermarkTimestampMs:e[13],muteExpireTimeMs:e[14],muteCallsExpireTimeMs:e[15],groupNotificationSettings:e[16],isAdminSnippet:e[17],snippetSenderContactId:e[18],snippetText:e[20],snippetStringHash:e[21],snippetStringArgument1:e[22],snippetAttribution:e[23],snippetAttributionStringHash:e[24],disappearingSettingTtl:e[25],disappearingSettingUpdatedTs:e[26],disappearingSettingUpdatedBy:e[27],cannotReplyReason:e[30],customEmoji:e[31],customEmojiImageUrl:e[32],outgoingBubbleColor:e[33],themeFbid:e[34],nullstateDescriptionText1:e[36],nullstateDescriptionType1:e[37],nullstateDescriptionText2:e[38],nullstateDescriptionType2:e[39],nullstateDescriptionText3:e[40],nullstateDescriptionType3:e[41],snippetHasEmoji:e[42],hasPersistentMenu:e[43],disableComposerInput:e[44],cannotUnsendReason:e[45],viewedPluginKey:e[46],viewedPluginContext:e[47],clientThreadKey:e[48],capabilities:e[49],shouldRoundThreadPicture:e[50],proactiveWarningDismissTime:e[51],isCustomThreadPicture:e[52],otidOfFirstMessage:e[53],normalizedSearchTerms:e[54],additionalThreadContext:e[55],disappearingThreadKey:n[2],isDisappearingMode:n[4],disappearingModeInitiator:e[58],unreadDisappearingMessageCount:e[59],lastMessageCtaId:e[61],lastMessageCtaType:e[62],consistentThreadFbid:e[63],threadDescription:e[64],unsendLimitMs:e[65],syncGroup:e[66],threadInvitesEnabled:e[67],threadInviteLink:e[68],numUnreadSubthreads:e[69],subthreadCount:e[70],threadInvitesEnabledV2:e[71],joinRequestApprovalSetting:e[72],pendingJoinRequestsCount:e[73],eventStartTimestampMs:e[74],eventEndTimestampMs:e[75],takedownState:e[76],memberCount:e[77],admodCount:e[78],secondaryParentThreadKey:e[79],igFolder:e[80],inviterId:e[81],threadTags:e[82],readReceiptsDisabledV2:e[83],threadStatus:e[84],threadSubtype:e[85],pauseThreadTimestamp:e[86],metadata:e[87],syncSource:e[88]})):t.db.table(9).put({threadKey:e[7],lastReadWatermarkTimestampMs:e[1],authorityLevel:e[6],mailboxType:e[8],threadType:e[9],folderName:e[10],ongoingCallState:e[29],parentThreadKey:e[35],lastActivityTimestampMs:e[0],snippet:e[2],threadName:e[3],threadPictureUrl:e[4],needsAdminApprovalForNewParticipant:e[5],threadPictureUrlFallback:e[11],threadPictureUrlExpirationTimestampMs:e[12],removeWatermarkTimestampMs:e[13],muteExpireTimeMs:e[14],muteCallsExpireTimeMs:e[15],groupNotificationSettings:e[16],isAdminSnippet:e[17],snippetSenderContactId:e[18],snippetText:e[20],snippetStringHash:e[21],snippetStringArgument1:e[22],snippetAttribution:e[23],snippetAttributionStringHash:e[24],disappearingSettingTtl:e[25],disappearingSettingUpdatedTs:e[26],disappearingSettingUpdatedBy:e[27],cannotReplyReason:e[30],customEmoji:e[31],customEmojiImageUrl:e[32],outgoingBubbleColor:e[33],themeFbid:e[34],nullstateDescriptionText1:e[36],nullstateDescriptionType1:e[37],nullstateDescriptionText2:e[38],nullstateDescriptionType2:e[39],nullstateDescriptionText3:e[40],nullstateDescriptionType3:e[41],snippetHasEmoji:e[42],hasPersistentMenu:e[43],disableComposerInput:e[44],cannotUnsendReason:e[45],viewedPluginKey:e[46],viewedPluginContext:e[47],clientThreadKey:e[48],capabilities:e[49],shouldRoundThreadPicture:e[50],proactiveWarningDismissTime:e[51],isCustomThreadPicture:e[52],otidOfFirstMessage:e[53],normalizedSearchTerms:e[54],additionalThreadContext:e[55],disappearingThreadKey:n[2],isDisappearingMode:n[4],disappearingModeInitiator:e[58],unreadDisappearingMessageCount:e[59],lastMessageCtaId:e[61],lastMessageCtaType:e[62],consistentThreadFbid:e[63],threadDescription:e[64],unsendLimitMs:e[65],syncGroup:e[66],threadInvitesEnabled:e[67],threadInviteLink:e[68],numUnreadSubthreads:e[69],subthreadCount:e[70],threadInvitesEnabledV2:e[71],joinRequestApprovalSetting:e[72],pendingJoinRequestsCount:e[73],eventStartTimestampMs:e[74],eventEndTimestampMs:e[75],takedownState:e[76],memberCount:e[77],admodCount:e[78],secondaryParentThreadKey:e[79],igFolder:e[80],inviterId:e[81],threadTags:e[82],readReceiptsDisabledV2:e[83],threadStatus:e[84],threadSubtype:e[85],pauseThreadTimestamp:e[86],metadata:e[87],syncSource:e[88]}):t.resolve())})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteThenInsertThreadStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSGroupRoomTruncate",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.forEach(t.filter(t.db.table(63).fetch(),function(e){return t.i64.neq(e.groupRoomType,void 0)&&t.i64.neq(e.groupRoomType,t.i64.cast([0,5]))}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSStoriesGroupRoomTruncateStoredProcedure",e.__tables__=["rooms"],a.exports=e}),null);
__d("LSDeleteThenInsertCommunityFolder",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.filter(t.db.table(162).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.folderId,e[0])&&t.i64.gt(t.i64.cast([0,80]),e[54])}).next().then(function(n){var r=n.done,o=n.value;return r?t.db.table(162).put({folderId:e[0],fbGroupId:e[1],name:e[2],memberCount:e[4],description:e[3],pictureUrl:e[5],pictureUrlFallback:e[6],pictureUrlExpirationTimestampMs:e[7],joiningChannelTaskId:e[8],afterJoiningOpenChannelId:e[10],capabilities:e[11],capabilities2:e[12],capabilities3:e[13],notificationSetting:e[14],notificationMutedUntil:e[15],sendsBlockedUntil:e[17],isHidden:e[18],hasSeenDisablingAlert:e[19],inviteLink:e[21],communityType:e[22],directInviteLink:e[23],enableState:e[24],takedownState:e[25],fbGroupType:e[28],threadCount:e[29],disableTimestamp:e[32],readTimestampMs:e[33],inviteStatus:e[37],blockedFromCommunityMemberCount:e[40],categoryCount:e[41],snippetText:e[42],coverPicUrl:e[43],coverPicUrlFallback:e[44],coverPicUrlExpirationTimestampMs:e[45],invitedThreadId:e[47],fbGroupUserParticipationApprovalStatus:e[48],ccAdminAssistRegistrationStatus:e[49],pauseStatus:e[50],isMember:e[51],latestThreadId:e[52],latestThreadActivityTimestampMs:e[53]}):0})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteThenInsertCommunityFolderStoredProcedure",e.__tables__=["community_folders"],a.exports=e}),null);
__d("LSUpdateOrInsertThread",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.db.table(9).fetch([[[e[7]]]]).next().then(function(r,o){var a,i,l=r.done,s=r.value;return l?t.db.table(9).add({threadKey:e[7],lastReadWatermarkTimestampMs:e[1],authorityLevel:e[6],mailboxType:e[8],threadType:e[9],folderName:e[10],ongoingCallState:e[32],parentThreadKey:e[38],lastActivityTimestampMs:e[0],snippet:e[2],threadName:e[3],threadPictureUrl:e[4],needsAdminApprovalForNewParticipant:e[5],threadPictureUrlFallback:e[11],threadPictureUrlExpirationTimestampMs:e[12],removeWatermarkTimestampMs:e[13],muteExpireTimeMs:e[14],muteMentionExpireTimeMs:e[15],muteCallsExpireTimeMs:e[16],groupNotificationSettings:e[19],isAdminSnippet:e[20],snippetSenderContactId:e[21],snippetText:e[23],snippetStringHash:e[24],snippetStringArgument1:e[25],snippetAttribution:e[26],snippetAttributionStringHash:e[27],disappearingSettingTtl:e[28],disappearingSettingUpdatedTs:e[29],disappearingSettingUpdatedBy:e[30],cannotReplyReason:e[33],customEmoji:e[34],customEmojiImageUrl:e[35],outgoingBubbleColor:e[36],themeFbid:e[37],nullstateDescriptionText1:e[39],nullstateDescriptionType1:e[40],nullstateDescriptionText2:e[41],nullstateDescriptionType2:e[42],nullstateDescriptionText3:e[43],nullstateDescriptionType3:e[44],snippetHasEmoji:e[45],hasPersistentMenu:e[46],disableComposerInput:e[47],cannotUnsendReason:e[48],viewedPluginKey:e[49],viewedPluginContext:e[50],clientThreadKey:e[51],capabilities:e[52],shouldRoundThreadPicture:e[53],proactiveWarningDismissTime:e[54],isCustomThreadPicture:e[55],otidOfFirstMessage:e[56],normalizedSearchTerms:e[57],additionalThreadContext:e[58],disappearingThreadKey:e[59],isDisappearingMode:e[60],disappearingModeInitiator:e[61],unreadDisappearingMessageCount:e[62],lastMessageCtaId:e[64],lastMessageCtaType:e[65],lastMessageCtaTimestampMs:e[66],consistentThreadFbid:e[67],threadDescription:e[69],unsendLimitMs:e[70],capabilities2:e[78],capabilities3:e[79],syncGroup:e[82],threadInvitesEnabled:e[83],threadInviteLink:e[84],isAllUnreadMessageMissedCallXma:e[85],numUnreadSubthreads:e[86],subthreadCount:e[87],lastNonMissedCallXmaMessageTimestampMs:e[88],isHidden:e[89],threadInvitesEnabledV2:e[90],joinRequestApprovalSetting:e[93],hasPendingInvitation:e[94],eventStartTimestampMs:e[95],eventEndTimestampMs:e[96],takedownState:e[97],secondaryParentThreadKey:e[98],igFolder:e[99],inviterId:e[100],threadTags:e[101],isReadReceiptsDisabled:e[102],readReceiptsDisabledV2:e[103],threadStatus:e[104],threadSubtype:e[105],pauseThreadTimestamp:e[106],metadata:e[107],capabilities4:e[108],syncSource:e[109],capabilities5:e[110],ongoingCallTimestampMs:e[111]}):(o=s.item,n[1]=o.lastActivityTimestampMs,n[3]=o.parentThreadKey,n[2]=o.disappearingThreadKey,n[4]=o.isDisappearingMode,t.i64.le(o.authorityLevel,e[6])?t.i64.gt(n[1],e[0])&&t.i64.neq(n[2],void 0)?(t.i64.eq(e[38],t.i64.cast([-1,4294967286]))&&t.i64.eq(n[3],t.i64.cast([0,0]))?(a=[n[3],o.folderName],n[5]=a[0],n[6]=a[1]):(i=[e[38],e[10]],n[5]=i[0],n[6]=i[1]),t.forEach(t.db.table(9).fetch([[[e[7]]]]),function(t){var r=t.update,a=t.item;return r({lastReadWatermarkTimestampMs:o.lastReadWatermarkTimestampMs,authorityLevel:e[6],mailboxType:e[8],threadType:e[9],folderName:n[6],ongoingCallState:e[32],parentThreadKey:n[5],lastActivityTimestampMs:n[1],snippet:e[2],threadName:e[3],threadPictureUrl:e[4],needsAdminApprovalForNewParticipant:e[5],threadPictureUrlFallback:e[11],threadPictureUrlExpirationTimestampMs:e[12],removeWatermarkTimestampMs:e[13],muteExpireTimeMs:e[14],muteMentionExpireTimeMs:e[15],muteCallsExpireTimeMs:e[16],groupNotificationSettings:e[19],isAdminSnippet:e[20],snippetSenderContactId:e[21],snippetText:e[23],snippetStringHash:e[24],snippetStringArgument1:e[25],snippetAttribution:e[26],snippetAttributionStringHash:e[27],disappearingSettingTtl:e[28],disappearingSettingUpdatedTs:e[29],disappearingSettingUpdatedBy:e[30],cannotReplyReason:e[33],customEmoji:e[34],customEmojiImageUrl:e[35],outgoingBubbleColor:e[36],themeFbid:e[37],nullstateDescriptionText1:e[39],nullstateDescriptionType1:e[40],nullstateDescriptionText2:e[41],nullstateDescriptionType2:e[42],nullstateDescriptionText3:e[43],nullstateDescriptionType3:e[44],snippetHasEmoji:e[45],hasPersistentMenu:e[46],disableComposerInput:e[47],cannotUnsendReason:e[48],viewedPluginKey:e[49],viewedPluginContext:e[50],clientThreadKey:e[51],capabilities:e[52],shouldRoundThreadPicture:e[53],proactiveWarningDismissTime:e[54],isCustomThreadPicture:e[55],otidOfFirstMessage:e[56],normalizedSearchTerms:e[57],additionalThreadContext:e[58],disappearingThreadKey:n[2],isDisappearingMode:n[4],disappearingModeInitiator:e[61],unreadDisappearingMessageCount:e[62],lastMessageCtaId:e[64],lastMessageCtaType:e[65],lastMessageCtaTimestampMs:e[66],consistentThreadFbid:e[67],threadDescription:e[69],unsendLimitMs:e[70],capabilities2:e[78],capabilities3:e[79],syncGroup:e[82],threadInvitesEnabled:e[83],threadInviteLink:e[84],isAllUnreadMessageMissedCallXma:e[85],numUnreadSubthreads:e[86],subthreadCount:e[87],lastNonMissedCallXmaMessageTimestampMs:e[88],isHidden:e[89],threadInvitesEnabledV2:e[90],joinRequestApprovalSetting:e[93],hasPendingInvitation:e[94],eventStartTimestampMs:e[95],eventEndTimestampMs:e[96],takedownState:e[97],secondaryParentThreadKey:e[98],igFolder:e[99],inviterId:e[100],threadTags:e[101],isReadReceiptsDisabled:e[102],readReceiptsDisabledV2:e[103],threadStatus:e[104],threadSubtype:e[105],pauseThreadTimestamp:e[106],metadata:e[107],capabilities4:e[108],syncSource:e[109],capabilities5:e[110],ongoingCallTimestampMs:e[111],avatarStickerInstructionKeyId:void 0,avatarStickerId:void 0,avatarStickerThumbnailImageUrl:void 0,avatarStickerThumbnailImageMimeType:void 0,avatarStickerOriginalImageUrl:void 0,avatarStickerOriginalImageMimeType:void 0,draftMessage:void 0,hasPendingJoinRequest:void 0,pendingJoinRequestsCount:void 0,memberCount:void 0,admodCount:void 0,ctmAdId:void 0,ctmAdgroupId:void 0,ctmAdCampaignId:void 0,ctmAdCampaignGroupId:void 0,ctmAdAccountId:void 0,typingIndicatorDisabled:void 0})})):t.forEach(t.db.table(9).fetch([[[e[7]]]]),function(t){var r=t.update,o=t.item;return r({lastReadWatermarkTimestampMs:e[1],authorityLevel:e[6],mailboxType:e[8],threadType:e[9],folderName:e[10],ongoingCallState:e[32],parentThreadKey:e[38],lastActivityTimestampMs:e[0],snippet:e[2],threadName:e[3],threadPictureUrl:e[4],needsAdminApprovalForNewParticipant:e[5],threadPictureUrlFallback:e[11],threadPictureUrlExpirationTimestampMs:e[12],removeWatermarkTimestampMs:e[13],muteExpireTimeMs:e[14],muteMentionExpireTimeMs:e[15],muteCallsExpireTimeMs:e[16],groupNotificationSettings:e[19],isAdminSnippet:e[20],snippetSenderContactId:e[21],snippetText:e[23],snippetStringHash:e[24],snippetStringArgument1:e[25],snippetAttribution:e[26],snippetAttributionStringHash:e[27],disappearingSettingTtl:e[28],disappearingSettingUpdatedTs:e[29],disappearingSettingUpdatedBy:e[30],cannotReplyReason:e[33],customEmoji:e[34],customEmojiImageUrl:e[35],outgoingBubbleColor:e[36],themeFbid:e[37],nullstateDescriptionText1:e[39],nullstateDescriptionType1:e[40],nullstateDescriptionText2:e[41],nullstateDescriptionType2:e[42],nullstateDescriptionText3:e[43],nullstateDescriptionType3:e[44],snippetHasEmoji:e[45],hasPersistentMenu:e[46],disableComposerInput:e[47],cannotUnsendReason:e[48],viewedPluginKey:e[49],viewedPluginContext:e[50],clientThreadKey:e[51],capabilities:e[52],shouldRoundThreadPicture:e[53],proactiveWarningDismissTime:e[54],isCustomThreadPicture:e[55],otidOfFirstMessage:e[56],normalizedSearchTerms:e[57],additionalThreadContext:e[58],disappearingThreadKey:n[2],isDisappearingMode:n[4],disappearingModeInitiator:e[61],unreadDisappearingMessageCount:e[62],lastMessageCtaId:e[64],lastMessageCtaType:e[65],lastMessageCtaTimestampMs:e[66],consistentThreadFbid:e[67],threadDescription:e[69],unsendLimitMs:e[70],capabilities2:e[78],capabilities3:e[79],syncGroup:e[82],threadInvitesEnabled:e[83],threadInviteLink:e[84],isAllUnreadMessageMissedCallXma:e[85],numUnreadSubthreads:e[86],subthreadCount:e[87],lastNonMissedCallXmaMessageTimestampMs:e[88],isHidden:e[89],threadInvitesEnabledV2:e[90],joinRequestApprovalSetting:e[93],hasPendingInvitation:e[94],eventStartTimestampMs:e[95],eventEndTimestampMs:e[96],takedownState:e[97],secondaryParentThreadKey:e[98],igFolder:e[99],inviterId:e[100],threadTags:e[101],isReadReceiptsDisabled:e[102],readReceiptsDisabledV2:e[103],threadStatus:e[104],threadSubtype:e[105],pauseThreadTimestamp:e[106],metadata:e[107],capabilities4:e[108],syncSource:e[109],capabilities5:e[110],ongoingCallTimestampMs:e[111],avatarStickerInstructionKeyId:void 0,avatarStickerId:void 0,avatarStickerThumbnailImageUrl:void 0,avatarStickerThumbnailImageMimeType:void 0,avatarStickerOriginalImageUrl:void 0,avatarStickerOriginalImageMimeType:void 0,draftMessage:void 0,hasPendingJoinRequest:void 0,pendingJoinRequestsCount:void 0,memberCount:void 0,admodCount:void 0,ctmAdId:void 0,ctmAdgroupId:void 0,ctmAdCampaignId:void 0,ctmAdCampaignGroupId:void 0,ctmAdAccountId:void 0,typingIndicatorDisabled:void 0})}):t.resolve())})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateOrInsertThreadStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSPopulateCommunityFolderData",["LSDeleteThenInsertCommunityFolder","LSUpdateOrInsertThread"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(r){return t.sequence([function(r){return t.storedProcedure(n("LSDeleteThenInsertCommunityFolder"),e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],void 0,void 0,void 0,e[11],e[12],e[13],e[14],e[15],void 0,e[16],e[17],e[18],void 0,e[19],e[20],e[21],e[22],e[23],void 0,void 0,e[24],e[26],void 0,void 0,e[25],e[37],void 0,void 0,t.i64.cast([0,0]),e[29],void 0,t.i64.cast([0,1]),e[28],e[27],e[30],e[31],e[32],e[33],void 0,e[34],e[35],e[36],e[38],e[39],void 0,void 0,t.i64.cast([0,80]))},function(r){return t.storedProcedure(n("LSUpdateOrInsertThread"),e[8],e[9],e[10],e[2],e[5],void 0,t.i64.cast([0,80]),e[0],t.i64.cast([0,0]),t.i64.cast([0,17]),"community",e[6],e[7],t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,!1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,t.i64.cast([-1,4294967282]),void 0,void 0,void 0,void 0,void 0,void 0,!1,!1,!1,void 0,void 0,void 0,void 0,t.i64.cast([0,0]),void 0,void 0,!1,void 0,void 0,void 0,void 0,!1,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,void 0,t.i64.cast([0,0]),void 0,!1,void 0,void 0,void 0,!1,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,e[40],void 0,void 0,void 0,!1,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),void 0)}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxPopulateCommunityFolderDataStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSRemoveTask",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(r,o){var a=r.done,i=r.value;return a?0:(o=i.item,t.forEach(t.db.table(2).fetch([[[o.queueName,{lte:e[0]}]],"queueNameTaskId"]),function(e){var r=e.item;return t.sequence([function(e){return n[0]=r.taskDispatchPriority,t.forEach(t.filter(t.db.table(2).fetch([[[r.taskId]]]),function(e){return t.i64.eq(e.taskId,r.taskId)&&e.queueName===r.queueName}),function(e){return e.delete()})},function(e){return t.i64.eq(n[0],t.i64.cast([0,1e3]))||t.i64.eq(n[0],t.i64.cast([0,2e3]))?n[1]=t.i64.cast([0,734739218]):n[1]=t.i64.cast([0,734737036])}])}))})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreRemoveTaskStoredProcedure",e.__tables__=["pending_tasks"],a.exports=e}),null);
__d("LSRoomTruncate",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.forEach(t.filter(t.db.table(63).fetch(),function(e){return t.i64.eq(e.groupRoomType,void 0)||t.i64.eq(e.groupRoomType,t.i64.cast([0,5]))}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSStoriesRoomTruncateStoredProcedure",e.__tables__=["rooms"],a.exports=e}),null);
__d("LSSetRegionHint",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(1).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({regionHint:e[1]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreSetRegionHintStoredProcedure",e.__tables__=["sync_groups"],a.exports=e}),null);
__d("LSTaskExists",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(e,t){var r=e.done,o=e.value;return r?n[0]=!1:(t=o.item,n[0]=!0)})},function(e){return r[0]=n[0]}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreTaskExistsStoredProcedure",e.__tables__=["pending_tasks"],a.exports=e}),null);
__d("LSTruncateCommunityListTable",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.forEach(t.db.table(166).fetch(),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsTruncateCommunityListTableStoredProcedure",e.__tables__=["cm_community_list"],a.exports=e}),null);
__d("LSTruncateNotificationSettings",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.forEach(t.db.table(175).fetch(),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsTruncateNotificationSettingsStoredProcedure",e.__tables__=["notification_settings"],a.exports=e}),null);
__d("LSUpdateLastSyncCompletedTimestampMsToNow",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return n[0]=t.i64.of_float(Date.now()),t.forEach(t.db.table(1).fetch([[[e[0]]]]),function(e){var t=e.update,r=e.item;return t({lastSyncCompletedTimestampMs:n[0]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreUpdateLastSyncCompletedTimestampMsToNowStoredProcedure",e.__tables__=["sync_groups"],a.exports=e}),null);
__d("LSUpsertGradientColor",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(117).put({themeFbid:e[0],gradientIndex:e[1],color:e[2],type_:e[3]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSThreadThemeUpsertGradientColorStoredProcedure",e.__tables__=["gradient_colors"],a.exports=e}),null);
__d("LSUpsertSequenceId",["LSGetViewerFBID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[0]=t[0],t})},function(n){return t.i64.neq(e[1],void 0)?r[1]=e[1]:r[1]=r[0],t.db.table(25).put({id:r[1],lastAppliedMailboxSequenceId:e[0]})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxUpsertSequenceIdStoredProcedure",e.__tables__=["mailbox_metadata"],a.exports=e}),null);
__d("LSUpsertTheme",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.i64.neq(e[12],void 0)?n[0]=e[12]:n[0]=e[0],t.db.table(116).put({fbid:e[0],themeIdx:e[1],fallbackColor:e[2],reverseGradiantsForRadial:e[3],accessibilityLabel:e[4],iconUrl:e[5],iconUrlFallback:e[6],backgroundUrl:e[8],description:e[9],isDeprecated:e[11],normalThemeId:n[0],appColorMode:e[13],titlebarBackgroundColor:e[14],titlebarButtonTintColor:e[15],titlebarTextColor:e[16],titlebarAttributionTextColor:e[17],composerTintColor:e[18],composerUnselectedTintColor:e[19],composerInputTextPlaceholderColor:e[20],composerInputBackgroundColor:e[21],composerInputBorderColor:e[22],composerInputBorderWidth:e[23],composerBackgroundColor:e[24],messageTextColor:e[25],messageBorderColor:e[26],messageBorderWidth:e[27],incomingMessageTextColor:e[28],incomingMessageBorderColor:e[29],incomingMessageBorderWidth:e[30],deliveryReceiptColor:e[31],tertiaryTextColor:e[32],primaryButtonBackgroundColor:e[33],hotLikeColor:e[34],reactionPillBackgroundColor:e[35],secondaryTextColor:e[36],quotedIncomingMessageBubbleColor:e[37],cornerRadius:e[38],blurredComposerBackgroundColor:e[39],composerSecondaryButtonColor:e[40],composerPlaceholderTextColor:e[41]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSThreadThemeUpsertThemeStoredProcedure",e.__tables__=["thread_themes"],a.exports=e}),null);
__d("LSVerifyContactRowExists",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.filter(t.db.table(7).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.id,e[0])&&t.i64.eq(t.i64.cast([0,1]),t.i64.cast([0,1]))}).next().then(function(o,a){var i=o.done,l=o.value;return i?t.sequence([function(n){return r[1]=e[3]==null?"":e[3],t.forEach(t.filter(t.db.table(7).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.id,e[0])&&t.i64.eq(t.i64.cast([0,1]),t.i64.cast([0,1]))&&t.i64.lt(n.authorityLevel,e[14])}),function(e){return e.delete()})},function(n){return t.db.table(7).add({id:e[0],profilePictureUrl:e[2]==null?"":e[2],profilePictureFallbackUrl:e[5],name:r[1],secondaryName:e[20],normalizedNameForSearch:r[1],isMemorialized:e[9],blockedByViewerStatus:e[11],canViewerMessage:e[12],profilePictureLargeUrl:"",isMessengerUser:!0,rank:0,contactType:e[4],contactTypeExact:t.i64.cast([0,0]),requiresMultiway:!1,authorityLevel:e[14],workForeignEntityType:t.i64.cast([0,0]),capabilities:e[15],capabilities2:e[16],contactViewerRelationship:e[19],gender:e[18],firstName:e[21]})},function(o){return r[2]=new t.Map,r[2].set("contact_id",e[0]),r[3]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTask"),"cpq_v2",t.i64.cast([0,207]),r[3],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}]):(a=l.item,t.resolve())})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSContactVerifyContactRowExistsStoredProcedure",e.__tables__=["contacts"],a.exports=e}),null);
__d("LSStaticDependencies",["LSDeleteAllCommunityChannelCategories","LSDeleteAllCommunityFolders","LSDeleteThenInsertCmCommunityList","LSDeleteThenInsertContact","LSDeleteThenInsertMessageRequest","LSDeleteThenInsertNotificationsSettingsGraphQLSnapshot","LSDeleteThenInsertThread","LSExecuteFinallyBlockForSyncTransaction","LSExecuteFirstBlockForSyncTransaction","LSGroupRoomTruncate","LSPopulateCommunityFolderData","LSRemoveTask","LSReplaceOptimisticReaction","LSRoomTruncate","LSSetRegionHint","LSTaskExists","LSTruncateCommunityListTable","LSTruncateNotificationSettings","LSUpdateLastSyncCompletedTimestampMsToNow","LSUpsertGradientColor","LSUpsertSequenceId","LSUpsertTheme","LSVerifyContactRowExists"],(function(t,n,r,o,a,i,l){"use strict";var e={deleteAllCommunityChannelCategories:r("LSDeleteAllCommunityChannelCategories"),deleteAllCommunityFolders:r("LSDeleteAllCommunityFolders"),deleteThenInsertCmCommunityList:r("LSDeleteThenInsertCmCommunityList"),deleteThenInsertContact:r("LSDeleteThenInsertContact"),deleteThenInsertMessageRequest:r("LSDeleteThenInsertMessageRequest"),deleteThenInsertNotificationsSettingsGraphQLSnapshot:r("LSDeleteThenInsertNotificationsSettingsGraphQLSnapshot"),deleteThenInsertThread:r("LSDeleteThenInsertThread"),executeFinallyBlockForSyncTransaction:r("LSExecuteFinallyBlockForSyncTransaction"),executeFirstBlockForSyncTransaction:r("LSExecuteFirstBlockForSyncTransaction"),groupRoomTruncate:r("LSGroupRoomTruncate"),populateCommunityFolderData:r("LSPopulateCommunityFolderData"),removeTask:r("LSRemoveTask"),replaceOptimisticReaction:r("LSReplaceOptimisticReaction"),roomTruncate:r("LSRoomTruncate"),setRegionHint:r("LSSetRegionHint"),taskExists:r("LSTaskExists"),truncateCommunityListTable:r("LSTruncateCommunityListTable"),truncateNotificationSettings:r("LSTruncateNotificationSettings"),updateLastSyncCompletedTimestampMsToNow:r("LSUpdateLastSyncCompletedTimestampMsToNow"),upsertGradientColor:r("LSUpsertGradientColor"),upsertSequenceId:r("LSUpsertSequenceId"),upsertTheme:r("LSUpsertTheme"),verifyContactRowExists:r("LSVerifyContactRowExists")},s=e;l.default=s}),98);
__d("LSStoreProjectConfiguration",["LSBase64Decode.nop","LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.nativeOperation(n("LSBase64Decode.nop"),e[4]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(o){return t.blobs.neq(r[0],void 0)?t.db.table(307).put({configId:e[1],projectName:e[0],cipherSuite:e[5],publicKey:r[0],maxEvals:e[2],redemptionLimit:e[3],expirationTimestampMs:e[6],tokenPollFrequencyMs:e[7],maxClientTokenPoolSize:e[8]}):((function(e){t.logger(e).info(e)})("issuing retry for project configurations task since public key was null"),r[1]=new t.Map,r[1].set("project_name",e[0]),r[2]=r[1].get("project_name"),r[3]=t.toJSON(r[1]),t.storedProcedure(n("LSIssueNewTask"),["acs_credentials","_",r[2]].join(""),t.i64.cast([0,351]),r[3],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0])))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSAnonymousCredentialsStoreProjectConfigurationStoredProcedure",e.__tables__=["secure_acs_configurations"],a.exports=e}),null);
__d("LSSyncBumpThreadDataToClient",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.ge(e[1],n.lastActivityTimestampMs)}).next().then(function(o,a){var i=o.done,l=o.value;return i?0:(a=l.item,t.sequence([function(o){return t.i64.eq(a.parentThreadKey,t.i64.cast([-1,4294967286]))&&t.i64.eq(e[2],t.i64.cast([0,2]))?(r[0]=new t.Map,r[0].set("thread_fbid",e[0]),r[0].set("force_upsert",!1),r[0].set("use_open_messenger_transport",!1),r[0].set("sync_group",t.i64.cast([0,95])),r[0].set("metadata_only",!1),r[0].set("preview_only",!1),r[1]=r[0].get("thread_fbid"),r[2]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[1]),t.i64.cast([0,209]),r[2],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve()},function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastActivityTimestampMs:e[1]})})},function(n){return t.i64.eq(e[2],t.i64.cast([0,1]))?t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[1]})}):t.i64.eq(e[2],t.i64.cast([0,2]))?t.resolve(0):t.i64.eq(e[2],t.i64.cast([0,3]))?t.i64.ge(a.lastReadWatermarkTimestampMs,a.lastActivityTimestampMs)?t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[1]})}):t.resolve():t.resolve(0)}]))})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxSyncBumpThreadDataToClientStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSTransportHybridParticipantUpdateReceipts",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSE2EEMessagingMetadataMailboxTransportHybridParticipantUpdateReceiptsStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSIsMobileClient",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return r[0]=!1,t.resolve(r)}e.__sproc_name__="LSEncryptedBackupsIsMobileClientStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSLogMEBUploadSuccessEvent.nop",["Promise","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("EncryptedBackupUploadFailureFalcoEvent").__setRef("LSLogMEBUploadSuccessEvent.nop"),u=r("requireDeferred")("EncryptedBackupUploadSuccessFalcoEvent").__setRef("LSLogMEBUploadSuccessEvent.nop"),c=function(r,o,a,i,l){if(a!=null){var t=l?u.load():s.load();t.then(function(e){return e.log(function(){return{message_id:a,trace_id:i}})})}return(e||(e=n("Promise"))).resolve()};c.__nop_name__="LSLogMEBUploadSuccessEvent",l.default=c}),98);
__d("MebClientLogsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("3226"),s=o("FalcoLoggerInternal").create("meb_client_logs",e),u=s;l.default=u}),98);
__d("LSLogMebClientEvent.nop",["I64","LSVec","MebClientLogsFalcoEvent","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(a,i,l,u,c,d){return r("MebClientLogsFalcoEvent").log(function(){return{calling_class:l,device_family_id:void 0,device_registration_id:void 0,log_level:(s||(s=o("I64"))).to_string(d),msg:u,trace_ids:r("LSVec").toArray(c)}}),(e||(e=n("Promise"))).resolve()};u.__nop_name__="LSLogMebClientEvent",l.default=u}),98);
__d("LSDeleteBackupOnClient",["LSAppendDataTraceAddon","LSIsMobileClient","LSLogMEBUploadSuccessEvent.nop","LSLogMebClientEvent.nop","LSQplAnnotateString.nop","LSQplMarkPoint.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(r){return e[3]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,1021646192]),e[3],"dasm_delete_backup_on_client_sproc_start"):t.resolve()},function(r){return e[3]!==void 0&&e[4]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021646192]),e[3],"dasm_delete_backup_on_client_error_message",e[4]):t.resolve()},function(e){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] Beginning execution."),t.i64.neq(void 0,void 0)?(r[9]=["deleteBackupOnClient reason: "," ",t.i64.to_string(void 0)].join(""),(function(e){t.logger(e).info(e)})(["[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] ","",r[9]].join("")),r[10]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteBackupOnClientStoredProcedure",[r[9]].join(""),r[10],t.i64.cast([0,4]))):t.resolve()},function(e){return r[1]="Beginning deleteBackupOnClient stored procedure",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][deleteBackupOnClient] ","",r[1]].join("")),r[2]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"deleteBackupOnClient",[r[1]].join(""),r[2],t.i64.cast([0,4]))},function(n){return t.i64.neq(e[0],void 0)?t.forEach(t.db.table(168).fetch([[[e[0]]]]),function(e){return e.delete()}):t.forEach(t.db.table(168).fetch(),function(e){return e.delete()})},function(n){return t.i64.neq(e[0],void 0)?t.forEach(t.db.table(169).fetch([[[e[0]]],"fk_secure_encrypted_backups_client_state"]),function(e){return e.delete()}):t.forEach(t.db.table(169).fetch(),function(e){return e.delete()})},function(e){return t.forEach(t.db.table(174).fetch(),function(e){return e.delete()})},function(n){return e[1]==="fetch_virtual_device"?t.db.table(178).put({pk:t.i64.cast([0,1]),recoveryCodeStatus:t.i64.cast([0,4])}):t.resolve()},function(o){return e[2]?t.sequence([function(e){return r[9]="Clearing state management backups tables",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][deleteBackupOnClient] ","",r[9]].join("")),r[10]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"deleteBackupOnClient",[r[9]].join(""),r[10],t.i64.cast([0,4]))},function(e){return t.forEach(t.db.table(172).fetch([[[t.i64.cast([0,1])]]]),function(e){var t=e.update,n=e.item;return t({backupId:void 0})})},function(n){return t.i64.neq(e[0],void 0)?t.forEach(t.filter(t.db.table(184).fetch(),function(n){return t.i64.eq(n.backupId,e[0])}),function(e){return e.delete()}):t.forEach(t.db.table(184).fetch(),function(e){return e.delete()})},function(n){return t.i64.neq(e[0],void 0)?t.forEach(t.db.table(196).fetch([[[e[0]]]]),function(e){return e.delete()}):t.forEach(t.db.table(196).fetch(),function(e){return e.delete()})}]):t.resolve()},function(e){return t.sequence([function(e){return t.sequence([function(e){return t.resolve()},function(e){return t.storedProcedure(n("LSIsMobileClient")).then(function(e){var t;return t=e,r[10]=t[0],t})},function(e){return r[10]?r[11]=!0:r[11]=!1,r[11]?((function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),r[13]="LSDataTraceMciTraceLog native op not supported",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBTraceUtils] ","",r[13]].join("")),r[12]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBTraceUtils",r[13],r[12],t.i64.cast([0,3]))):t.resolve()}])},function(e){return t.forEach(t.db.table(177).fetch(),function(e){var r=e.item;return t.sequence([function(e){return t.forEach(t.db.table(2).fetch([[[r.pendingBackupTaskId]]]),function(e){return e.delete()})},function(e){return t.i64.eq(r.contentType,t.i64.cast([0,1]))?t.nativeOperation(n("LSLogMEBUploadSuccessEvent.nop"),r.uniqueKey,r.lsTraceId,!0):t.resolve()}])})},function(e){return t.count(t.db.table(177).fetch()).then(function(e){return r[9]=e})},function(e){return t.i64.eq(r[9],t.i64.cast([0,0]))?t.sequence([function(e){return t.resolve()},function(e){return t.storedProcedure(n("LSIsMobileClient")).then(function(e){var t;return t=e,r[10]=t[0],t})},function(e){return r[10]?r[11]=!0:r[11]=!1,r[11]?((function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),r[13]="LSDataTraceMciTraceLog native op not supported",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBTraceUtils] ","",r[13]].join("")),r[12]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBTraceUtils",r[13],r[12],t.i64.cast([0,3]))):t.resolve()}]):t.sequence([function(e){return t.resolve()},function(e){return t.storedProcedure(n("LSIsMobileClient")).then(function(e){var t;return t=e,r[10]=t[0],t})},function(e){return r[10]?r[11]=!0:r[11]=!1,r[11]?((function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),r[13]="LSDataTraceMciTraceLog native op not supported",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBTraceUtils] ","",r[13]].join("")),r[12]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBTraceUtils",r[13],r[12],t.i64.cast([0,3]))):t.resolve()}])}])},function(o){return e[2]?(r[9]="Clearing data flow backups tables",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][deleteBackupOnClient] ","",r[9]].join("")),r[10]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"deleteBackupOnClient",[r[9]].join(""),r[10],t.i64.cast([0,4]))):t.resolve()},function(o){return e[5]?t.resolve(0):e[4]!==void 0?((function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] ","",e[4]].join("")),r[9]=t.createArray(),e[3]!==void 0&&(r[10]=(r[9].push(e[3]),r[9])),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteBackupOnClientStoredProcedure",e[4],r[9],t.i64.cast([0,3]))):t.resolve()},function(e){return r[3]=t.i64.of_float(Date.now()),r[4]=t.i64.random(),r[6]="Finishing execution. Execution time: ",r[7]=t.i64.to_string(t.i64.sub(r[3],r[0])),r[8]=" ms",r[5]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] ",r[5],r[6],r[5],r[7],r[5],r[8]].join("")),t.i64.eq(t.i64.mod_(r[4],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[9]=",",r[10]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteBackupOnClientStoredProcedure",[r[6],r[9],r[7],r[9],r[8]].join(""),r[10],t.i64.cast([0,4]))):t.resolve()},function(r){return e[3]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,1021646192]),e[3],"dasm_delete_backup_on_client_sproc_end"):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsDeleteBackupOnClientStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs","secure_encrypted_backups_generated_recovery_code","secure_encrypted_backups_recovery_code_status","encrypted_backups","encrypted_backups_virtual_devices","encrypted_backups_metadata","pending_backups_context_v2","pending_tasks"],a.exports=e}),null);
__d("LSIsEncryptionVersionSecure",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.i64.eq(e[0],t.i64.cast([0,4]))?n[0]=!1:(t.i64.eq(e[0],t.i64.cast([0,3]))?n[1]=!0:(t.i64.eq(e[0],t.i64.cast([0,2]))?n[2]=!0:(t.i64.eq(e[0],t.i64.cast([0,0]))?n[3]=!0:(t.i64.eq(e[0],t.i64.cast([0,99])),n[4]=!1,n[3]=n[4]),n[2]=n[3]),n[1]=n[2]),n[0]=n[1]),r[0]=n[0],t.resolve(r)}e.__sproc_name__="LSEncryptedBackupsVersioningIsEncryptionVersionSecureStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSDeleteAndReenrollDeviceState",["LSArrayGetObjectAt","LSDeleteBackupOnClient","LSIsEncryptionVersionSecure","LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] Beginning execution."),t.i64.neq(e[0],void 0)?t.sequence([function(e){return t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))||!1}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(r[13]=new t.Map,r[13].set("error_msg","Expected a nonempty query result"),r[13].set("code",t.i64.cast([0,3])),r[13].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),r[14]=t.createArray(),r[15]=(r[14].push(r[13]),r[14]),o=[void 0,r[14]],r[7]=o[0],r[8]=o[1]):(n=l.item,r[13]=new t.Map,r[13].set("backup_id",n.backupId),r[13].set("device_public_key_blob",n.devicePublicKeyBlob),r[13].set("device_private_key_blob",n.devicePrivateKeyBlob),r[13].set("epoch_storage_public_key_blob",n.epochStoragePublicKeyBlob),r[13].set("epoch_storage_private_key_blob",n.epochStoragePrivateKeyBlob),r[13].set("epoch_auth_public_key_blob",n.epochAuthPublicKeyBlob),r[13].set("epoch_auth_private_key_blob",n.epochAuthPrivateKeyBlob),r[13].set("mailbox_root_key_blob",n.mailboxRootKeyBlob),r[13].set("ocmf_client_state_blob",n.ocmfClientStateBlob),r[13].set("orf_client_state_v2_blob",void 0),r[13].set("orf_v2_authority_level",void 0),r[13].set("oblivious_validation_token_blob",n.obliviousValidationTokenBlob),r[13].set("device_id",n.deviceId),r[13].set("backup_tenancy",n.backupTenancy),r[13].set("encryption_version",n.encryptionVersion),r[13].set("revision_version",n.revisionVersion),r[13].set("initialize_restore_result",void 0),r[13].set("device_creation_timestamp_sec",void 0),r[13].set("authority_level",n.authorityLevel),a=[r[13],void 0],r[7]=a[0],r[8]=a[1])})},function(o){return r[10]=new t.Map,r[10].set("value",r[7]),r[10].set("errors",r[8]),r[11]=r[10].get("value"),r[11]!==void 0?t.sequence([function(o){return r[13]=r[11].get("backup_id"),r[14]=r[11].get("device_public_key_blob"),r[15]=r[11].get("device_private_key_blob"),r[16]=r[11].get("epoch_storage_public_key_blob"),r[17]=r[11].get("epoch_storage_private_key_blob"),r[18]=r[11].get("epoch_auth_public_key_blob"),r[19]=r[11].get("epoch_auth_private_key_blob"),r[20]=r[11].get("mailbox_root_key_blob"),r[21]=r[11].get("ocmf_client_state_blob"),r[22]=r[11].get("orf_client_state_v2_blob"),r[23]=r[11].get("orf_v2_authority_level"),r[24]=r[11].get("oblivious_validation_token_blob"),r[25]=r[11].get("device_id"),r[26]=r[11].get("backup_tenancy"),r[27]=r[11].get("encryption_version"),r[28]=r[11].get("revision_version"),r[29]=r[11].get("initialize_restore_result"),r[30]=r[11].get("device_creation_timestamp_sec"),r[31]=r[11].get("authority_level"),t.i64.neq(r[25],void 0)?t.sequence([function(e){return r[33]=void 0,t.i64.neq(r[33],void 0)?t.resolve(r[34]=r[33]):t.sequence([function(e){return r[37]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[38]=t[0],t})},function(e){return r[38]&&(r[47]=(r[37].push(t.i64.cast([0,0])),r[37])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[39]=t[0],t})},function(e){return r[39]&&(r[47]=(r[37].push(t.i64.cast([0,2])),r[37])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[40]=t[0],t})},function(e){return r[40]&&(r[47]=(r[37].push(t.i64.cast([0,3])),r[37])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[41]=t[0],t})},function(e){return r[41]&&(r[47]=(r[37].push(t.i64.cast([0,4])),r[37])),r[42]=t.createArray(),r[43]=t.i64.of_int32(r[37].length),t.i64.gt(r[43],t.i64.cast([0,0]))?t.loopAsync(r[43],function(e){return r[47]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[37],r[47]).then(function(e){var t;return t=e,r[48]=t[0],r[49]=t[1],t})},function(e){return r[50]=(r[42].push(r[48]),r[42])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[47]=t.createArray(),r[48]=t.i64.of_int32(r[42].length),t.i64.gt(r[48],t.i64.cast([0,0]))?t.loopAsync(r[48],function(e){return r[50]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[42],r[50]).then(function(e){var t;return t=e,r[51]=t[0],r[52]=t[1],t})},function(e){return r[53]=(r[47].push(t.i64.to_string(r[51])),r[47])}])}):t.resolve()},function(e){return r[49]=r[47].join(","),r[44]=r[49]}])},function(e){return r[42].some(function(e){return t.i64.eq(r[27],e)})?r[45]=r[27]:r[45]=void 0,t.i64.neq(r[45],void 0)?r[46]=r[45]:r[46]=void 0,r[34]=r[46]}])},function(o){return t.i64.neq(r[34],void 0)?r[35]=r[34]:r[35]=t.i64.cast([0,0]),t.i64.neq(r[26],void 0)?r[36]=r[26]:r[36]=t.i64.cast([0,1]),t.i64.eq(r[25],e[0])?t.sequence([function(e){return t.storedProcedure(n("LSDeleteBackupOnClient"),r[13],void 0,!1,void 0,void 0,!0)},function(n){return r[37]=t.i64.of_float(Date.now()),t.db.table(343).add({pk:void 0,deviceReenrollmentReason:e[1],reenrollmentTimestamp:r[37]})}]):t.resolve(0)},function(e){return r[32]=!0}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] Failed to load client state: 24"),r[34]="Failed to load client state: 24",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] ","",r[34]].join("")),r[33]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure",r[34],r[33],t.i64.cast([0,3]))},function(e){return r[32]=!1}])},function(e){return r[12]=r[32]}]):t.sequence([function(e){return r[13]=r[10].get("errors"),r[14]=r[10].get("errors"),(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] Failed to load client state: 1"),r[16]="Failed to load client state: 1",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] ","",r[16]].join("")),r[15]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure",r[16],r[15],t.i64.cast([0,3]))},function(e){return r[12]=!1}])}]):t.sequence([function(e){return t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))||!0}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(r[13]=new t.Map,r[13].set("error_msg","Expected a nonempty query result"),r[13].set("code",t.i64.cast([0,3])),r[13].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),r[14]=t.createArray(),r[15]=(r[14].push(r[13]),r[14]),o=[void 0,r[14]],r[7]=o[0],r[8]=o[1]):(n=l.item,r[13]=new t.Map,r[13].set("backup_id",n.backupId),r[13].set("device_public_key_blob",n.devicePublicKeyBlob),r[13].set("device_private_key_blob",n.devicePrivateKeyBlob),r[13].set("epoch_storage_public_key_blob",n.epochStoragePublicKeyBlob),r[13].set("epoch_storage_private_key_blob",n.epochStoragePrivateKeyBlob),r[13].set("epoch_auth_public_key_blob",n.epochAuthPublicKeyBlob),r[13].set("epoch_auth_private_key_blob",n.epochAuthPrivateKeyBlob),r[13].set("mailbox_root_key_blob",n.mailboxRootKeyBlob),r[13].set("ocmf_client_state_blob",n.ocmfClientStateBlob),r[13].set("orf_client_state_v2_blob",void 0),r[13].set("orf_v2_authority_level",void 0),r[13].set("oblivious_validation_token_blob",n.obliviousValidationTokenBlob),r[13].set("device_id",n.deviceId),r[13].set("backup_tenancy",n.backupTenancy),r[13].set("encryption_version",n.encryptionVersion),r[13].set("revision_version",n.revisionVersion),r[13].set("initialize_restore_result",void 0),r[13].set("device_creation_timestamp_sec",void 0),r[13].set("authority_level",n.authorityLevel),a=[r[13],void 0],r[7]=a[0],r[8]=a[1])})},function(e){return r[10]=new t.Map,r[10].set("value",r[7]),r[10].set("errors",r[8]),r[11]=r[10].get("value"),r[11]!==void 0?t.sequence([function(e){return r[13]=r[11].get("backup_id"),r[14]=r[11].get("device_public_key_blob"),r[15]=r[11].get("device_private_key_blob"),r[16]=r[11].get("epoch_storage_public_key_blob"),r[17]=r[11].get("epoch_storage_private_key_blob"),r[18]=r[11].get("epoch_auth_public_key_blob"),r[19]=r[11].get("epoch_auth_private_key_blob"),r[20]=r[11].get("mailbox_root_key_blob"),r[21]=r[11].get("ocmf_client_state_blob"),r[22]=r[11].get("orf_client_state_v2_blob"),r[23]=r[11].get("orf_v2_authority_level"),r[24]=r[11].get("oblivious_validation_token_blob"),r[25]=r[11].get("device_id"),r[26]=r[11].get("backup_tenancy"),r[27]=r[11].get("encryption_version"),r[28]=r[11].get("revision_version"),r[29]=r[11].get("initialize_restore_result"),r[30]=r[11].get("device_creation_timestamp_sec"),r[31]=r[11].get("authority_level"),t.i64.neq(r[25],void 0)?t.sequence([function(e){return r[33]=void 0,t.i64.neq(r[33],void 0)?t.resolve(r[34]=r[33]):t.sequence([function(e){return r[37]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[38]=t[0],t})},function(e){return r[38]&&(r[47]=(r[37].push(t.i64.cast([0,0])),r[37])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[39]=t[0],t})},function(e){return r[39]&&(r[47]=(r[37].push(t.i64.cast([0,2])),r[37])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[40]=t[0],t})},function(e){return r[40]&&(r[47]=(r[37].push(t.i64.cast([0,3])),r[37])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[41]=t[0],t})},function(e){return r[41]&&(r[47]=(r[37].push(t.i64.cast([0,4])),r[37])),r[42]=t.createArray(),r[43]=t.i64.of_int32(r[37].length),t.i64.gt(r[43],t.i64.cast([0,0]))?t.loopAsync(r[43],function(e){return r[47]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[37],r[47]).then(function(e){var t;return t=e,r[48]=t[0],r[49]=t[1],t})},function(e){return r[50]=(r[42].push(r[48]),r[42])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[47]=t.createArray(),r[48]=t.i64.of_int32(r[42].length),t.i64.gt(r[48],t.i64.cast([0,0]))?t.loopAsync(r[48],function(e){return r[50]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[42],r[50]).then(function(e){var t;return t=e,r[51]=t[0],r[52]=t[1],t})},function(e){return r[53]=(r[47].push(t.i64.to_string(r[51])),r[47])}])}):t.resolve()},function(e){return r[49]=r[47].join(","),r[44]=r[49]}])},function(e){return r[42].some(function(e){return t.i64.eq(r[27],e)})?r[45]=r[27]:r[45]=void 0,t.i64.neq(r[45],void 0)?r[46]=r[45]:r[46]=void 0,r[34]=r[46]}])},function(e){return t.i64.neq(r[34],void 0)?r[35]=r[34]:r[35]=t.i64.cast([0,0]),t.i64.neq(r[26],void 0)?r[36]=r[26]:r[36]=t.i64.cast([0,1]),r[32]=!0}]):t.resolve(r[32]=!1)},function(e){return r[12]=r[32]}]):t.resolve((r[13]=r[10].get("errors"),r[14]=r[10].get("errors"),r[12]=!1))},function(o){return r[12]?((function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] Failure. Attempted to reset nux flags on an onboarded device"),r[14]="Failure. Attempted to reset nux flags on an onboarded device",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] ","",r[14]].join("")),r[13]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure",r[14],r[13],t.i64.cast([0,3]))):(r[13]=t.i64.of_float(Date.now()),t.db.table(343).add({pk:void 0,deviceReenrollmentReason:e[1],reenrollmentTimestamp:r[13]}))}])},function(e){return r[1]=t.i64.of_float(Date.now()),r[2]=t.i64.random(),r[4]="Finishing execution. Execution time: ",r[5]=t.i64.to_string(t.i64.sub(r[1],r[0])),r[6]=" ms",r[3]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] ",r[3],r[4],r[3],r[5],r[3],r[6]].join("")),t.i64.eq(t.i64.mod_(r[2],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[7]=",",r[8]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure",[r[4],r[7],r[5],r[7],r[6]].join(""),r[8],t.i64.cast([0,4]))):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state","encrypted_backups_reenrollment_trigger"],a.exports=e}),null);
__d("LSTriggerReenrollementFromOptOutDelta",["LSArrayGetObjectAt","LSDeleteAndReenrollDeviceState","LSIsEncryptionVersionSecure"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,o){var a,i=e.done,l=e.value;return i?(a=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,20]),void 0,void 0],r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],r[16]=a[16],r[17]=a[17],a):(o=l.item,t.sequence([function(e){return r[26]=o.backupTenancy,r[25]=o.encryptionVersion,r[21]=void 0,t.i64.neq(r[21],void 0)?t.resolve(r[22]=r[21]):t.sequence([function(e){return r[27]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[28]=t[0],t})},function(e){return r[28]&&(r[37]=(r[27].push(t.i64.cast([0,0])),r[27])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[29]=t[0],t})},function(e){return r[29]&&(r[37]=(r[27].push(t.i64.cast([0,2])),r[27])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[30]=t[0],t})},function(e){return r[30]&&(r[37]=(r[27].push(t.i64.cast([0,3])),r[27])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[31]=t[0],t})},function(e){return r[31]&&(r[37]=(r[27].push(t.i64.cast([0,4])),r[27])),r[32]=t.createArray(),r[33]=t.i64.of_int32(r[27].length),t.i64.gt(r[33],t.i64.cast([0,0]))?t.loopAsync(r[33],function(e){return r[37]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[27],r[37]).then(function(e){var t;return t=e,r[38]=t[0],r[39]=t[1],t})},function(e){return r[40]=(r[32].push(r[38]),r[32])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[37]=t.createArray(),r[38]=t.i64.of_int32(r[32].length),t.i64.gt(r[38],t.i64.cast([0,0]))?t.loopAsync(r[38],function(e){return r[40]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[32],r[40]).then(function(e){var t;return t=e,r[41]=t[0],r[42]=t[1],t})},function(e){return r[43]=(r[37].push(t.i64.to_string(r[41])),r[37])}])}):t.resolve()},function(e){return r[39]=r[37].join(","),r[34]=r[39]}])},function(e){return r[32].some(function(e){return t.i64.eq(r[25],e)})?r[35]=r[25]:r[35]=void 0,t.i64.neq(r[35],void 0)?r[36]=r[35]:r[36]=void 0,r[22]=r[36]}])},function(e){var n;return t.i64.neq(r[22],void 0)?r[23]=r[22]:r[23]=t.i64.cast([0,0]),t.i64.neq(r[26],void 0)?r[24]=r[26]:r[24]=t.i64.cast([0,1]),n=[o.backupId,o.deviceId,o.mailboxRootKeyBlob,o.ocmfClientStateBlob,void 0,void 0,r[23],r[24],o.epochAuthPublicKeyBlob,o.epochAuthPrivateKeyBlob,o.devicePublicKeyBlob,o.devicePrivateKeyBlob,o.epochStoragePublicKeyBlob,o.epochStoragePrivateKeyBlob,o.obliviousValidationTokenBlob,o.authorityLevel,void 0,void 0],r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r[16]=n[16],r[17]=n[17]}]))})},function(o){return r[19]=!1,r[20]=t.i64.of_int32(e[1].length),t.i64.gt(r[20],t.i64.cast([0,0]))?t.loopAsync(r[20],function(o){return r[21]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[1],r[21]).then(function(e){var t;return t=e,r[22]=t[0],r[23]=t[1],t})},function(e){return r[19]=r[19]||t.i64.eq(r[22],r[1])}])}):t.resolve()},function(o){return r[19]&&t.i64.eq(e[0],r[0])&&t.i64.neq(r[1],void 0)?t.storedProcedure(n("LSDeleteAndReenrollDeviceState"),r[1],t.i64.cast([0,6])):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsTriggerReenrollementFromOptOutDeltaStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state"],a.exports=e}),null);
__d("LSTruncateMetadataThreads.nop",["I64","LSIntEnum","ReQL","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=async function(n,a){if(r("gkx")("9855")){for(var t=n.mi_act_mapping_table.keys(new WeakMap);;){var i,l=await t.next();if(l.done)break;await(i=n.mi_act_mapping_table).delete.apply(i,l.value)}for(var u=o("ReQL").fromTableAscending(n.threads).filter(function(t){return t.syncGroup!=null&&(e||(e=o("I64"))).equal(t.syncGroup,(s||(s=o("LSIntEnum"))).ofNumber(95))}).iterator(new WeakMap);;){var c,d=await u.next();if(d.done)break;await(c=n.threads).delete.apply(c,d.value[0])}}return Promise.resolve()};u.__nop_name__="LSTruncateMetadataThreads",l.default=u}),98);
__d("LSTruncateMetadataThreads",["LSTruncateMetadataThreads.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(e){return t.nativeOperation(n("LSTruncateMetadataThreads.nop"))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxTruncateMetadataThreadsStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTruncateThreadRangeTablesForSyncGroup",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.sequence([function(n){return t.i64.eq(e[0],t.i64.cast([0,1]))?t.forEach(t.filter(t.db.table(10).fetch(),function(e){return t.i64.eq(t.i64.cast([0,1])==null?t.i64.cast([0,1]):t.i64.cast([0,1]),t.i64.cast([0,1]))}),function(e){return e.delete()}):t.i64.eq(e[0],t.i64.cast([0,95]))?t.forEach(t.filter(t.db.table(10).fetch([[[t.i64.cast([0,0])],[t.i64.cast([-1,4294967295])]]]),function(e){return t.i64.eq(t.i64.cast([0,1])==null?t.i64.cast([0,1]):t.i64.cast([0,1]),t.i64.cast([0,1]))&&(t.i64.eq(e.parentThreadKey,t.i64.cast([0,0]))||t.i64.eq(e.parentThreadKey,t.i64.cast([-1,4294967295])))}),function(e){return e.delete()}):t.resolve(0)},function(n){return t.i64.eq(e[0],t.i64.cast([0,1]))?t.forEach(t.filter(t.db.table(247).fetch(),function(e){return t.i64.eq(e.syncGroup==null?t.i64.cast([0,1]):e.syncGroup,t.i64.cast([0,1]))}),function(e){return e.delete()}):t.resolve()},function(n){return t.forEach(t.db.table(198).fetch([[[e[0]]]]),function(e){return e.delete()})},function(n){return t.forEach(t.db.table(220).fetch([[[e[0]]]]),function(e){return e.delete()})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxTruncateThreadRangeTablesForSyncGroupStoredProcedure",e.__tables__=["threads_ranges_v2__generated","filtered_threads_ranges_v3__generated","inbox_threads_ranges","sync_group_threads_ranges"],a.exports=e}),null);
__d("LSTruncateTablesForSyncGroup",["LSTruncateThreadRangeTablesForSyncGroup"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(r){return t.sequence([function(n){return t.forEach(t.filter(t.db.table(9).fetch(),function(n){return(t.i64.eq(n.syncGroup,e[0])||t.i64.eq(n.syncGroup,void 0)&&t.i64.eq(t.i64.cast([0,1]),e[0]))&&![t.i64.cast([0,17]),t.i64.cast([0,18]),t.i64.cast([0,19]),t.i64.cast([0,20]),t.i64.cast([0,21]),t.i64.cast([0,22]),t.i64.cast([0,23]),t.i64.cast([0,24]),t.i64.cast([0,25]),t.i64.cast([0,26]),t.i64.cast([0,27]),t.i64.cast([0,28])].some(function(e){return t.i64.eq(n.threadType,e)})}),function(e){return e.delete()})},function(r){return t.storedProcedure(n("LSTruncateThreadRangeTablesForSyncGroup"),e[0])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxTruncateTablesForSyncGroupStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSUpdateAttachmentItemCtaAtIndex",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.i64.eq(e[5],t.i64.cast([0,0]))?t.forEach(t.db.table(18).fetch([[[e[0],e[1]]]]),function(t){var n=t.update,r=t.item;return n({defaultCtaId:e[2],defaultCtaTitle:e[3],defaultCtaType:e[4]})}):t.i64.eq(e[5],t.i64.cast([0,1]))?t.forEach(t.db.table(18).fetch([[[e[0],e[1]]]]),function(t){var n=t.update,r=t.item;return n({attachmentCta1Id:e[2],cta1Title:e[3],cta1Type:e[4],cta1IconType:void 0})}):t.i64.eq(e[5],t.i64.cast([0,2]))?t.forEach(t.db.table(18).fetch([[[e[0],e[1]]]]),function(t){var n=t.update,r=t.item;return n({attachmentCta2Id:e[2],cta2Title:e[3],cta2Type:e[4],cta2IconType:void 0})}):t.i64.eq(e[5],t.i64.cast([0,3]))?t.forEach(t.db.table(18).fetch([[[e[0],e[1]]]]),function(t){var n=t.update,r=t.item;return n({attachmentCta3Id:e[2],cta3Title:e[3],cta3Type:e[4],cta3IconType:void 0})}):t.resolve((function(e){t.logger(e).warn(e)})("Unexpected CTA index"))},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateAttachmentItemCtaAtIndexStoredProcedure",e.__tables__=["attachment_items"],a.exports=e}),null);
__d("LSUpdateCommunityThreadStaleState",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&([t.i64.cast([0,23]),t.i64.cast([0,21]),t.i64.cast([0,18]),t.i64.cast([0,26]),t.i64.cast([0,27])].some(function(e){return t.i64.eq(n.threadType,e)})||t.i64.eq(n.threadType,t.i64.cast([0,152])))}).next().then(function(n,r){var o=n.done,a=n.value;return o?0:(r=a.item,t.db.table(294).fetch([[[e[0]]]]).next().then(function(n,r){var o=n.done,a=n.value;return o?t.db.table(294).add({threadKey:e[0],threadQueueSequenceId:t.i64.cast([0,0]),isStale:e[1]}):(r=a.item,t.forEach(t.db.table(294).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({isStale:e[1]})}))}))})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateCommunityThreadStaleStateStoredProcedure",e.__tables__=["threads","community_thread_sync_info"],a.exports=e}),null);
__d("LSUpdateOrInsertCommunitySurfaceRange",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(253).put({surfaceType:e[0],communityKey:e[1],isLoadingAfter:!1,hasMoreAfter:e[2],nextPageCursor:e[4]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateOrInsertCommunitySurfaceRangeStoredProcedure",e.__tables__=["community_surface_ranges"],a.exports=e}),null);
__d("LSUpdateOrInsertOhaiGatewayKeyConfigs",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(313).put({keyId:e[0],publicKey:e[1],kemId:e[2],kdfId:e[3],aeadId:e[4],expirationDate:e[5],lastUpdatedTime:e[6]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOhaiUpdateOrInsertOhaiGatewayKeyConfigsStoredProcedure",e.__tables__=["ohai_gateway_key_configs"],a.exports=e}),null);
__d("LSUpdateReadReceipt",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(14).fetch([[[e[1],e[2]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.contactId,e[2])&&t.i64.lt(n.readWatermarkTimestampMs,e[0])}),function(n){var r=n.update,o=n.item;return r({readWatermarkTimestampMs:e[0],readActionTimestampMs:t.i64.gt(e[3],t.i64.cast([0,0]))?e[3]:o.readActionTimestampMs})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateReadReceiptStoredProcedure",e.__tables__=["participants"],a.exports=e}),null);
__d("LSUpdateThreadActivityStatus",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?t.sequence([function(o){return r[2]=new t.Map,r[2].set("thread_fbid",e[0]),r[2].set("force_upsert",!1),r[2].set("use_open_messenger_transport",!1),r[2].set("sync_group",t.i64.cast([0,104])),r[2].set("metadata_only",!1),r[2].set("preview_only",!1),r[3]=r[2].get("thread_fbid"),r[4]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[3]),t.i64.cast([0,209]),r[4],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(o){return r[5]=t.createArray(),r[8]=(r[5].push(e[0]),r[5]),r[6]=new t.Map,r[6].set("number_of_threads",t.i64.cast([0,1])),r[6].set("event_type","issue_tpq_for_verify_threads_activity_status"),r[6].set("thread_ids",r[5]),r[7]=t.toJSON(r[6]),t.storedProcedure(n("LSIssueNewTask"),"log_community_resnapshot_event",t.i64.cast([0,576]),r[7],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return r[0]=t.i64.cast([0,2])}]):(a=l.item,t.sequence([function(n){return t.i64.lt(a.lastActivityTimestampMs,e[1])?t.sequence([function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastActivityTimestampMs:e[1],snippet:e[2]})})},function(e){return r[2]=t.i64.cast([0,1])}]):t.resolve(r[2]=t.i64.cast([0,0]))},function(e){return r[0]=r[2]}]))})},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxUpdateThreadActivityStatusStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("RetUtil",["LSResult"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return r("LSResult")(e)}l.getNullableRetResult=e}),98);
__d("LSShimGetServerThreadKeyFromJIDV2.nop",["ReQL","RetUtil"],(function(t,n,r,o,a,i,l){"use strict";var e=async function(t,n,r){var e=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.mi_act_mapping_table.index("jid")).getKeyRange(r));return o("RetUtil").getNullableRetResult(e==null?void 0:e.serverThreadKey)};e.__nop_name__="LSShimGetServerThreadKeyFromJIDV2",l.default=e}),98);
__d("LSReplaceOptimisticThread",["gkx"],(function(t,n,r,o,a,i,l){function e(){var e=arguments,t=e[e.length-1],n=[],o=[];return t.sequence([function(o){return t.db.table(9).fetch([[[e[1]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?t.forEach(t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.le(n.authorityLevel,t.i64.cast([0,20]))}),function(n){var r=n.update,o=n.item;return r({threadKey:e[1],authorityLevel:t.i64.cast([0,40])})}):(a=l.item,t.i64.le(a.authorityLevel,t.i64.cast([0,40]))?(r("gkx")("14697")?n[2]=!1:n[2]=!0,n[1]=n[2]):n[1]=!0,n[1]?t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(e){return e.delete()}):t.resolve())})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxReplaceOptimisticThreadStoredProcedure",e.__tables__=["threads"];var s=e;l.default=s}),98);
__d("LSUpdateOptimisticContextThreadKeys",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.sequence([function(n){return t.forEach(t.filter(t.db.table(32).fetch(),function(n){return t.i64.eq(n.threadKey,e[0])}),function(t){var n=t.update,r=t.item;return n({threadKey:e[1]})})},function(n){return t.forEach(t.filter(t.db.table(31).fetch(),function(n){return t.i64.eq(n.threadKey,e[0])}),function(t){var n=t.update,r=t.item;return n({threadKey:e[1]})})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreUpdateOptimisticContextThreadKeysStoredProcedure",e.__tables__=["threads_optimistic_context","messages_optimistic_context"],a.exports=e}),null);
__d("LSUpdateTaskQueueName",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(2).fetch([[[e[0]]],"queueNameTaskId"]),function(t){var n=t.update,r=t.item;return n({queueName:e[1]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreUpdateTaskQueueNameStoredProcedure",e.__tables__=["pending_tasks"],a.exports=e}),null);
__d("LSUpdateTaskValue",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(2).fetch([[[e[0]]],"queueNameTaskId"]),function(t){var n=t.update,r=t.item;return n({taskValue:r.taskValue.split(e[1]).join(e[2])})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreUpdateTaskValueStoredProcedure",e.__tables__=["pending_tasks"],a.exports=e}),null);
__d("LSUpdateThreadAuthorityAndMapping",["LSHybridThreadDelete","LSIssueNewTask","LSReplaceOptimisticThread","LSShimGetServerThreadKeyFromJIDV2.nop","LSUpdateOptimisticContextThreadKeys","LSUpdateTaskQueueName","LSUpdateTaskValue"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.nativeOperation(n("LSShimGetServerThreadKeyFromJIDV2.nop"),e[0]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(n){return t.db.table(9).fetch([[[e[1]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[1]=!1:(t=o.item,r[1]=!0)})},function(n){return t.filter(t.db.table(9).fetch(),function(n){return t.i64.eq(n.threadKey,e[2])}).next().then(function(e,t){var n=e.done,o=e.value;return n?r[3]=!1:(t=o.item,r[3]=!0)})},function(o){return r[5]=t.i64.neq(r[0],void 0),r[7]=t.i64.eq(r[0],e[2])&&r[5],!r[7]&&!(t.i64.eq(r[0],e[1])&&r[5])&&r[5]&&(function(e){t.logger(e).mustfix(e)})("The mi_act_mapping row did not correspond to either the authoritative or optimistic thread key."),t.i64.neq(e[2],void 0)?r[6]=e[2]:r[6]=t.i64.cast([0,0]),r[5]?r[7]?t.sequence([function(o){return r[1]?t.sequence([function(n){return t.db.table(173).fetch([[[e[1]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[8]=void 0:(t=o.item,r[8]=t.jid)})},function(o){return r[10]=new t.Map,r[10].set("authoritative_thread_key",e[1]),r[10].set("jid_authoritative_mapped",r[8]),r[10].set("jid_optimistic_mapped",e[0]),r[10].set("optimistic_thread_key",e[2]),r[11]=t.toJSON(r[10]),t.storedProcedure(n("LSIssueNewTask"),"e2ee_log_incorrect_occam_mapping",t.i64.cast([0,160033]),r[11],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(r){return t.storedProcedure(n("LSHybridThreadDelete"),e[1])}]):t.resolve()},function(e){return t.i64.neq(r[6],void 0)?t.forEach(t.db.table(9).fetch([[[r[6]]]]),function(e){var t=e.update,n=e.item;return t({clientThreadKey:r[6]})}):t.resolve()},function(o){return t.storedProcedure(n("LSReplaceOptimisticThread"),r[6],e[1])},function(o){return t.storedProcedure(n("LSUpdateOptimisticContextThreadKeys"),r[6],e[1])}]):r[3]?t.storedProcedure(n("LSHybridThreadDelete"),r[6]):t.resolve():r[3]?r[1]?t.storedProcedure(n("LSHybridThreadDelete"),r[6]):t.sequence([function(e){return t.i64.neq(r[6],void 0)?t.forEach(t.db.table(9).fetch([[[r[6]]]]),function(e){var t=e.update,n=e.item;return t({clientThreadKey:r[6]})}):t.resolve()},function(o){return t.storedProcedure(n("LSReplaceOptimisticThread"),r[6],e[1])},function(o){return t.storedProcedure(n("LSUpdateOptimisticContextThreadKeys"),r[6],e[1])}]):t.resolve()},function(o){return r[3]?t.sequence([function(o){return r[9]=t.i64.to_string(r[6]),r[8]=t.i64.to_string(e[1]),t.storedProcedure(n("LSUpdateTaskQueueName"),r[9],r[8])},function(e){return t.storedProcedure(n("LSUpdateTaskValue"),r[8],r[9],r[8])}]):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxUpdateThreadAuthorityAndMappingStoredProcedure",e.__tables__=["threads","mi_act_mapping_table"],a.exports=e}),null);
__d("LSUpdateThreadAuthorityAndMappingWithOTIDFromJID",["LSShimGetServerThreadKeyFromJIDV2.nop","LSUpdateThreadAuthorityAndMapping"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.nativeOperation(n("LSShimGetServerThreadKeyFromJIDV2.nop"),e[0]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(o){return t.i64.neq(r[0],e[1])?r[1]=r[0]:r[1]=void 0,t.storedProcedure(n("LSUpdateThreadAuthorityAndMapping"),e[0],e[1],r[1])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxUpdateThreadAuthorityAndMappingWithOTIDFromJIDStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSUpdateThreadNullState",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({threadPictureUrl:e[1],threadPictureUrlFallback:e[2],threadPictureUrlExpirationTimestampMs:e[3],nullstateDescriptionText1:e[5],nullstateDescriptionType1:e[10],nullstateDescriptionText2:e[6],nullstateDescriptionType2:e[11],nullstateDescriptionText3:e[7],nullstateDescriptionType3:e[12],capabilities:e[15],threadName:e[16],threadSubtype:e[4]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateThreadNullStateStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSUpdateThreadsRangesV2",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.sequence([function(n){return t.forEach(t.db.table(10).fetch([[[e[1]]]]),function(e){return e.delete()})},function(r){var o;return n[8]=t.i64.gt(e[2],t.i64.cast([0,1]))&&t.i64.gt(e[3],t.i64.cast([-2147483648,0])),e[0]==="inbox"&&t.i64.eq(e[1],t.i64.cast([0,0]))&&t.i64.eq(e[4],t.i64.cast([0,1]))?t.sequence([function(r){return n[9]=e[2],n[10]=e[3],n[11]=!1,n[12]=n[8],t.forEach(t.db.table(198).fetch(),function(e){var r=e.item;return n[13]=r.minLastActivityTimestampMs,n[15]=r.minThreadKey,n[14]=t.i64.lt(n[9]==null?n[13]:n[9],n[13]),n[9]=n[14]?n[13]:n[9],n[10]=n[14]?n[15]:n[10],n[11]=n[11]||r.isLoadingBefore,n[12]=n[12]||t.i64.gt(n[13],t.i64.cast([0,1]))&&t.i64.gt(n[15],t.i64.cast([-2147483648,0]))})},function(e){var t;return t=[n[9],n[10],n[11],n[12]],n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],t}]):t.resolve((o=[e[2],e[3],!1,n[8]],n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],o))},function(r){var o;return t.i64.eq(e[4],t.i64.cast([0,1]))?t.sequence([function(r){return n[9]=n[0],n[10]=n[1],n[11]=n[2],n[12]=n[3],t.forEach(t.filter(t.db.table(220).fetch(),function(n){return t.i64.eq(n.parentThreadKey,e[1])}),function(e){var r=e.item;return n[13]=r.minLastActivityTimestampMs,n[15]=r.minThreadKey,n[14]=t.i64.lt(n[9]==null?n[13]:n[9],n[13]),n[9]=n[14]?n[13]:n[9],n[10]=n[14]?n[15]:n[10],n[11]=n[11]||r.isLoadingBefore,n[12]=n[12]||t.i64.gt(n[13],t.i64.cast([0,1]))&&t.i64.gt(n[15],t.i64.cast([-2147483648,0]))})},function(e){var t;return t=[n[9],n[10],n[11],n[12]],n[4]=t[0],n[5]=t[1],n[6]=t[2],n[7]=t[3],t}]):t.resolve((o=[n[0],n[1],n[2],n[3]],n[4]=o[0],n[5]=o[1],n[6]=o[2],n[7]=o[3],o))},function(r){return t.db.table(10).add({parentThreadKey:e[1],minThreadKey:n[5]==null?t.i64.cast([-2147483648,0]):n[5],minLastActivityTimestampMs:n[4]==null?t.i64.cast([0,1]):n[4],maxLastActivityTimestampMs:t.i64.cast([0,1]),maxThreadKey:t.i64.cast([-2147483648,0]),isLoadingBefore:n[6],isLoadingAfter:!1,hasMoreBefore:n[7],hasMoreAfter:!1})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateThreadsRangesV2StoredProcedure",e.__tables__=["threads_ranges_v2__generated","inbox_threads_ranges","sync_group_threads_ranges"],a.exports=e}),null);
__d("LSUpsertContextualProfileV1",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.i64.eq(e[5],t.i64.cast([0,0]))?n[0]=void 0:n[0]=e[5],t.db.table(216).put({ownerId:e[0],associatedEntityId:e[1],profilePictureUrl:e[2],profilePictureFallbackUrl:e[4],profilePictureUrlExpirationTimestampMs:n[0],profileName:e[3]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSContactUpsertContextualProfileV1StoredProcedure",e.__tables__=["contextual_profile_v1"],a.exports=e}),null);
__d("LSUpsertFolderSeenTimestamp",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.sequence([function(n){return t.i64.gt(e[1],t.i64.cast([0,0]))?t.db.table(35).fetch([[[e[0]]]]).next().then(function(n,r){var o=n.done,a=n.value;return o?t.db.table(35).add({parentThreadKey:e[0],lastSeenRequestTimestampMs:e[1]}):(r=a.item,t.i64.lt(r.lastSeenRequestTimestampMs,e[1])?t.forEach(t.db.table(35).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastSeenRequestTimestampMs:e[1]})}):t.resolve())}):t.resolve()},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(n,r){var o=n.done,a=n.value;return o?0:(r=a.item,t.i64.lt(r.lastReadWatermarkTimestampMs,e[1])?t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[1]})}):t.resolve())})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpsertFolderSeenTimestampStoredProcedure",e.__tables__=["folder_metadata","threads"],a.exports=e}),null);
__d("LSUpsertMessage",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(12).fetch([[[e[9]]],"optimistic"]).next().then(function(n,r){var o=n.done,a=n.value;return o?t.db.table(12).add({threadKey:e[3],timestampMs:e[5],messageId:e[8],offlineThreadingId:e[9],authorityLevel:e[2],primarySortKey:e[6],senderId:e[10],isAdminMessage:e[12],sendStatus:e[15],sendStatusV2:e[16],text:e[0],subscriptErrorMessage:e[1],secondarySortKey:e[7],stickerId:e[11],messageRenderingType:e[13],isUnsent:e[17],unsentTimestampMs:e[18],mentionOffsets:e[19],mentionLengths:e[20],mentionIds:e[21],mentionTypes:e[22],replySourceId:e[23],replySourceType:e[24],replySourceTypeV2:e[25],replyStatus:e[26],replySnippet:e[27],replyMessageText:e[28],replyToUserId:e[29],replyMediaExpirationTimestampMs:e[30],replyMediaUrl:e[31],replyMediaPreviewWidth:e[33],replyMediaPreviewHeight:e[34],replyMediaUrlMimeType:e[35],replyMediaUrlFallback:e[36],replyCtaId:e[37],replyCtaTitle:e[38],replyAttachmentType:e[39],replyAttachmentId:e[40],replyAttachmentExtra:e[41],replyType:e[42],isForwarded:e[43],forwardScore:e[44],hasQuickReplies:e[45],adminMsgCtaId:e[46],adminMsgCtaTitle:e[47],adminMsgCtaType:e[48],cannotUnsendReason:e[49],textHasLinks:e[50],viewFlags:e[51],displayedContentTypes:e[52],viewedPluginKey:e[53],viewedPluginContext:e[54],quickReplyType:e[55],hotEmojiSize:e[56],platformXmdEncoded:e[57],sendAttributionXmd:e[58],replySourceTimestampMs:e[59],ephemeralDurationInSec:e[60],msUntilExpirationTs:e[61],ephemeralExpirationTs:e[62],takedownState:e[63],isCollapsed:e[64],subthreadKey:e[65],botResponseId:e[66],metadataDataclass:e[67],editCount:e[68],isPaidPartnership:e[69],messageHiddenState:e[70],adminSignatureName:e[71],adminSignatureProfileUrl:e[72],adminSignatureCreatorType:e[73],replyMessageHiddenState:e[74],translatedText:e[75],textDialect:e[76],translatedTextDialect:e[77],scheduledTimestamp:e[78],isVideoQuickSend:e[79],subthreadParentMessageId:e[80],isExclusiveToSubthread:e[81]}):(r=a.item,t.i64.le(r.authorityLevel,e[2])?t.db.table(12).put({threadKey:e[3],timestampMs:e[5],messageId:e[8],offlineThreadingId:e[9],authorityLevel:e[2],primarySortKey:r.primarySortKey,senderId:e[10],isAdminMessage:e[12],sendStatus:e[15],sendStatusV2:e[16],text:e[0],subscriptErrorMessage:e[1],secondarySortKey:r.secondarySortKey,stickerId:e[11],messageRenderingType:e[13],isUnsent:e[17],unsentTimestampMs:e[18],mentionOffsets:e[19],mentionLengths:e[20],mentionIds:e[21],mentionTypes:e[22],replySourceId:e[23],replySourceType:e[24],replySourceTypeV2:e[25],replyStatus:e[26],replySnippet:e[27],replyMessageText:e[28],replyToUserId:e[29],replyMediaExpirationTimestampMs:e[30],replyMediaUrl:e[31],replyMediaPreviewWidth:e[33],replyMediaPreviewHeight:e[34],replyMediaUrlMimeType:e[35],replyMediaUrlFallback:e[36],replyCtaId:e[37],replyCtaTitle:e[38],replyAttachmentType:e[39],replyAttachmentId:e[40],replyAttachmentExtra:e[41],replyType:e[42],isForwarded:e[43],forwardScore:e[44],hasQuickReplies:e[45],adminMsgCtaId:e[46],adminMsgCtaTitle:e[47],adminMsgCtaType:e[48],cannotUnsendReason:e[49],textHasLinks:e[50],viewFlags:e[51],displayedContentTypes:e[52],viewedPluginKey:e[53],viewedPluginContext:e[54],quickReplyType:e[55],hotEmojiSize:e[56],platformXmdEncoded:e[57],sendAttributionXmd:e[58],replySourceTimestampMs:e[59],ephemeralDurationInSec:e[60],msUntilExpirationTs:e[61],ephemeralExpirationTs:e[62],takedownState:e[63],isCollapsed:e[64],subthreadKey:e[65],botResponseId:e[66],metadataDataclass:e[67],editCount:e[68],isPaidPartnership:e[69],messageHiddenState:e[70],adminSignatureName:e[71],adminSignatureProfileUrl:e[72],adminSignatureCreatorType:e[73],replyMessageHiddenState:e[74],translatedText:e[75],textDialect:e[76],translatedTextDialect:e[77],scheduledTimestamp:e[78],isVideoQuickSend:e[79],subthreadParentMessageId:e[80],isExclusiveToSubthread:e[81]}):t.resolve())})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpsertMessageStoredProcedure",e.__tables__=["messages"],a.exports=e}),null);
__d("LSUpsertReaction",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(8).put({threadKey:e[0],messageId:e[2],actorId:e[3],timestampMs:e[1],reaction:e[4],authorityLevel:e[5],reactionCreationTimestampMs:e[6]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpsertReactionStoredProcedure",e.__tables__=["reactions"],a.exports=e}),null);
__d("LSRemoveBlindedTokens",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(308).fetch(),function(t){return t.configId===e[0]}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSAnonymousCredentialsRemoveBlindedTokensStoredProcedure",e.__tables__=["secure_acs_blinded_tokens"],a.exports=e}),null);
__d("XPlatReactVoprf",["WAWasmModuleCache","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("LSVoprfWasm").__setRef("XPlatReactVoprf");async function s(){var t=await e.load(),n=t.LSVoprfWasm,r=t.locateFile,a=await n({getWasmModule:function(){return o("WAWasmModuleCache").loadWasmModule(r())}}),i,l;try{i=a.createCurveRistretto(),l=a.createVoprfExpTwohashdh(i);var s={voprfInfo:{curvePtr:i,voprfPtr:l},voprfWasm:a};return{voprfInstance:s}}catch(e){throw i!=null&&a.freeCurve(i),l!=null&&a.freeVoprf(l),e}}function u(){return Promise.resolve(s())}function c(e){var t=e.voprfInfo,n=e.voprfWasm,r=t.curvePtr,o=t.voprfPtr;n.freeCurve(r),n.freeVoprf(o)}l.loadXPlatReactVoprf=u,l.freeVoprfInstance=c}),98);
__d("LSVoprfComputeSharedSecret.nop",["XPlatReactVoprf"],(function(t,n,r,o,a,i,l){"use strict";var e=async function(t,n,r,a){var e=await o("XPlatReactVoprf").loadXPlatReactVoprf(),i=e.voprfInstance,l=i.voprfInfo,s=i.voprfWasm;try{var u=s.clientFinalize(l,new Uint8Array(r),new Uint8Array(a));return Promise.resolve([u.finalEvaluation.buffer])}catch(e){throw e}finally{o("XPlatReactVoprf").freeVoprfInstance(i)}};e.__nop_name__="LSVoprfComputeSharedSecret",l.default=e}),98);
__d("LSVoprfUnblind.nop",["XPlatReactVoprf"],(function(t,n,r,o,a,i,l){"use strict";var e=async function(t,n,r,a,i,l,s,u){var e=await o("XPlatReactVoprf").loadXPlatReactVoprf(),c=e.voprfInstance,d=c.voprfInfo,m=c.voprfWasm;try{var p=m.verifiableUnblind(d,new Uint8Array(s),new Uint8Array(u),new Uint8Array(a),new Uint8Array(l),new Uint8Array(i),new Uint8Array(r),!0);return Promise.resolve([p.unblindedElement.buffer])}catch(e){throw e}finally{o("XPlatReactVoprf").freeVoprfInstance(c)}};e.__nop_name__="LSVoprfUnblind",l.default=e}),98);
__d("LSVerifyAndSaveNewCredentials",["LSArrayGetObjectAt","LSBase64Decode.nop","LSRemoveBlindedTokens","LSVoprfComputeSharedSecret.nop","LSVoprfUnblind.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.db.table(307).fetch([[[e[0]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?(r[1]=t.createArray(),r[2]=(r[1].push("No valid config found when saving signed credentials for project: "),r[1]),r[3]=(r[1].push("unknown"),r[1]),r[4]=t.toJSON(r[1]),(function(e){t.logger(e).mustfix(e)})(r[4])):(a=l.item,t.sequence([function(o){return r[1]=t.i64.of_int32(e[1].length),t.i64.gt(r[1],t.i64.cast([0,0]))?t.loopAsync(r[1],function(o){return r[2]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[1],r[2]).then(function(e){var t;return t=e,r[3]=t[0],r[4]=t[1],t})},function(e){return r[5]=r[3].get("token_id"),t.db.table(308).fetch([[[r[5]]]]).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(o=[t.blob(""),t.blob(""),t.blob("")],r[6]=o[0],r[7]=o[1],r[8]=o[2],o):(n=l.item,a=[n.nonce,n.blindedNonce,n.blindingFactor],r[6]=a[0],r[7]=a[1],r[8]=a[2])})},function(e){return t.forEach(t.db.table(308).fetch([[[r[5]]]]),function(e){return e.delete()})},function(e){return r[10]=r[3].get("signed_nonce"),t.nativeOperation(n("LSBase64Decode.nop"),r[10]).then(function(e){var t;return t=e,r[11]=t[0],t})},function(e){return r[12]=r[3].get("proof_c"),t.nativeOperation(n("LSBase64Decode.nop"),r[12]).then(function(e){var t;return t=e,r[13]=t[0],t})},function(e){return r[14]=r[3].get("proof_s"),t.nativeOperation(n("LSBase64Decode.nop"),r[14]).then(function(e){var t;return t=e,r[15]=t[0],t})},function(e){return t.nativeOperation(n("LSVoprfUnblind.nop"),a.publicKey,r[8],r[7],r[11]==null?t.blob(""):r[11],r[13]==null?t.blob(""):r[13],r[15]==null?t.blob(""):r[15]).then(function(e){var t;return t=e,r[16]=t[0],t})},function(o){return t.blobs.neq(r[16],void 0)?t.sequence([function(e){return t.nativeOperation(n("LSVoprfComputeSharedSecret.nop"),r[6],r[16]).then(function(e){var t;return t=e,r[17]=t[0],t})},function(n){return t.blobs.neq(r[17],void 0)?t.db.table(309).add({tokenId:r[5],configId:e[0],nonce:r[6],redeemLimit:a.redemptionLimit,sharedSecret:r[17]}):t.resolve()}]):t.resolve()}])}):t.resolve()},function(r){return t.storedProcedure(n("LSRemoveBlindedTokens"),e[0])}]))})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSAnonymousCredentialsVerifyAndSaveNewCredentialsStoredProcedure",e.__tables__=["secure_acs_configurations","secure_acs_blinded_tokens","secure_acs_tokens"],a.exports=e}),null);
__d("LSMailboxTaskCompletionApiOnTaskInsertion",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.islc(t.db.table(232).fetch(),0,t.i64.to_float(t.i64.cast([0,1]))),function(n){var r=n.item;return t.db.table(233).add({taskId:e[0],notificationScopeKey:r.notificationScopeKey,notificationName:r.notificationName})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreMailboxTaskCompletionApiOnTaskInsertionStoredProcedure",e.__tables__=["mailbox_task_completion_notification_context","mailbox_task_completion_api_tasks"],a.exports=e}),null);
__d("LSIssueNewTaskWithExtraOperations",["LSIssueNewTaskAndGetTaskID","LSMailboxTaskCompletionApiOnTaskInsertion"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[11]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(e){return t.storedProcedure(n("LSMailboxTaskCompletionApiOnTaskInsertion"),r[0])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSCoreIssueNewTaskWithExtraOperationsStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSVerifyCommunityFolderExistsV2",["LSIssueNewTaskWithExtraOperations"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return e[1]?t.resolve(r[0]=e[1]):t.sequence([function(n){return t.db.table(162).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[1]=!0:(n=a.item,t.sequence([function(e){return t.db.table(9).fetch([[[n.folderId]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[3]=!0:(t=o.item,r[3]=!1)})},function(e){return r[1]=r[3]}]))})},function(e){return r[0]=r[1]}])},function(o){return r[0]?(r[1]=new t.Map,r[1].set("folder_id",e[0]),r[2]=r[1].get("folder_id"),r[3]=t.toJSON(r[1]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),t.i64.to_string(r[2]),t.i64.cast([0,813]),r[3],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxVerifyCommunityFolderExistsV2StoredProcedure",e.__tables__=["community_folders","threads"],a.exports=e}),null);
__d("LSCheckIfAuthoritativeThreadMissingMiActMapping",["gkx"],(function(t,n,r,o,a,i,l){function e(){var e=arguments,t=e[e.length-1],n=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r("gkx")("4792")?t.sequence([function(r){return t.db.table(173).fetch([[[e[0]]]]).next().then(function(r,o){var a=r.done,i=r.value;return a?t.sequence([function(r){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[3]=!1:(r=a.item,n[3]=t.i64.eq(r.authorityLevel,t.i64.cast([0,80])))})},function(e){return n[1]=n[3]}]):(o=i.item,n[1]=!1)})},function(e){return n[0]=n[1]}]):t.resolve(n[0]=!1)},function(e){return o[0]=n[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxCheckIfAuthoritativeThreadMissingMiActMappingStoredProcedure",e.__tables__=["mi_act_mapping_table","threads"];var s=e;l.default=s}),98);
__d("LSCreateOfflineThreadingID",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return n[0]=t.i64.random(),r[0]=t.i64.and_(t.i64.or_(t.i64.lsl_(e[0],t.i64.to_int32(t.i64.cast([0,22]))),t.i64.and_(n[0],t.i64.cast([0,4194303]))),t.i64.cast([2147483647,4294967295])),t.resolve(r)}e.__sproc_name__="LSMailboxCreateOfflineThreadingIDStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSVerifyE2EEMetadataThreadExistsV2",["LSCheckIfAuthoritativeThreadMissingMiActMapping","LSCreateOfflineThreadingID","LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){var o;return t.i64.neq(e[1],void 0)?t.sequence([function(n){return t.db.table(9).fetch([[[e[1]]]]).next().then(function(t,n){var o,a,i=t.done,l=t.value;return i?(o=[void 0,void 0],r[3]=o[0],r[4]=o[1],o):(n=l.item,a=[e[1],n.authorityLevel],r[3]=a[0],r[4]=a[1])})},function(e){var t;return t=[r[3],r[4]],r[0]=t[0],r[1]=t[1],t}]):t.resolve((o=[void 0,void 0],r[0]=o[0],r[1]=o[1],o))},function(o){return t.i64.neq(r[0],void 0)?t.sequence([function(o){return t.i64.neq(r[1],void 0)?t.sequence([function(e){return t.storedProcedure(n("LSCheckIfAuthoritativeThreadMissingMiActMapping"),r[0]).then(function(e){var t;return t=e,r[3]=t[0],t})},function(n){return t.i64.gt(e[2],r[1])?t.forEach(t.db.table(9).fetch([[[r[0]]]]),function(t){var n=t.update,r=t.item;return n({authorityLevel:e[2]})}):t.resolve()},function(o){return r[3]||t.i64.gt(e[2],r[1])?(r[4]=new t.Map,r[4].set("thread_fbid",r[0]),r[4].set("force_upsert",!1),r[4].set("use_open_messenger_transport",!1),r[4].set("sync_group",t.i64.cast([0,95])),r[4].set("metadata_only",!1),r[4].set("preview_only",!1),r[5]=r[4].get("thread_fbid"),r[6]=t.toJSON(r[4]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[5]),t.i64.cast([0,209]),r[6],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve()}]):t.resolve()},function(e){return r[2]=r[0]}]):t.sequence([function(o){return t.i64.neq(e[1],void 0)?t.sequence([function(o){return t.i64.neq(e[2],t.i64.cast([0,20]))?(r[11]=new t.Map,r[11].set("thread_fbid",e[1]),r[11].set("force_upsert",!1),r[11].set("use_open_messenger_transport",!1),r[11].set("sync_group",t.i64.cast([0,95])),r[11].set("metadata_only",!1),r[11].set("preview_only",!1),r[12]=r[11].get("thread_fbid"),r[13]=t.toJSON(r[11]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[12]),t.i64.cast([0,209]),r[13],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve()},function(t){return r[3]=e[1]}]):t.sequence([function(e){return r[11]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[11]).then(function(e){var t;return t=e,r[12]=t[0],t})},function(e){return r[3]=r[12]}])},function(n){var o,a,i,l,s,u,c,d,m,p,_,f,g,h,y,C,b,v;return t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))?(o=["inbox",t.i64.cast([0,0])],r[4]=o[0],r[5]=o[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,1]))?(a=["pending",t.i64.cast([-1,4294967295])],r[11]=a[0],r[12]=a[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,2]))?(i=["other",t.i64.cast([-1,4294967294])],r[13]=i[0],r[14]=i[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,3]))?(l=["spam",t.i64.cast([-1,4294967293])],r[15]=l[0],r[16]=l[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,5]))?(s=["hidden",t.i64.cast([-1,4294967292])],r[17]=s[0],r[18]=s[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,4]))?(u=["archived",t.i64.cast([-1,4294967286])],r[19]=u[0],r[20]=u[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,15]))?(c=["restricted",t.i64.cast([-1,4294967281])],r[21]=c[0],r[22]=c[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,19]))?(d=["interop",t.i64.cast([-1,4294967277])],r[23]=d[0],r[24]=d[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,29]))?(m=["interop_pending",t.i64.cast([-1,4294967267])],r[25]=m[0],r[26]=m[1]):(p=["inbox",t.i64.cast([0,0])],r[25]=p[0],r[26]=p[1]),_=[r[25],r[26]],r[23]=_[0],r[24]=_[1]),f=[r[23],r[24]],r[21]=f[0],r[22]=f[1]),g=[r[21],r[22]],r[19]=g[0],r[20]=g[1]),h=[r[19],r[20]],r[17]=h[0],r[18]=h[1]),y=[r[17],r[18]],r[15]=y[0],r[16]=y[1]),C=[r[15],r[16]],r[13]=C[0],r[14]=C[1]),b=[r[13],r[14]],r[11]=b[0],r[12]=b[1]),v=[r[11],r[12]],r[4]=v[0],r[5]=v[1]),r[6]=t.i64.cast([0,1083495711]),r[7]=t.i64.cast([0,1024]),r[8]=t.i64.cast([0,0]),r[9]=t.i64.cast([0,0]),r[10]=t.i64.cast([0,134217728]),t.forEach(t.filter(t.db.table(9).fetch([[[r[3]]]]),function(n){return t.i64.eq(n.threadKey,r[3])&&t.i64.lt(n.authorityLevel,e[2])}),function(e){return e.delete()})},function(n){return t.db.table(9).add({threadKey:r[3],mailboxType:t.i64.cast([0,4096]),threadType:e[0],folderName:r[4],lastActivityTimestampMs:t.i64.cast([-1,4294967295]),lastReadWatermarkTimestampMs:t.i64.cast([-1,4294967295]),removeWatermarkTimestampMs:t.i64.cast([-1,4294967295]),ongoingCallState:t.i64.cast([0,0]),parentThreadKey:r[5],authorityLevel:e[2],capabilities:r[6],capabilities2:r[7],capabilities3:r[8],capabilities4:r[9],capabilities5:r[10],unsendLimitMs:t.i64.cast([-1,4294967295]),syncGroup:t.i64.cast([0,95]),isHidden:!0,clientThreadKey:r[3]})},function(e){return r[2]=r[3]}])},function(e){return o[0]=r[2]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxVerifyE2EEMetadataThreadExistsV2StoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSWriteThreadCapabilities",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(r,o){var a=r.done,i=r.value;return a?0:(o=i.item,n[0]=t.i64.of_float(Date.now()),t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({capabilities:e[1],capabilities2:e[2],capabilities3:e[3],capabilities4:e[4],capabilities5:e[5]})}))})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxWriteThreadCapabilitiesStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSExpandedStaticDependencies",["LSAddParticipantIdToGroupThread","LSCheckAuthoritativeMessageExists","LSClearPinnedMessages","LSCompleteThreadCutover","LSDeleteBanner","LSDeleteBannersByIds","LSDeleteExistingMessageRanges","LSDeleteRowRichStatusCustomAudience","LSDeleteThenInsertAvatarFeatureConfig","LSDeleteThenInsertBotProfileInfoV2","LSDeleteThenInsertCmChannelList","LSDeleteThenInsertCommunityUnjoinedThread","LSDeleteThenInsertRankingRequest","LSDeleteThenInsertRankingScore","LSFillDeanonCacheForE2EEThread","LSGetFirstAvailableAttachmentCTAID","LSHybridThreadDelete","LSInsertAttachmentCta","LSInsertAttachmentItem","LSInsertBlobAttachment","LSInsertNewMessageRange","LSIssueFetchThreadCapabilitiesTask","LSIssueInsertPersistentMenuItemsForThreadTask","LSIssueNextSync","LSMailboxTaskCompletionApiOnTaskCompletion","LSMarkThreadReadV2","LSReplaceOptimisticReaction","LSSetForwardScore","LSSetMessageDisplayedContentTypes","LSStaticDependencies","LSStoreProjectConfiguration","LSSyncBumpThreadDataToClient","LSTransportHybridParticipantUpdateReceipts","LSTriggerReenrollementFromOptOutDelta","LSTruncateMetadataThreads","LSTruncateTablesForSyncGroup","LSUpdateAttachmentItemCtaAtIndex","LSUpdateCommunityThreadStaleState","LSUpdateOrInsertCommunitySurfaceRange","LSUpdateOrInsertOhaiGatewayKeyConfigs","LSUpdateOrInsertThread","LSUpdateReadReceipt","LSUpdateThreadActivityStatus","LSUpdateThreadAuthorityAndMappingWithOTIDFromJID","LSUpdateThreadNullState","LSUpdateThreadsRangesV2","LSUpsertContextualProfileV1","LSUpsertFolderSeenTimestamp","LSUpsertInboxThreadsRange","LSUpsertMessage","LSUpsertReaction","LSUpsertSyncGroupThreadsRange","LSVerifyAndSaveNewCredentials","LSVerifyCommunityFolderExistsV2","LSVerifyE2EEMetadataThreadExistsV2","LSWriteThreadCapabilities","cr:7877"],(function(t,n,r,o,a,i,l){"use strict";var e=babelHelpers.extends({},r("LSStaticDependencies"),{LSVerifyCommunityFolderExistsV2:r("LSVerifyCommunityFolderExistsV2"),addParticipantIdToGroupThread:r("LSAddParticipantIdToGroupThread"),checkAuthoritativeMessageExists:r("LSCheckAuthoritativeMessageExists"),clearPinnedMessages:r("LSClearPinnedMessages"),completeThreadCutover:r("LSCompleteThreadCutover"),deleteBanner:r("LSDeleteBanner"),deleteBannersByIds:r("LSDeleteBannersByIds"),deleteExistingMessageRanges:r("LSDeleteExistingMessageRanges"),deleteRowRichStatusCustomAudience:r("LSDeleteRowRichStatusCustomAudience"),deleteThenInsertAvatarFeatureConfig:r("LSDeleteThenInsertAvatarFeatureConfig"),deleteThenInsertBotProfileInfoV2:r("LSDeleteThenInsertBotProfileInfoV2"),deleteThenInsertCmChannelList:r("LSDeleteThenInsertCmChannelList"),deleteThenInsertCommunityUnjoinedThread:r("LSDeleteThenInsertCommunityUnjoinedThread"),deleteThenInsertRankingRequest:r("LSDeleteThenInsertRankingRequest"),deleteThenInsertRankingScore:r("LSDeleteThenInsertRankingScore"),fillDeanonCacheForE2EEThread:r("LSFillDeanonCacheForE2EEThread"),getFirstAvailableAttachmentCTAID:r("LSGetFirstAvailableAttachmentCTAID"),hybridThreadDelete:r("LSHybridThreadDelete"),insertAttachmentCta:r("LSInsertAttachmentCta"),insertAttachmentItem:r("LSInsertAttachmentItem"),insertBlobAttachment:r("LSInsertBlobAttachment"),insertNewMessageRange:r("LSInsertNewMessageRange"),issueFetchThreadCapabilitiesTask:r("LSIssueFetchThreadCapabilitiesTask"),issueInsertPersistentMenuItemsForThreadTask:r("LSIssueInsertPersistentMenuItemsForThreadTask"),issueNextSync:r("LSIssueNextSync"),mailboxTaskCompletionApiOnTaskCompletion:r("LSMailboxTaskCompletionApiOnTaskCompletion"),markThreadReadV2:r("LSMarkThreadReadV2"),replaceOptimisticReaction:r("LSReplaceOptimisticReaction"),setForwardScore:r("LSSetForwardScore"),setMessageDisplayedContentTypes:r("LSSetMessageDisplayedContentTypes"),storeProjectConfiguration:r("LSStoreProjectConfiguration"),syncBumpThreadDataToClient:r("LSSyncBumpThreadDataToClient"),transportHybridParticipantUpdateReceipts:r("LSTransportHybridParticipantUpdateReceipts"),triggerReenrollementFromOptOutDelta:r("LSTriggerReenrollementFromOptOutDelta"),truncateMetadataThreads:r("LSTruncateMetadataThreads"),truncateTablesForSyncGroup:r("LSTruncateTablesForSyncGroup"),updateAttachmentItemCtaAtIndex:r("LSUpdateAttachmentItemCtaAtIndex"),updateCommunityThreadStaleState:r("LSUpdateCommunityThreadStaleState"),updateOrInsertCommunitySurfaceRange:r("LSUpdateOrInsertCommunitySurfaceRange"),updateOrInsertOhaiGatewayKeyConfigs:r("LSUpdateOrInsertOhaiGatewayKeyConfigs"),updateOrInsertThread:r("LSUpdateOrInsertThread"),updateReadReceipt:r("LSUpdateReadReceipt"),updateThreadActivityStatus:r("LSUpdateThreadActivityStatus"),updateThreadAuthorityAndMappingWithOTIDFromJID:r("LSUpdateThreadAuthorityAndMappingWithOTIDFromJID"),updateThreadDisappearingSetting:n("cr:7877"),updateThreadNullState:r("LSUpdateThreadNullState"),updateThreadsRangesV2:r("LSUpdateThreadsRangesV2"),upsertContextualProfileV1:r("LSUpsertContextualProfileV1"),upsertFolderSeenTimestamp:r("LSUpsertFolderSeenTimestamp"),upsertInboxThreadsRange:r("LSUpsertInboxThreadsRange"),upsertMessage:r("LSUpsertMessage"),upsertReaction:r("LSUpsertReaction"),upsertSyncGroupThreadsRange:r("LSUpsertSyncGroupThreadsRange"),verifyAndSaveNewCredentials:r("LSVerifyAndSaveNewCredentials"),verifyE2EEMetadataThreadExistsV2:r("LSVerifyE2EEMetadataThreadExistsV2"),writeThreadCapabilities:r("LSWriteThreadCapabilities")}),s=e;l.default=s}),98);
__d("LSDynamicDependencies",["Bootloader","LSDynamicDependenciesEventEmitter","LSExpandedStaticDependencies","ODS","SiteData","clearTimeout","err","justknobx","nullthrows","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=babelHelpers.extends({},r("LSExpandedStaticDependencies"));function u(e){Object.assign(s,e)}var c={_tombstone:!0};function d(t){var n=new Map;for(var a of t){var i=a.name;i!=null&&!_(i)&&n.set(i,r("nullthrows")(a.value))}if(n.size===0)return Promise.resolve();var l=new Promise(function(t){var a={},i=[],u=function(){var t=c[0],n=c[1],r=n==null?void 0:n.__dr;a[r]={be:1,r:[]},i.push(r),(e||(e=o("ODS"))).bumpEntityKey(3185,"ls_download_dependency.relay",r),s[t]={load:async function(){return await l,s[t]}}};for(var c of n)u();r("Bootloader").handlePayload({compMap:a,consistency:{rev:r("SiteData").client_revision}}),m(r("Bootloader"),i,function(e){Array.from(n.entries()).forEach(function(t,n){var r=t[0],o=t[1];s[r]=e[n]}),t()})});return l}function m(e,t,n){return e.loadModules.call(e,t,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n(t)})}function p(e){return e.charAt(0).toUpperCase()+e.slice(1)}function _(e){return e in s&&s[e]!==c}var f=r("justknobx")._("2800");function g(t,n,a){var i=new Map;for(var l of t!=null?t:[])_(l)||i.set(l,"LS"+p(l));for(var u of n!=null?n:[])_(u+".bs")?u+".nop"in s||i.set(u+".nop","LS"+p(u)+".nop"):i.set(u+".bs","LS"+p(u)+".nop");for(var d of a!=null?a:[])d in s||i.set(d,"LS"+p(d));if(i.size===0)return Promise.resolve();var g=new Promise(function(t,n){var a={},l=[],u=function(){var t=d[0],n=d[1];(e||(e=o("ODS"))).bumpEntityKey(3185,"ls_download_dependency.bootloader",n),o("LSDynamicDependenciesEventEmitter").emitLoadModuleEvent(n),a[n]={be:1,r:[]},l.push(n),s[t]={load:async function(){try{await g}catch(e){throw s[t]=c,e}return s[t]}}};for(var d of i)u();r("Bootloader").handlePayload({compMap:a,consistency:{rev:r("SiteData").client_revision}});var p=m(r("Bootloader"),l,function(e){r("clearTimeout")(_),Array.from(i.entries()).forEach(function(t,n){var r=t[0],o=t[1];s[r]=e[n]}),t()}),_=r("setTimeout")(function(){p.remove();var e=r("err")("Dynamic sproc loading timeout (%s ms); was loading: %s",f,Array.from(i.keys()));e.name="dynamic_sproc_loading_timeout",n(e)},f)});return g}l.cachedModules=s,l.addToCachedModules=u,l.TOMBSTONE=c,l.downloadRelayDependencies=d,l.downloadBootloaderDependencies=g}),98);
__d("XPlatReactCrypto",["err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=self.crypto)==null?void 0:e.subtle;function u(e){var t;if(typeof((t=self.crypto)==null?void 0:t.getRandomValues)!="function")throw r("err")("crypto.getRandomValues: Not implemented");return self.crypto.getRandomValues(e),e}function c(){var e;if(typeof((e=self.crypto)==null?void 0:e.randomUUID)!="function")return null;var t=self.crypto.randomUUID();return typeof t=="string"?t:null}function d(e,t,n,o,a){if(s==null)throw r("err")("crypto.subtle.importKey: Not implemented");return s.importKey(e,t,n,o,a)}function m(e,t){if(s==null)throw r("err")("crypto.subtle.exportKey: Not implemented");return s.exportKey(e,t)}function p(e,t,n){if(s==null)throw r("err")("crypto.subtle.generateKey: Not implemented");return s.generateKey(e,t,n)}function _(e,t,n){if(s==null)throw r("err")("crypto.subtle.encrypt: Not implemented");return s.encrypt(e,t,n)}function f(e,t,n){if(s==null)throw r("err")("crypto.subtle.decrypt: Not implemented");return s.decrypt(e,t,n)}function g(e,t,n){if(s==null)throw r("err")("crypto.subtle.sign: Not implemented");return s.sign(e,t,n)}function h(e,t){if(s==null)throw r("err")("crypto.subtle.digest: Not implemented");return s.digest(e,t)}function y(e,t,n){if(s==null)throw r("err")("crypto.subtle.deriveBits: Not implemented");return s.deriveBits(e,t,n)}function C(e,t,n,o,a){if(s==null)throw r("err")("crypto.subtle.deriveKey: Not implemented");return s.deriveKey(e,t,n,o,a)}l.getRandomValues=u,l.randomUUID=c,l.subtleImportKey=d,l.subtleExportKey=m,l.subtleGenerateKey=p,l.subtleEncrypt=_,l.subtleDecrypt=f,l.subtleSign=g,l.subtleDigest=h,l.subtleDeriveBits=y,l.subtleDeriveKey=C}),98);
__d("LSInt64Lite",["FBLogger","I64","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s={add:(e||(e=o("I64"))).add,and_:e.and_,asr_:e.asr_,cast:function(n){return(e||(e=o("I64"))).mk(n[1],n[0])},div:e.div,eq:function(n,r){return n==null&&r==null||n!=null&&r!=null&&(e||(e=o("I64"))).equal(n,r)},from_string:function(n){try{return(e||(e=o("I64"))).of_string(n)}catch(e){throw r("FBLogger")("messenger_web").mustfixThrow('Unable to cast "%s" to int64',n)}},ge:e.ge,gt:e.gt,le:e.le,lsl_:e.lsl_,lsr_:e.lsr_,lt:e.lt,max:e.max,min:e.min,mod_:e.mod_,mul:e.mul,neq:function(n,r){return n==null&&r!=null||n!=null&&r==null||n!=null&&r!=null&&!(e||(e=o("I64"))).equal(n,r)},of_float:e.of_float,of_int32:e.of_int32,or_:e.or_,random:function(){var t=Array.from(o("XPlatReactCrypto").getRandomValues(new Uint32Array(2)));return t[0]>>>=1,(e||(e=o("I64"))).add(e.lsl_(e.of_float(t[0]),32),e.of_float(t[1]))},sub:e.sub,to_float:e.to_float,to_int32:e.to_int32,to_string:function(n){return n==null?n:(e||(e=o("I64"))).to_string(n)},xor:e.xor};l.default=s}),98);
__d("LSMaybeSyncIteration",["LSSynchronousPromise","isPromise"],(function(t,n,r,o,a,i,l){"use strict";var e,s={__val__:"__stop_iteration__"};function u(e){return{__val__:"__next_value__",next:e}}function c(e){return e!=null&&typeof e=="object"&&e.__val__==="__next_value__"}function d(t,n,a){for(var i=m(t,a);!(e||(e=r("isPromise")))(i);){if(i.done)return o("LSSynchronousPromise").makeSynchronousPromise(i);var l=o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(n(i));if((e||(e=r("isPromise")))(l))return l.then(function(e){if(e===s)return i;var r=c(e)?e.next:void 0;return d(t,n,r)});if(l===s)return o("LSSynchronousPromise").makeSynchronousPromise(i);var u=c(l)?l.next:void 0;i=m(t,u)}var _=p(n);return i.then(function(e){return e.done?e:_(e).then(function(r){if(r===s)return e;var o=c(r)?r.next:void 0;return d(t,n,o)})})}function m(t,n){var a=t.next(n);return(e||(e=r("isPromise")))(a)?o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a):a}function p(e){return function(t){var n=e(t);return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(n)}}l.STOP_ITERATION=s,l.wrapNextValue=u,l.iteratorLoop=d}),98);
__d("LSIterationOperations",["I64","LSDict","LSMaybeSyncIteration","LSSynchronousPromise","ReStoreKeyComparer"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){var n;return n={},n[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return u(e,t)},n.next=function(){var n={done:!0},r=function(r){return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(t(r.value.item)).then(function(e){if(e)return n=r,o("LSMaybeSyncIteration").STOP_ITERATION})};return o("LSMaybeSyncIteration").iteratorLoop(e,r).then(function(){return n})},n}function c(e,t,n){var r,a=0;return r={},r[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return c(e,t,n)},r.next=function(){if(a>=n)return o("LSSynchronousPromise").makeSynchronousPromise({done:!0});var r={done:!0},i=function(n){if(!(a++<t))return r=n,o("LSMaybeSyncIteration").STOP_ITERATION};return o("LSMaybeSyncIteration").iteratorLoop(e,i).then(function(){return r})},r}function d(e,t){return m(e).then(function(e){return e.reduce(function(e,n){return e.then(function(){return t(n)})},o("LSSynchronousPromise").makeSynchronousPromise(void 0))})}function m(e){var t=[],n=function(n){t.push(n.value)};return o("LSMaybeSyncIteration").iteratorLoop(e,n).then(function(){return t})}function p(t,n,r){var a;r===void 0&&(r=[]);var i={ASC:1,DESC:-1},l=function(r,a){for(var t=r.item,l=a.item,s=0;s<n.length;s++){var u=n[s],c=u[0],d=t[c],m=l[c],p=0;if(d==null&&m==null?p=0:d==null&&m!=null?p=-1:d!=null&&m==null?p=1:p=(e||(e=o("ReStoreKeyComparer"))).compareValue(d,m),p!==0)return p*i[n[s][1]]}return 0},s,u=[],c=[],d=function(t){for(var e=[],n=r.length-1;n>=0;n--)e.push(t[r[n]]);return e},m=function(){c=u,c.sort(l),u=[]};return a={},a[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return p(t,n,r)},a.next=function(){if(c.length)return o("LSSynchronousPromise").makeSynchronousPromise({done:!1,value:c.shift()});var n=function(n){var t=d(n.value.item);if(s!=null&&(e||(e=o("ReStoreKeyComparer"))).compareKey(s,t)!==0)return m(),u.push(n.value),s=t,o("LSMaybeSyncIteration").STOP_ITERATION;s=t,u.push(n.value)};return o("LSMaybeSyncIteration").iteratorLoop(t,n).then(function(){return!c.length&&u.length&&m(),c.length?{done:!1,value:c.shift()}:{done:!0}})},a}function _(e){var t=0,n=function(){t++};return o("LSMaybeSyncIteration").iteratorLoop(e,n).then(function(){return(s||(s=o("I64"))).of_int32(t)})}function f(e,t){return{forEach:function(a){return m(e).then(function(e){var n=e.reduce(function(e,n){var r=n.item[t],o=(e.get(r)||0)+1;return e.set(r,o)},new(r("LSDict"))),i=o("LSSynchronousPromise").makeSynchronousPromise(void 0),l=function(){var e=u[0],n=u[1];i=i.then(function(){var r;return a((r={},r[t]=e,r.group_count=(s||(s=o("I64"))).of_int32(n),r))})};for(var u of n.entries())l();return i})}}}l.filter=u,l.slice=c,l.forEach=d,l.toArray=m,l.sortBy=p,l.count=_,l.groupBy=f}),98);
__d("LSJson",["FBLogger","I64","LSDict","LSVec"],(function(t,n,r,o,a,i,l){"use strict";var e,s=512,u={useLSTypes:!1};function c(t,n){var a=n===void 0?u:n,i=a.useLSTypes;function l(e,t){return function(){return function(n){var r=e()(n);if(r!=null){var o=r[0],a=r[1];return[t(o),a]}}}}function s(e){return JSON.parse('"'+e+'"')}function c(e){return function(){return function(t){var n=s(e);if(t.startsWith(n))return[n,t.substr(n.length)]}}}function d(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){return function(e){var n=[],r=e;for(var o of t){var a=o()(r);if(a==null)return;r=a[1],n.push(a[0])}return[n,r]}}}function m(e){return function(){return function(t){var n=e.exec(t);return n!=null?[n,t.substr(n[0].length)]:void 0}}}function p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){return function(e){for(var n of t){var r=n()(e);if(r!=null)return r}}}}function _(e){return function(){return function(t){var n=e()(t);return n!=null?n:[void 0,t]}}}function f(e){return function(){return function(t){for(var n=e()(t),r=[],o=t;n!=null;)o=n[1],r.push(n[0]),n=e()(o);return[r,o]}}}var g=m(/^[\n\r\s]*/),h=l(m(/^\"((?:[^\"\\]|\\.)*)\"/),function(e){var t=e[1];return s(t)}),y=l(m(/^-?\d+(?:(?:\.\d+)?[eE][-\+]?\d+|\.\d+)/),function(e){var t=e[0];return Number(t)}),C=l(m(/^-?\d+/),function(t){var n=t[0];return(e||(e=o("I64"))).of_string(n)}),b=l(c("null"),function(e){return null}),v=l(c("true"),function(e){return!0}),S=l(c("false"),function(e){return!1}),R=l(d(g,h,g,c(":"),function(){return T()}),function(e){var t=e[1],n=e[4];return[t,n]}),L=l(d(R,f(d(g,c(","),R))),function(e){var t=e[0],n=e[1];return[t].concat(n.map(function(e){var t=e[2];return t}))}),E=l(d(c("{"),_(L),g,c("}")),function(e){var t=e[1],n=t===void 0?[]:t;return i?new(r("LSDict"))(n):Object.fromEntries(n)}),k=l(d(function(){return T()},f(d(g,c(","),function(){return T()}))),function(e){var t=e[0],n=e[1];return[t].concat(n.map(function(e){var t=e[2];return t}))}),I=l(d(c("["),g,_(k),g,c("]")),function(e){var t=e[2],n=t===void 0?[]:t;return i?r("LSVec").ofArray(n):n}),T=l(d(g,p(E,h,y,C,I,b,v,S),g),function(e){var t=e[1];return t}),D=T()(t);if(D==null)throw r("FBLogger")("messenger_web").mustfixThrow("error parsing string");if(D[1]!=="")throw r("FBLogger")("messenger_web").mustfixThrow("unexpected %s",D[1]);return D[0]}function d(t,n,a){if(n===void 0&&(n=0),a===void 0&&(a=""),n>s)throw r("FBLogger")("messenger_web").mustfixThrow("recursion limit exceeded");if(typeof t=="string"||typeof t=="number")return JSON.stringify(t);if(typeof t=="boolean")return t?"1":"0";if(t==null)return"null";if(typeof t=="object"){if(Array.isArray(t)){var i=Object.getOwnPropertyDescriptor(t,"tag"),l=i==null?void 0:i.value;if(typeof l=="string"&&l==="ls-array")return"["+t.map(function(e,t){return d(e,n+1,a+"/"+t.toString())}).join(",")+"]";var u=Object.getOwnPropertyDescriptor(t,"_tag"),c=u==null?void 0:u.value;return(typeof c!="string"||c!=="i64")&&r("FBLogger")("messenger_web").warn("LSJson payload contains untagged i64: %s",a),(e||(e=o("I64"))).to_string(t)}else if(t instanceof r("LSDict"))return"{"+Array.from(t.entries()).map(function(e){var t=e[0],o=e[1];if(typeof t=="string")return JSON.stringify(t)+":"+d(o,n+1,a+"/"+t);throw r("FBLogger")("messenger_web").mustfixThrow("key must be a string")}).join(",")+"}"}throw r("FBLogger")("messenger_web").mustfixThrow("type not supported: %s, path: %s",typeof t,a)}l.parse=c,l.stringify=d}),98);
__d("LSPendingTasksPluginType",[],(function(t,n,r,o,a,i){var e=Object.freeze({LS_BROKER:0,PAYMENTS:1,EPHEMERAL_MESSAGING:2,CARRIER_MESSAGING:3,BUG_REPORTER:4,MESSAGE_DENORMALIZATIONS:5,SEEN_HEADS:6,MEDIA_UPLOAD:7,SECURE_THREAD_SEEN_HEADS:8,WHATSAPP_THREAD:9,SECURE_THREAD_OVER_WA_MESSAGE_SEND:10,CONTACT_PRUNING:11,MEDIA_MANAGER:12,SECURE_THREAD_OVER_WA_ENCRYPTION:13,STORY_POST:14,CO_PRESENCE_HEARTBEAT:16,SECURE_THREAD_OVER_WA_GROUP_MANAGEMENT:17,ENCRYPTED_BACKUPS:23,ANONYMOUS_REQUEST:25,MESSAGE_ACTIONS:28,MESSAGE_UNSEND_ATTACHMENT_CLEANUP:39,IGD_INSTAMADILLO:40,PENDING_MESSAGE_SEND:46});i.default=e}),66);
__d("isNativeTask",["I64","LSPendingTasksPluginType"],(function(t,n,r,o,a,i,l){"use strict";var e,s="4",u="16",c=new Set([r("LSPendingTasksPluginType").IGD_INSTAMADILLO]);function d(t){var n=c.has((e||(e=o("I64"))).to_float(t.pluginType)),r=t.context===u||t.context===s;return n||r}l.default=d}),98);
__d("LSIterationHelpers",["FBLogger","LSMaybeSyncIteration","LSSynchronousPromise","ReStoreKeyComparer","ReStoreVaulting","isNativeTask"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new Set(["messages","attachments","reactions"]);function c(e){return u.has(e)}function d(e,t,n){return e&&t.name==="pending_tasks"&&n!=null&&r("isNativeTask")(n)}function m(e){for(var t of Object.keys(e))e[t]===void 0&&delete e[t];return e}function p(e,t,n){n===void 0&&(n="asc");var r=e.entries(new WeakMap,n);function a(){var e;return e={},e[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=a,e.next=function(){var e={done:!0},a=0,i="start",l=[],u=function(u){for(var r=function(){var e=a,r=t[e]||{},c=r.end,d=r.start,m=u.value[0];if(d&&i==="start"){var p=(s||(s=o("ReStoreKeyComparer"))).compareValue(m[e],d[0]),_=p*(n==="asc"?1:-1)<d[1];if(_){if(i="start_verify",l=m.slice(0,e),e===m.length-1&&p===0)return{v:void 0};var f=[].concat(l,[d[0]],d[1]&&n==="asc"||!d[1]&&n==="desc"?[(s||(s=o("ReStoreKeyComparer"))).MAX_KEY]:[]);return{v:o("LSMaybeSyncIteration").wrapNextValue(f)}}else i="check_end"}if(d&&i==="start_verify"&&!l.every(function(e,t){return(s||(s=o("ReStoreKeyComparer"))).compareValue(e,m[t])===0}))return a=0,i="start",{v:void 0};if(c&&(s||(s=o("ReStoreKeyComparer"))).compareValue(c[0],m[e])*(n==="asc"?1:-1)<c[1])return a=0,i="start",{v:o("LSMaybeSyncIteration").wrapNextValue([].concat(m.slice(0,e),n==="asc"?[(s||(s=o("ReStoreKeyComparer"))).MAX_KEY]:[]))};a++,i="start"},c;a<t.length;)if(c=r(),c)return c.v;return e=u,o("LSMaybeSyncIteration").STOP_ITERATION};return o("LSMaybeSyncIteration").iteratorLoop(r,u).then(function(){return e})},e}return a()}function _(e,t,n,o,a){return{delete:function(){return n.delete.apply(n,e)},item:t,update:function(l){var i=a&&c(o.name)?{transportKey:"FBBroker"}:{},s=babelHelpers.extends({},t,l,i);if(d(a,o,s))throw r("FBLogger")("messenger_web").mustfixThrow("cannot insert native task in dynamic mode");return n.upsert(e,m(s))}}}function f(e,t){var n;return n={},n[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return f(e,t)},n.next=function(){var n={done:!0},r=function(t){return n=t,o("LSMaybeSyncIteration").STOP_ITERATION};return o("LSMaybeSyncIteration").iteratorLoop(e,r).then(function(){if(n.done)return o("LSMaybeSyncIteration").iteratorLoop(t,r)}).then(function(){return n})},n}function g(e,t,n){var r,a=[{done:!0},{done:!0}],i=function(t){var e=a[t];return a[t]={done:!0},e};return r={},r[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return g(e,t,n)},r.next=function(){var r=function(t){return function(e){return t==="a"?a[0]=e:a[1]=e,o("LSMaybeSyncIteration").STOP_ITERATION}},l=o("LSSynchronousPromise").makeSynchronousPromise();return a[0].done&&(l=l.then(function(){return o("LSMaybeSyncIteration").iteratorLoop(e,r("a"))})),a[1].done&&(l=l.then(function(){return o("LSMaybeSyncIteration").iteratorLoop(t,r("b"))})),l.then(function(){if(a[0].done&&a[1].done)return{done:!0};if(a[0].done)return i(1);if(a[1].done)return i(0);var e=(s||(s=o("ReStoreKeyComparer"))).compareKey(a[0].value[0],a[1].value[0]);return e===0||e*(n==="asc"?1:-1)<0?i(0):i(1)})},r}var h=(e={},e[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return h},e.next=function(){return o("LSSynchronousPromise").makeSynchronousPromise({done:!0})},e);function y(e,t,n,a,i,l,s,u){var m=new Set,y=e.length>1,C=e.length===1&&e[0][1]==null,b=e.map(function(e){var r=e[0],s=e[1];return r.map(function(e){a.key_lookup===!0&&e.length!==0&&(s==null?"primary":"index "+s)+""+n.name+(JSON.stringify(e)||""),a.table_scan===!0&&e.length===0&&""+n.name;var r=e.map(function(e){return l(e,t)}),u=r.length===(s==null?n.primaryKeyIds:n.indexes[s]).length&&r.every(function(e){var t=e.end,n=e.start;return n&&t&&n[0]===t[0]&&n[1]===0&&t[1]===0});if(u){var c=function(){var e,t=!1;return e={},e[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=c,e.next=function(){var e;if(t)return o("LSSynchronousPromise").makeSynchronousPromise({done:!0});t=!0;var a=r.map(function(e){var t=e.start;return t[0]});return(e=s==null?i:i.index(s)).get.apply(e,a).then(function(e){if(!e)return{done:!0};var t=o("ReStoreVaulting").maybeUnvaultDbRow(e,n.name);return{done:!1,value:[a,t]}})},e};return c()}return p(s==null?i:i.index(s),r,t)})}).flat().reduce(function(n,r,o){var a=o===0&&n==null?h:n;return e.length>1?f(a,r):g(a,r,t)});function v(){var e;return e={},e[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=v,e.next=function(){var e=!0,t,a,l,p,f=function(i){e=!1;var r=i.value;if(a=r[0],l=r[1],t=C?a:n.primaryKeyIds.map(function(e){return l[e]}),d(s,n,l)){p=i,e=!0;return}if(c(n.name)&&s&&l!=null&&l.transportKey!=="FBBroker"){p=i,e=!0;return}if(y){var u=JSON.stringify(t);if(m.has(u)){e=!0;return}m.add(u)}return o("LSMaybeSyncIteration").STOP_ITERATION};return o("LSMaybeSyncIteration").iteratorLoop(b,f).then(function(){if(p!=null){var o=p.value[1].transportKey;r("FBLogger")("messenger_web").warn('Expected transportKey to equal ("FBBroker") in %s, provided transportKey: %s',u,o)}return e||t==null||l==null?{done:!0}:{done:!1,value:_(t,l,i,n,s)}})},e.return=function(){return Promise.resolve({done:!0,value:void 0})},e.throw=function(t){return Promise.reject(t)},e}return v()}l.isTranportKeyEnforcedTable=c,l.isNativePendingTaskViolation=d,l.stripUndefinedProperties=m,l.unionIterators=f,l.mergeIterators=g,l.fetch=y}),98);
__d("LSRuntimeDb",["FBLogger","LSIterationHelpers","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e.name.match(/secure_|inbox(?!_)/i)}function s(t,n,o,a,i,l,s){return{metadata:o,table:function(d){var c=o.tableNames[o.tableIds[d]];if(n===0&&e(c))throw r("FBLogger")("messenger_web").mustfixThrow("cannot access secure table from dynamic mode");return u(t,c,a,i,l,s)},transactionId:t.__internal__transaction_id}}function u(e,t,n,a,i,l){var s=e.transactionTable(t.name,a[a.length-1]);return{add:function(n){l==null||l.logTableOperation(t.name,"add"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample()),o("LSIterationHelpers").isTranportKeyEnforcedTable(t.name)&&i&&(n.transportKey="FBBroker");var e=s.add(n);return r("gkx")("6636")?e:Promise.resolve(e)},fetch:function(){l==null||l.logTableOperation(t.name,"fetch"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample());for(var e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return o("LSIterationHelpers").fetch(r.length===0?[[[[]],void 0]]:r,"asc",t,n,s,c,i,a.join(", "))},fetchDesc:function(){l==null||l.logTableOperation(t.name,"fetchDesc"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample());for(var e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return o("LSIterationHelpers").fetch(r.length===0?[[[[]],void 0]]:r,"desc",t,n,s,c,i,a.join(", "))},peekNextAutoIncrementId:function(){return l==null||l.logTableOperation(t.name,"peekNextAutoIncrementId"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample()),s.peekNextAutoIncrementId()},put:function(n){if(l==null||l.logTableOperation(t.name,"put"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample()),o("LSIterationHelpers").isTranportKeyEnforcedTable(t.name)&&i&&(n.transportKey="FBBroker"),o("LSIterationHelpers").isNativePendingTaskViolation(i,t,n))throw r("FBLogger")("messenger_web").mustfixThrow("cannot put native task via LS transport");var e=t.primaryKeyIds.map(function(e){if(n[e]!==void 0)return n[e];throw r("FBLogger")("messenger_web").mustfixThrow("primary key must be defined on object")}),a=s.delete.apply(s,e).then(function(){return s.add(o("LSIterationHelpers").stripUndefinedProperties(babelHelpers.extends({},n)))});return r("gkx")("6636")?a:Promise.resolve(a)}}}function c(e,t){if(typeof e=="object"&&!Array.isArray(e)){var n=e,o,a;if(t==="asc"){if(Object.prototype.hasOwnProperty.call(e,"gt")&&(o=[n.gt,1]),Object.prototype.hasOwnProperty.call(e,"gte")){if(o!=null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot specify both gt and gte");o=[n.gte,0]}if(Object.prototype.hasOwnProperty.call(e,"lt")&&(a=[n.lt,1]),Object.prototype.hasOwnProperty.call(e,"lte")){if(a!=null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot specify both lt and lte");a=[n.lte,0]}}else{if(Object.prototype.hasOwnProperty.call(e,"lt")&&(o=[n.lt,1]),Object.prototype.hasOwnProperty.call(e,"lte")){if(o!=null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot specify both lt and lte");o=[n.lte,0]}if(Object.prototype.hasOwnProperty.call(e,"gt")&&(a=[n.gt,1]),Object.prototype.hasOwnProperty.call(e,"gte")){if(a!=null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot specify both gt and gte");a=[n.gte,0]}}return{end:a,start:o}}return{end:[e,0],start:[e,0]}}l.LSRuntimeDb=s,l.parseConstraint=c}),98);
__d("MWFBLogger",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return r("FBLogger")("messenger_web",t)},s=function(t){return r("FBLogger")("messenger_web_media",t)},u=function(t){return r("FBLogger")("messenger_web_sharing",t)},c=function(t){return r("FBLogger")("messenger_web_calling",t)},d=function(t){return r("FBLogger")("mps",t)};l.MWLogger=e,l.MWMediaLogger=s,l.MWSharingLogger=u,l.MWCallingLogger=c,l.MPSLogger=d}),98);
__d("XPlatReactTextDecoder",[],(function(t,n,r,o,a,i){"use strict";var e=self.TextDecoder;i.TextDecoder=e}),66);
__d("LS",["ExecutionEnvironment","FBLogger","I64","LSDatascriptRuntimeTypes","LSDict","LSDynamicDependencies","LSInt64Lite","LSIterationOperations","LSJson","LSRuntimeDb","LSSynchronousPromise","LSVec","MWFBLogger","MessengerLogHistory","MetaConfig","ODS","ReStoreKeyComparer","XPlatReactTextDecoder","XPlatReactTextEncoder","base64Binary","cr:1088","cr:4790","emptyFunction","err","gkx","isPromise","justknobx","qpl","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h="LS_WEB",y=o("MessengerLogHistory").getInstance("ls");function C(e){return o("base64Binary").decode(e).buffer}var b={compareTo:function(t,n){for(var e=new Uint8Array(t),r=new Uint8Array(n),o=Math.min(e.length,r.length),a=0;a<o;a++){var i=e[a]-r[a];if(i!==0)return i}return e.length===r.length?0:e.length-r.length},eq:function(t,n){if(t==null&&n==null)return!0;if(t==null||n==null)return!1;var e=new Uint8Array(t),r=new Uint8Array(n);if(e.length!==r.length)return!1;for(var o=0;o<e.length;o++)if(e[o]!==r[o])return!1;return!0},ge:function(t,n){return b.compareTo(t,n)>=0},gt:function(t,n){return b.compareTo(t,n)>0},le:function(t,n){return b.compareTo(t,n)<=0},lt:function(t,n){return b.compareTo(t,n)<0},neq:function(t,n){return!b.eq(t,n)},of_string:function(t){if(t!=null){var e=new(o("XPlatReactTextEncoder")).TextEncoder;return e.encode(t).buffer}},to_string:function(t){if(t!=null){var e=new(o("XPlatReactTextDecoder")).TextDecoder;return e.decode(t)}}};function v(e){if(e.length!==1)throw r("FBLogger")("messenger_web").mustfixThrow("only literal strings supported");var t=e[0],n=parseInt(t.substr(-8),16),a=parseInt(t.substr(0,t.length-8),16);return(g||(g=o("I64"))).mk((n>>>1)+(a&1)*2147483648^-(n&1),a>>>1^-(n&1))}function S(e){if(e!=null&&typeof e=="object"){if("__sproc_name__"in e&&typeof e.__sproc_name__=="string")return e.__sproc_name__;if("__debugModuleSource"in e&&typeof e.__debugModuleSource=="string")return e.__debugModuleSource}return"<unknown_sproc>"}var R=(function(){var e=0;function t(t){var o=t.args,a=t.shouldLog,i=t.sprocName;if(n("cr:1088")==null||n("cr:1088").logStoredProcedureCall(i,o),!(!a||!n("cr:4790"))){var l=++e;return n("cr:4790").markerStart(r("qpl")._(25302991,"143"),l),n("cr:4790").markerAnnotate(r("qpl")._(25302991,"143"),{string:{name:i}},{instanceKey:l}),l}}function o(e,t,o){var a=e.shouldLog;!a||t==null||n("cr:4790")==null||n("cr:4790").markerEnd(r("qpl")._(25302991,"143"),o,t)}function a(e){return Math.random()*r("MetaConfig")._("10")<1}return{call:t,logSprocDone:o,shouldLogSproc:a}})(),L="Native operation timeout; transaction blocked",E=30*1e3;function k(t,n,a,i,l,g,I,T){l===void 0&&(l={}),g===void 0&&(g=void 0);var D=[],x=o("LSRuntimeDb").LSRuntimeDb(i,t,n,l,D,I,T),$=function(n,l){for(var e=arguments.length,s=new Array(e>2?e-2:0),u=2;u<e;u++)s[u-2]=arguments[u];var c;if(typeof l=="string"){if(c=a[l.toString()],c==null)throw r("FBLogger")("messenger_web").mustfixThrow("Attempted to call unimplemented native type op with type: %s and id: %s",n,l);if(c===o("LSDynamicDependencies").TOMBSTONE)throw r("err")("Concurrent native type op loading failed for: %s (retryable)",l);c.load&&(c=c.load())}else c=l;return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(c).then(function(e){return e.call.apply(e,[i,t].concat(s))})},P=function(n){for(var e=arguments.length,l=new Array(e>1?e-1:0),s=1;s<e;s++)l[s-1]=arguments[s];var u;if(typeof n=="string"){if(u=a[n+".bs"]||a[n+".nop"],u==null)throw r("FBLogger")("messenger_web").mustfixThrow("Attempted to call unimplemented native op with id: %s",n);if(u===o("LSDynamicDependencies").TOMBSTONE)throw r("err")("Concurrent native type op loading failed for: %s (retryable)",n);u.load&&(u=u.load())}else u=n;var c,d;return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(u).then(function(e){var n,a;c=(n=(a=e.__nop_name__)!=null?a:e==null?void 0:e.toString().slice(0,250))!=null?n:"<unknown nop name>",d=T==null?void 0:T.logNativeOperationStart(c);var s=o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(e.apply(void 0,[i,t].concat(l)));return(m||(m=r("isPromise")))(s)&&r("justknobx")._("3895")&&(f||(f=r("ExecutionEnvironment"))).isInBrowser?Promise.race([s,new Promise(function(e,t){return r("setTimeout")(function(){return t(r("err")(L))},E)})]):s}).then(function(e){var t;return(t=d)==null||t.end(),e},function(e){var t;(t=d)==null||t.end(),r("FBLogger")("messenger_web").catching(e).addMetadata(h,"NATIVE_OP_ID",c).mustfixThrow("Native operation %s failed: was_timeout: %s, is_in_worker: %s",c,(e==null?void 0:e.message)===L,(f||(f=r("ExecutionEnvironment"))).isInWorker)})},N=function(t){return t.slice(1).reduce(function(e,n){return typeof n!="function"?(r("FBLogger")("messenger_web").mustfix("Non-function passed (%s, type %s) in sequence (%s)",n,typeof n,JSON.stringify(t.map(function(e){return typeof e}))),e):e.then(n)},t[0]())},M=function(t,n){return t.slice(n)},w={Map:r("LSDict"),blob:C,blobs:b,constructor:{n:v},count:o("LSIterationOperations").count,createArray:function(){return r("LSVec").ofArray([])},createArrayWithElements:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r("LSVec").ofArray(t)},db:x,filter:o("LSIterationOperations").filter,forEach:o("LSIterationOperations").forEach,groupBy:o("LSIterationOperations").groupBy,i64:r("LSInt64Lite"),islc:o("LSIterationOperations").slice,like:function(t,n){var e=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/%/g,".*").replace(/_/g,".");return RegExp(e).test(t)},logger:function(t){if(g)return{debug:g,info:g,mustfix:g,warn:g};var e=o("MWFBLogger").MWLogger(),n=t.startsWith("epoch mismatch"),a=t.startsWith("cursor mismatch");if(n||a){var i=function(t){y.error(t,"error");var e=(function(){return n?"epoch_mismatch":a?"cursor_mismatch":"fixme_could_not_produce_key"})();(p||(p=o("ODS"))).bumpEntityKey(3185,"lsplatform",e)};return{debug:function(t){return y.debug(t)},info:function(t){return y.debug(t)},mustfix:i,warn:i}}else return r("gkx")("26382")||(e.info=r("emptyFunction")),e},loopAsync:function(n,a){function t(i){if(r("LSInt64Lite").lt(i,n)){for(var l=i,u=o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a(l));!(m||(m=r("isPromise")))(u);){if(l=r("LSInt64Lite").add(l,v(e||(e=babelHelpers.taggedTemplateLiteralLoose(["2"])))),!r("LSInt64Lite").lt(l,n))return o("LSSynchronousPromise").makeSynchronousPromise(void 0);u=o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a(l))}return u.then(function(){return t(r("LSInt64Lite").add(l,v(s||(s=babelHelpers.taggedTemplateLiteralLoose(["2"])))))})}return o("LSSynchronousPromise").makeSynchronousPromise(void 0)}return t(v(u||(u=babelHelpers.taggedTemplateLiteralLoose(["0"]))))},loopSync:function(t,n){for(var e=v(c||(c=babelHelpers.taggedTemplateLiteralLoose(["0"])));r("LSInt64Lite").lt(e,t);e=r("LSInt64Lite").add(e,v(d||(d=babelHelpers.taggedTemplateLiteralLoose(["2"])))))n(e)},merge:function(){function e(e,t){return(_||(_=o("ReStoreKeyComparer"))).compareValue(e,t)>0?e:t}function t(e,t){return(_||(_=o("ReStoreKeyComparer"))).compareValue([e[0],-e[1]],[t[0],-t[1]])<0?e:t}for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i=r.reduce(function(n,r){var a=o("LSRuntimeDb").parseConstraint(r,"asc");return{end:n.end&&a.end?t(a.end,n.end):a.end||n.end,start:n.start&&a.start?e(a.start,n.start):a.start||n.start}},{}),l=i.start?i.start[1]?{gt:i.start[0]}:{gte:i.start[0]}:{};return i.end?i.end[1]?babelHelpers.extends({},l,{lt:i.end[0]}):babelHelpers.extends({},l,{lte:i.end[0]}):l},n:v,nativeOperation:P,nativeTypeOperation:$,notnull:function(t){if(t===null)throw r("FBLogger")("messenger_web").mustfixThrow("value should not be null");return t},print:function(t){},resolve:function(t){return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(t)},resolveGuaranteeAsync:function(t){var e;return((e=self.Promise)!=null?e:Promise).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(t))},rm:r("LSInt64Lite").of_int32(t),sequence:N,slice:M,sortBy:o("LSIterationOperations").sortBy,storedProcedure:function(s){for(var e=arguments.length,u=new Array(e>1?e-1:0),c=1;c<e;c++)u[c-1]=arguments[c];var d;if(typeof s=="string"){if(d=a[s],d==null)throw r("FBLogger")("messenger_web").mustfixThrow("Attempted to call unimplemented stored procedure with id: %s",s);if(d===o("LSDynamicDependencies").TOMBSTONE)throw r("err")("Concurrent sproc loading failed for: %s (retryable)",s);d.load&&(d=d.load())}else d=s;var m=w;switch(t){case 0:m=k(2,n,a,i,l,g,I);break;case 2:m=k(1,n,a,i,l,g,I);break}var p,_,f,y;return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(d).then(function(e){return _=S(e),f=R.shouldLogSproc(_),D.push(_),p=R.call({args:u,shouldLog:f,sprocName:_}),y=T==null?void 0:T.logSprocCallStart(_,o("LSDatascriptRuntimeTypes").TopLevelCallOrigin.UI),i.reportUsedTablesForSyncAccess(e.__tables__),e.apply(void 0,u.concat([m]))}).then(function(e){var t;return D.pop(),R.logSprocDone({args:u,shouldLog:f,sprocName:_},p,2),(t=y)==null||t.end(),e},function(e){var t;throw D.pop(),R.logSprocDone({args:u,shouldLog:f,sprocName:_},p,3),(t=y)==null||t.end(),r("FBLogger")("messenger_web").catching(e).addMetadata(h,"SPROC_STACK",D.join(`
`)).warn("Sproc %s failed",_),e})},throw:function(t){throw r("FBLogger")("messenger_web").mustfixThrow(t)},toArray:o("LSIterationOperations").toArray,toJSON:function(t){return o("LSJson").stringify(t)}};return w}k.n=v,l.default=k}),98);
__d("LSAuthorityLevel",[],(function(t,n,r,o,a,i){var e=Object.freeze({OPTIMISTIC:20,CLIENT_PARTIAL:40,SERVER_PARTIAL:60,AUTHORITATIVE_PENDING_REPLACEMENT:75,AUTHORITATIVE:80,CLIENT_AUTHORITATIVE_DELETE:100});i.default=e}),66);
__d("LSBitOffset",["I64","LSBitFlag"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){return o("LSBitFlag").set((e||(e=o("I64"))).lsl_(e.one,e.to_int32(t)),n)}function u(t,n){return o("LSBitFlag").clear((e||(e=o("I64"))).lsl_(e.one,e.to_int32(t)),n)}l.set=s,l.clear=u,l.empty=(e||(e=o("I64"))).zero}),98);
__d("LSContactBitOffset",["I64","LSBitFlag","LSBitOffset"],(function(t,n,r,o,a,i,l){"use strict";var e,s=["capabilities","capabilities2"];function u(e,t){return c(e,t,!1)}function c(t,n,r){var a,i=n.capabilities,l=n.capabilities2;if(t>=64){var s;return l==null?r:o("LSBitFlag").has((e||(e=o("I64"))).lsl_(e.one,t-64),(s=n.capabilities2)!=null?s:o("LSBitOffset").empty)}return i==null?r:o("LSBitFlag").has((e||(e=o("I64"))).lsl_(e.one,t),(a=n.capabilities)!=null?a:o("LSBitOffset").empty)}function d(t,n){return o("LSBitFlag").has((e||(e=o("I64"))).lsl_(e.one,t-64),n!=null?n:o("LSBitOffset").empty)}l.contactCapabilityFields=s,l.has=u,l.hasWithDefault=c,l.contactCapabilitiesHas=d}),98);
__d("LSContactBlockedByViewerStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNBLOCKED:0,MESSAGE_BLOCKED:1,FULLY_BLOCKED:2});i.default=e}),66);
__d("LSContactGender",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,FEMALE:1,MALE:2,NEUTER:3});i.default=e}),66);
__d("LSContactIdType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,FBID:1,SMS_LOCAL_ID:2});i.default=e}),66);
__d("LSContactType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,USER:1,PAGE:2,PAGE_PERSONA:3});i.default=e}),66);
__d("LSContactViewerRelationship",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,NOT_CONTACT:1,CONTACT_OF_VIEWER:2,FACEBOOK_FRIEND:3,SOFT_CONTACT:4});i.default=e}),66);
__d("LSContactWorkForeignEntityType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,FOREIGN:1,NOT_FOREIGN:2,NOT_FOREIGN_LIMITED:3});i.default=e}),66);
__d("LSDatabaseProviderType",[],(function(t,n,r,o,a,i){"use strict";function e(e){return l(e.persistenceTypes)}function l(e){return e.includes("indexeddb")}i.isProviderPersisted=e,i.hasPersistentType=l}),66);
__d("LSJSONOp",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({BLOCK:1,LOAD:2,STORE:3,STORE_ARRAY:4,CALL_STORED_PROCEDURE:5,CALL_NATIVE_TYPE_OPERATION:6,CALL_NATIVE_OPERATION:7,LIST:8,UNDEFINED:9,INFINITY:10,NAN:11,RETURN:12,BOOL_TO_STR:13,BLOBS_TO_STRING:14,BLOBS_OF_STRING:15,TO_BLOB:16,I64_OF_FLOAT:17,I64_TO_FLOAT:18,I64_FROM_STRING:19,I64_TO_STRING:20,READ_GK:21,READ_QE:22,IF:23,OR:24,AND:25,NOT:26,IS_NULL:27,ENFORCE_NOT_NULL:28,GENERIC_EQUAL:29,I64_EQUAL:30,BLOB_EQUAL:31,GENERIC_NOT_EQUAL:32,I64_NOT_EQUAL:33,BLOB_NOT_EQUAL:34,GENERIC_GREATER_THAN:35,I64_GREATER_THAN:36,BLOB_GREATER_THAN:37,GENERIC_GREATER_THAN_OR_EQUAL:38,I64_GREATER_THAN_OR_EQUAL:39,BLOB_GREATER_THAN_OR_EQUAL:40,GENERIC_LESS_THAN:41,I64_LESS_THAN:42,BLOB_LESS_THAN:43,GENERIC_LESS_THAN_OR_EQUAL:44,I64_LESS_THAN_OR_EQUAL:45,BLOB_LESS_THAN_OR_EQUAL:46,THROW:47,LOG_CONSOLE:48,LOGGER_LOG:49,NATIVE_OP_ARRAY_CREATE:50,NATIVE_OP_ARRAY_APPEND:51,NATIVE_OP_ARRAY_GET_SIZE:52,NATIVE_OP_MAP_CREATE:53,NATIVE_OP_MAP_GET:54,NATIVE_OP_MAP_SET:55,NATIVE_OP_MAP_KEYS:56,NATIVE_OP_MAP_DELETE:57,NATIVE_OP_MAP_HAS:58,NATIVE_OP_STR_JOIN:59,NATIVE_OP_CURRENT_TIME:60,NATIVE_OP_JSON_STRINGIFY:61,NATIVE_OP_RNG_NUM:62,NATIVE_OP_LOCALIZATION_SUPPORTED:63,NATIVE_OP_LOCALIZATION_SUPPORTED_V2:64,NATIVE_OP_RESOLVE_LOCALIZED:65,NATIVE_OP_RESOLVE_LOCALIZED_V2:66,ADD:68,I64_ADD:69,I64_CAST:70,READ_JUSTKNOB:71,READ_IGGK:72,GET_RUN_MODE:73,STR_TRIM:74,STR_REPLACE:75,JOIN:76,STR_LIKE:77,LENGTH:78,IN:79,IN_VEC:80,SUB:81,MUL:82,DIV:83,MOD:84,I64_SUB:85,I64_MUL:86,I64_DIV:87,I64_MOD:88,I64_IN:89,I64_IN_VEC:90,BITWISE_LEFT_SHIFT:91,BITWISE_RIGHT_SHIFT:92,ARITHMETIC_RIGHT_SHIFT:93,BITWISE_AND:94,BITWISE_OR:95,BITWISE_XOR:96,TERNARY:97,XOR:98,NULLISH_COALESE:99,READ_COLUMN:100,READ_COLUMN_REF:101,READ_GROUP_COUNT:102,COMMENT:103,IMPORT:104,LOOP:105,QUERY_COMPARISON_EQUAL:106,QUERY_COMPARISON_NOT_EQUAL:107,QUERY_COMPARISON_GREATER_THAN:108,QUERY_COMPARISON_GREATER_THAN_OR_EQUAL:109,QUERY_COMPARISON_LESS_THAN:110,QUERY_COMPARISON_LESS_THAN_OR_EQUAL:111,QUERY_MERGE_CONSTRAINTS:112,QUERY_FETCH_ROWS:113,QUERY_FILTER_ROWS:114,QUERY_SORT_ROWS_BY:115,QUERY_DELETE_ROWS:116,QUERY_SLICE_ROWS:117,QUERY_COUNT_ROWS:118,QUERY_PEEK_NEXT_ROW_ID:119,QUERY_UPDATE_ROWS:120,QUERY_INSERT_ROWS:121,QUERY_PUT_ROWS:122,QUERY_FOREACH_ROW:123,QUERY_SELECT_MATCH_ROW:124,QUERY_CURSOR_SLICE:125,QUERY_GROUP_BY:126,SUB_STRING:127}),l=e;i.default=l}),66);
__d("LSMaybeDeferredImports",["LSSynchronousPromise"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return u(e)}function s(e){return u(e)}function u(e){var t=null;return{load:function(){return t==null?e.load().then(function(e){return t=e,t}):o("LSSynchronousPromise").makeSynchronousPromise(t)}}}l.wrapReqDeferredMaybeSync=e,l.wrapJSResourceForInteractionMaybeSync=s}),98);
__d("LSSelectOrder",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["ASC","DESC"]),l=e;i.default=l}),66);
__d("LSDatascriptJSONEval",["FBLogger","JSResourceForInteraction","LS","LSMaybeDeferredImports","getErrorSafe","isPromise"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=o("LSMaybeDeferredImports").wrapJSResourceForInteractionMaybeSync(r("JSResourceForInteraction")("LSLocalize").__setRef("LSDatascriptJSONEval"));function d(e,t,n){if((u||(u=r("isPromise")))(e))return e.then(t,n);try{return t(e)}catch(e){var o=r("getErrorSafe")(e);if(n)return n(o);throw o}}var m=(function(){function t(e,t,n,o){var a=this;o===void 0&&(o=[]),this.$4={},this.$5=[],this.$6=null,this.$7=function(e){return d(a.$8(e),function(e){return e},function(t){throw r("FBLogger")("messenger_web").catching(t).mustfix("Error evaluating step op: %s",Array.isArray(e)?e[0]:"<primitive value>"),t})},this.$1=t,this.$2=e,this.$3=n;for(var i=0;i<o.length;i++)this.$4[i]=o[i]}var o=t.prototype;return o.eval=function(){return this.$2==null?this.$1.resolveGuaranteeAsync([]):this.$1.resolveGuaranteeAsync(this.$7(this.$2.step))},o.$8=function(o){var t=this,a,i,l,u,m,p,_,f,g,h,y,C;if(!Array.isArray(o))return o;var b=o[0],v=babelHelpers.arrayLikeToArray(o).slice(1),S=v;switch(b){case 8:return S.map(this.$7);case 2:return this.$4[S[0]];case 3:return d(this.$7(S[1]),function(e){return t.$4[S[0]]=e});case 4:return d(this.$7(S[2]),function(e){for(var n=S[0],r=S[1],o=0;o<r;o++,n++)t.$4[n]=e[o];return e});case 12:{for(var R=S[0],L=S[1],E=[],k=R;k<L;k++)E[k]=this.$4[k];return E}case 1:{for(var I,T=function(n){I=d(I,function(){return t.$7(S[n])})},D=0;D<S.length;D++)T(D);return I}case 5:return(a=this.$1).storedProcedure.apply(a,S.map(this.$7));case 6:return(i=this.$1).nativeTypeOperation.apply(i,S.map(this.$7));case 7:return(l=this.$1).nativeOperation.apply(l,S.map(this.$7));case 9:return;case 10:return 1/0;case 11:return NaN;case 13:return this.$7(S[0])?"1":"0";case 14:return this.$1.blobs.to_string(this.$7(S[0]));case 15:return this.$1.blobs.of_string(this.$7(S[0]));case 16:return this.$1.blob(this.$7(S[0]));case 17:return this.$1.i64.of_float(this.$7(S[0]));case 18:{var x=this.$7(S[0]);return x!=null?this.$1.i64.to_float(x):void 0}case 19:return this.$1.i64.from_string(this.$7(S[0]));case 70:return this.$1.i64.cast(this.$7(S[0]));case 20:return this.$1.i64.to_string(this.$7(S[0]));case 21:return(u=this.$3)==null||(u=u.gk)==null?void 0:u[S[0]];case 22:{var $,P=S[0],N=S[1],M=S[2],w=S[3],A=($=this.$3)==null||($=$.qe)==null||($=$[P])==null||($=$[N])==null?void 0:$[M];if(A==null)return A;switch(w){case"BOOL":case"STR":return A;case"I64":{if(typeof A!="object")throw r("FBLogger")("messenger_web").mustfixThrow("Cannot convert value to string");return this.$1.i64.from_string(A.toString())}}return}case 23:return this.$7(S[0])?this.$7(S[1]):S[2]!=null?this.$7(S[2]):void 0;case 24:return this.$7(S[0])||this.$7(S[1]);case 25:return this.$7(S[0])&&this.$7(S[1]);case 26:return!this.$7(S[0]);case 27:return this.$7(S[0])==null;case 28:return this.$1.notnull(this.$7(S[0]));case 29:return this.$7(S[0])===this.$7(S[1]);case 30:return this.$1.i64.eq(this.$7(S[0]),this.$7(S[1]));case 31:return this.$1.blobs.eq(this.$7(S[0]),this.$7(S[1]));case 32:return this.$7(S[0])!==this.$7(S[1]);case 33:return this.$1.i64.neq(this.$7(S[0]),this.$7(S[1]));case 34:return this.$1.blobs.neq(this.$7(S[0]),this.$7(S[1]));case 35:return this.$7(S[0])>this.$7(S[1]);case 36:return this.$1.i64.gt(this.$7(S[0]),this.$7(S[1]));case 37:return this.$1.blobs.gt(this.$7(S[0]),this.$7(S[1]));case 38:return this.$7(S[0])>=this.$7(S[1]);case 39:return this.$1.i64.ge(this.$7(S[0]),this.$7(S[1]));case 40:return this.$1.blobs.ge(this.$7(S[0]),this.$7(S[1]));case 41:return this.$7(S[0])<this.$7(S[1]);case 42:return this.$1.i64.lt(this.$7(S[0]),this.$7(S[1]));case 43:return this.$1.blobs.lt(this.$7(S[0]),this.$7(S[1]));case 44:return this.$7(S[0])<=this.$7(S[1]);case 45:return this.$1.i64.le(this.$7(S[0]),this.$7(S[1]));case 46:return this.$1.blobs.le(this.$7(S[0]),this.$7(S[1]));case 47:return this.$1.throw(S[0]);case 48:return this.$1.print(this.$7(S[0]));case 49:{var F=this.$7(S[0]),O=S[1],B=this.$1.logger(F);switch(O){case"mustfix":return B.mustfix(F);case"info":return B.info(F);case"warn":return B.warn(F);case"debug":return B.debug(F);default:throw r("FBLogger")("messenger_web").mustfixThrow("Invalid logger level %s",O)}}case 50:return S.length===0?this.$1.createArray():(m=this.$1).createArrayWithElements.apply(m,this.$7(S[0]));case 51:{var W=this.$7(S[0]);return W.push(this.$7(S[1])),W}case 52:return this.$1.i64.of_int32(this.$7(S[0]).length);case 53:return new this.$1.Map;case 54:return this.$7(S[0]).get(this.$7(S[1]));case 55:return this.$7(S[0]).set(this.$7(S[1]),this.$7(S[2]));case 56:return this.$7(S[0]).keys();case 57:return this.$7(S[0]).delete(this.$7(S[1]));case 58:return this.$7(S[0]).has(this.$7(S[1]));case 59:return this.$7(S[0]).join(this.$7(S[1])||"");case 60:return this.$1.i64.of_float(Date.now());case 61:return this.$1.toJSON(this.$7(S[0]));case 62:return this.$1.i64.random();case 63:case 64:return!0;case 65:return c.load().then(function(e){var n=e.localizeV1Async;return n(t.$7(S[0]),t.$7(S[1]))});case 66:return c.load().then(function(e){var n=e.localizeV2Async;return n(t.$7(S[0]),t.$7(S[1]))});case 68:return this.$7(S[0])+this.$7(S[1]);case 69:return this.$1.i64.add(this.$7(S[0]),this.$7(S[1]));case 71:return(p=this.$3)==null||(p=p.justknob)==null?void 0:p[S[0]];case 72:return(_=this.$3)==null||(_=_.iggk)==null?void 0:_[S[0]];case 100:return this.$5[S[0]][S[1]];case 101:{if(this.$6==null)throw r("FBLogger")("messenger_web").mustfixThrow("Attempting to read column ref when none exist!");return this.$6[S[0]]}case 102:return this.$5[this.$7(S[0])].group_count;case 73:return this.$1.rm;case 74:return this.$7(S[0]).trim();case 75:return this.$7(S[0]).split(this.$7(S[1])).join(this.$7(S[2]));case 76:return S.map(this.$7).join("");case 77:return this.$1.like(this.$7(S[0]),this.$7(S[1]));case 78:return[0,this.$7(S[0]).length];case 79:{var q=S.map(this.$7),U=q[0],V=babelHelpers.arrayLikeToArray(q).slice(1);return V.includes(U)}case 80:return this.$7(S[1]).includes(this.$7(S[0]));case 81:return this.$7(S[0])-this.$7(S[1]);case 82:return this.$7(S[0])*this.$7(S[1]);case 83:return this.$7(S[0])/this.$7(S[1]);case 84:return this.$7(S[0])%this.$7(S[1]);case 91:return this.$1.i64.lsl_(this.$7(S[0]),this.$1.i64.to_int32(this.$7(S[1])));case 92:return this.$1.i64.lsr_(this.$7(S[0]),this.$1.i64.to_int32(this.$7(S[1])));case 93:return this.$1.i64.asr_(this.$7(S[0]),this.$1.i64.to_int32(this.$7(S[1])));case 94:return this.$1.i64.and_(this.$7(S[0]),this.$7(S[1]));case 95:return this.$1.i64.or_(this.$7(S[0]),this.$7(S[1]));case 96:return this.$1.i64.xor(this.$7(S[0]),this.$7(S[1]));case 85:return this.$1.i64.sub(this.$7(S[0]),this.$7(S[1]));case 86:return this.$1.i64.mul(this.$7(S[0]),this.$7(S[1]));case 87:return this.$1.i64.div(this.$7(S[0]),this.$7(S[1]));case 88:return this.$1.i64.mod_(this.$7(S[0]),this.$7(S[1]));case 89:{var H=S.map(this.$7),G=H[0],z=babelHelpers.arrayLikeToArray(H).slice(1);return z.some(function(e){return t.$1.i64.eq(G,e)})}case 90:{var j=this.$7(S[0]);return this.$7(S[1]).some(function(e){return t.$1.i64.eq(j,e)})}case 97:return this.$7(S[0])?this.$7(S[1]):this.$7(S[2]);case 98:{var K=this.$7(S[0]),Q=this.$7(S[1]);return(K||Q)&&!(K&&Q)}case 99:return(f=this.$7(S[0]))!=null?f:this.$7(S[1]);case 103:return;case 104:return n.call(null,S[0]);case 105:{for(var X=this.$7(S[0]),Y=S[1],J=r("LS").n,Z,ee=function(n){Z=d(Z,function(){return t.$4[Y]=n,t.$7(S[2])})},te=J(e||(e=babelHelpers.taggedTemplateLiteralLoose(["0"])));this.$1.i64.lt(te,X);te=this.$1.i64.add(te,J(s||(s=babelHelpers.taggedTemplateLiteralLoose(["2"])))))ee(te);return Z}case 106:return this.$7(S[0]);case 107:throw r("FBLogger")("messenger_web").mustfixThrow("not equal query comparison operator not supported");case 108:return{gt:this.$7(S[0])};case 109:return{gte:this.$7(S[0])};case 110:return{lt:this.$7(S[0])};case 111:return{lte:this.$7(S[0])};case 112:return S.length===1?this.$7(S[0]):(g=this.$1).merge.apply(g,S.map(this.$7));case 113:{var ne=S[0],re=S[1],oe=babelHelpers.arrayLikeToArray(S).slice(2),ae=oe.map(this.$7);switch(re){case"ASC":return(h=this.$1.db.table(ne)).fetch.apply(h,ae);case"DESC":return(y=this.$1.db.table(ne)).fetchDesc.apply(y,ae)}return}case 114:return this.$1.filter(this.$7(S[0]),function(e){t.$6=e;var n=t.$7(S[1]);return t.$6=null,n});case 115:return(C=this.$1).sortBy.apply(C,S.map(this.$7));case 116:return this.$1.forEach(this.$7(S[0]),function(e){return e.delete()});case 117:return this.$1.islc(this.$7(S[0]),0,this.$7(S[1]));case 118:return this.$1.count(this.$7(S[0]));case 119:return this.$1.db.table(S[0]).peekNextAutoIncrementId();case 120:return this.$1.forEach(this.$7(S[0]),function(e){var n=e.item,r=e.update,o={};t.$6=n;for(var a=1;a<S.length;a+=2)o[S[a]]=t.$7(S[a+1]);return t.$6=null,r(o)});case 121:{for(var ie=S[0],le={},se=1;se<S.length;se+=2)le[S[se]]=this.$7(S[se+1]);return this.$1.db.table(ie).add(le)}case 122:{for(var ue=S[0],ce={},de=1;de<S.length;de+=2)ce[S[de]]=this.$7(S[de+1]);return this.$1.db.table(ue).put(ce)}case 123:return this.$1.forEach(this.$7(S[0]),function(e){var n=e.item;return t.$5[S[1]]=n,t.$7(S[2])});case 124:return this.$7(S[0]).next().then(function(e){var n=e.done,r=e.value;if(n)return t.$7(S[3]);var o=S[1];return o!=null?(t.$5[o]=r.item,t.$7(S[2])):0});case 125:return this.$7(S[0]).slice(0,this.$7(S[1]));case 126:return this.$1.groupBy(this.$7(S[0]),S[1]).forEach(function(e){return t.$5[S[2]]=e,t.$7(S[3])});case 127:return this.$7(S[0]).substr(this.$1.i64.to_int32(this.$7(S[1])),this.$1.i64.to_int32(this.$7(S[2])))}},t})();l.default=m}),98);
__d("LSFactory",["ExecutionEnvironment","LS","LSDynamicDependencies","LSMetadata","cr:8709"],(function(t,n,r,o,a,i,l){"use strict";var e,s={dynamic:!1};function u(t,a){a===void 0&&(a=s);var i=r("LS")(1,o("LSMetadata").schema,o("LSDynamicDependencies").cachedModules,t,void 0,void 0,a.dynamic,a.lsRuntimeLogger);return n("cr:8709")!=null&&(e||(e=r("ExecutionEnvironment"))).isInBrowser?n("cr:8709").wrapSprocInvocationWithProfiler(i):i}l.default=u}),98);
__d("LSProgramTarget",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({DASM:1,JS:2,JSON:3}),l=e;i.default=l}),66);
__d("MWPBumpEntityKey",["CurrentAppID","ODS"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){(e||(e=o("ODS"))).bumpEntityKey(3185,t,n)}function u(e,t){var n=o("CurrentAppID").getAppID(),r=n==null?"unknown":n;return s(e,t+"."+r)}l.bumpEntityKey=s,l.bumpEntityKeyWithAppId=u}),98);
__d("LSDatascriptEvaluator",["ExecutionEnvironment","FBLogger","LSDatascriptJSONEval","LSFactory","MWPBumpEntityKey","cr:8018","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(t){return r("FBLogger")("messenger_web","invalid_sync_script_target").mustfixThrow('Received a sync script with an illegal target of "%s"',t!=null?t:-1)};function u(t,o){var a=JSON.parse(o),i=t!=null?t:{gk:{},iggk:{},justknob:{},qe:{}};return function(t){var o=n("cr:8018")!=null?new(n("cr:8018")):void 0,l=o==null?void 0:o.start({bool:{isInWorker:(e||(e=r("ExecutionEnvironment"))).isInWorker},string:{dynamic:String(!0)}}),s=r("LSFactory")(t,{dynamic:!0,lsRuntimeLogger:o});return new(r("LSDatascriptJSONEval"))(a,s,i).eval().finally(function(){return l==null||l.end(),Promise.resolve()})}}function c(e,t,n){if(n==null)throw s(n);switch(n){case 3:return u(e,t);default:throw s(n)}}function d(e){return function(t){if(t==null)throw r("FBLogger")("messenger_web").mustfixThrow("Error creating eval function, db is undefined. This is likely a currying error in the definition for LSDatascriptEvaluator");return function(n){var a=n.experiments,l=n.priority,s=n.syncScript,u=n.target,d=n.taskNames,m=a!=null?JSON.parse(a):null;try{var p=c(m,s,u);return t.runInTransaction(function(t){return e&&e(),p(t)},"readwrite",l,{taskNames:d,type:"sync_script"},i.id+":138")}catch(e){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform","eval_datascript_failure");var _=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").catching(_).mustfix("Error executing sync script"),e}}}}d.__debugModuleName="LSDatascriptEvaluator",l.default=d}),98);
__d("LSDatascriptEvaluatorEager",["LSDatascriptEvaluator","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return(e||(e=n("Promise"))).resolve(r("LSDatascriptEvaluator"))}l.default=s}),98);
__d("LSDeserializeFromJsonIntoDictionaryV2.nop",["FBLogger","LSDict","LSJson","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l){var t=o("LSJson").parse(l,{useLSTypes:!0});if(t instanceof r("LSDict"))return(e||(e=n("Promise"))).resolve([t]);throw r("FBLogger")("messenger_web").mustfixThrow("unexpected Dictionary type")};s.__nop_name__="LSDeserializeFromJsonIntoDictionary",l.default=s}),98);
__d("LSGroupParticipantJoinState",[],(function(t,n,r,o,a,i){var e=Object.freeze({MEMBER:0,PENDING:1,INVITED:2});i.default=e}),66);
__d("LSMessageReplySourceTypeV2",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,MESSAGE:1,STORY:2,FORWARD:3,FB_STORY_SHARE:4,IG_STORY_SHARE:5,STORY_BASE64_ENCODED:6,LIGHTWEIGHT_STATUS:7,CLOSE_FRIENDS:8,XMA:9,IG_NOTE:10,CLOSE_FRIENDS_NOTE_REPLY:11,LIGHTWEIGHT_STATUS_REACTION:12,FB_FEED_POST:13,HIGHLIGHTS_TAB_POST_REPLY:14,HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:15,SHARED_ALBUM:16,AVATAR_DETAIL:17,NOTE_REPLY_ARMADILLO:18,FB_STORY_MENTION:22,EXPIRED_STORY:23,FB_PRODUCER_STORY_REPLY:24,FB_POST_MENTION:25,AI_PERSONA_NOTE_REPLY:26,AI_PERSONA_NOTE_REACTION:27,FB_MSGR_NOTE:28,IG_COLLAB_INVITE:29,FB_QUICKSNAP:30});i.default=e}),66);
__d("LSMessageSendStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,SENDING_TO_SERVER:1,SERVER_RECEIVED:2,NON_RETRIABLE_ERROR:4,RETRIABLE_ERROR:5});i.default=e}),66);
__d("LSPlatformDefaultUnderlyingApi",["Promise","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return r("emptyFunction")}function u(){return(e||(e=n("Promise"))).resolve()}var c={cleanup:r("emptyFunction"),logEvent:function(t){},onConnectionStatusChange:s,onReconnect:s,publish:u,subscribe:s};l.default=c}),98);
__d("LSStreamGroupRef",["I64","LSMailboxInitialSyncCursor"],(function(t,n,r,o,a,i,l){"use strict";var e,s={connectionStatusChangeHandler:null,current:null,currentStreamGroupId:null,publishBuffer:new Map,reconnectHandler:null,status:"Disconnected",subscribers:new Map};function u(){return(e||(e=o("I64"))).equal((e||(e=o("I64"))).of_int32(1),o("LSMailboxInitialSyncCursor").syncChannel)?"mqtt":s.current==null||s.current.streamGroupLoggingContext.sgTransportId==null?"null":s.current.streamGroupLoggingContext.sgTransportId}function c(){return s.status}l.streamGroupRef=s,l.getTransportId=u,l.getTransportStatus=c}),98);
__d("MessengerPWAVersionForUserAgent",["isMessengerPWA"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e,t=r("isMessengerPWA")();if(t){var n=(e=new URL(window.location.href).searchParams.get("__pwa"))!=null?e:"1.0.0";return n}}l.default=e}),98);
__d("LSPlatformRealtimeTransport",["I64","LSDynamicDependencies","LSIntEnum","LSJson","LSMailboxInitialSyncCursor","LSShape","LSStreamGroupRef","MessengerPWAVersionForUserAgent","NetworkStatus","Promise","QuickPerformanceLogger","Random","clearTimeout","promiseDone","qpl","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=r("qpl")._(701246226,"1285"),m="LSPlatformRealtimeTransport.NotConnected",p="LSPlatformRealtimeTransport.Timeout";function _(e){var t=new Map;return{getAll:function(){return Array.from(t.values())},getOrStart:function(r){var n=r.toString(),o=t.get(n);return o==null&&(o=e(r),t.set(n,o)),o}}}function f(e){}function g(t,a,i){var l=new Map,m={contents:f},g=new Set,h=new Map,y=[],C=_(function(e){var n=t(e,i);return y.push(n.subscribe(function(e){var t=JSON.parse(e),n=o("LSDynamicDependencies").downloadBootloaderDependencies(t.sp,t.nop,t.ntop),a=t.request_id,i;if(a!=null){var s=l.get(a);if(s==null)i=!1;else{r("clearTimeout")(s.timeoutId),s.resolve({downloadTask:n,payload:t,type:"taskresponse"}),l.delete(a);var u=s.instanceKey;(c||(c=r("QuickPerformanceLogger"))).markerPoint(d,"response",{instanceKey:u}),c.markerEnd(d,2,u),i=!0}}else i=!1;if(!i){Array.from(h.entries()).forEach(function(e){return e[1](n,t)});return}})),y.push(n.onReconnect(function(e){return m.contents(e)})),y.push(n.onConnectionStatusChange(function(e){g.forEach(function(t){return t(e)})})),n});return C.getOrStart((u||(u=o("LSIntEnum"))).unwrapIntEnum(o("LSMailboxInitialSyncCursor").syncChannel)),{cleanup:function(){y.forEach(function(e){return e()}),C.getAll().forEach(function(e){return e.cleanup()})},logEvent:function(t){C.getAll().forEach(function(e){return e.logEvent(t)})},onConnectionStatusChange:function(t){return g.add(t),function(){g.delete(t)}},onReconnect:function(t){return m.contents=t,function(){m.contents=f}},publish:function(i){var t=i.databaseType,m=i.payload,_=i.queueName,f=i.requestId,g=i.syncChannel,h=i.type_;return new(e||(e=n("Promise")))(function(e,n){var i=C.getOrStart((u||(u=o("LSIntEnum"))).unwrapIntEnum(g)),y=Date.now()+(Math.round(o("Random").random()*1e4)+1e4);if((s||(s=o("I64"))).equal(h,(u||(u=o("LSIntEnum"))).ofNumber(3))){var b=r("setTimeout")(function(){i.logEvent("Timeout");var e=l.get(f);return(c||(c=r("QuickPerformanceLogger"))).markerPoint(d,"timeout",{instanceKey:y}),c.markerEnd(d,3,y),e!=null&&(l.delete(f),e.reject({RE_EXN_ID:p})),n({RE_EXN_ID:p})},3e4);l.set(f,{instanceKey:y,queueName:_,reject:n,resolve:e,timeoutId:b,timestamp:Date.now()})}(c||(c=r("QuickPerformanceLogger"))).markerStart(d,y),c.markerPoint(d,"publish",{instanceKey:y}),c.markerAnnotate(d,{string:{networkStatus:String(r("NetworkStatus").isOnline()),streamGroupId:o("LSStreamGroupRef").getTransportId(),streamGroupStatus:o("LSStreamGroupRef").getTransportStatus()}},{instanceKey:y}),c.markerAnnotate(d,{int:{databaseType:t,requestType:u.toNumber(h)}},{instanceKey:y});var v=r("MessengerPWAVersionForUserAgent")();r("promiseDone")(i.publish(o("LSJson").stringify(o("LSShape").ofRecord(babelHelpers.extends({app_id:a,payload:m},v!=null?{pwa_version:v}:{},{request_id:f,type:h}))),h,t),function(){if(!(s||(s=o("I64"))).equal(h,(u||(u=o("LSIntEnum"))).ofNumber(3)))return(c||(c=r("QuickPerformanceLogger"))).markerPoint(d,"response",{instanceKey:y}),c.markerEnd(d,2,y),e({type:"noresponseexpected"})},function(e){(c||(c=r("QuickPerformanceLogger"))).markerPoint(d,"fail",{instanceKey:y}),c.markerEnd(d,3,y),n(e)})})},subscribeToNonTaskResponses:function(t){var e={};return h.set(e,t),function(){h.delete(e)}}}}l.NotConnected=m,l.Timeout=p,l.LSPlatformRealtimeTransport=g}),98);
__d("shouldStubUnderlyingTransport",["ExecutionEnvironment"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return!(e||(e=r("ExecutionEnvironment"))).canUseDOM&&!(e||(e=r("ExecutionEnvironment"))).isInWorker}l.default=s}),98);
__d("LSPlatformMqttRealtimeTransport",["I64","LSIntEnum","LSPlatformDefaultUnderlyingApi","LSPlatformRealtimeTransport","Promise","promiseDone","shouldStubUnderlyingTransport"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e){return[{payload:JSON.stringify({ls_fdid:"",ls_sv:e}),qos:1,topic:"/ls_app_settings"}]}function d(t){var a={contents:t.getConnectionState()},i={contents:function(){}},l={contents:new(u||(u=n("Promise")))(function(e,t){i.contents=e})},c={onMQTTStateChanged:function(t){t==="Connected"?i.contents():t==="Disconnected"&&a.contents==="Connected"&&(l.contents=new(u||(u=n("Promise")))(function(e,t){i.contents=e})),a.contents=t}};return a.contents==="Connected"&&i.contents(),t.subscribeChannelEvents(c),[function(){t.unsubscribeChannelEvents(c)},function(a,i,c){return l.contents.then(function(){return new(u||(u=n("Promise")))(function(n,l){r("promiseDone")(t.publish("/ls_req",a,{listener:{onEvent:function(t){if(t==="NOT_CONNECTED")return l({RE_EXN_ID:o("LSPlatformRealtimeTransport").NotConnected})}},qos:(e||(e=o("I64"))).equal(i,(s||(s=o("LSIntEnum"))).ofNumber(4))?0:1,skipBuffer:!1}),function(){return n()},function(e){return e.message==="Publish Timed Out"?l({RE_EXN_ID:o("LSPlatformRealtimeTransport").Timeout}):l(e)})})})}]}var m={contents:void 0};function p(e,t,n){if(r("shouldStubUnderlyingTransport")())return r("LSPlatformDefaultUnderlyingApi");var o=n.getInstance(t),a={getPublishMessages:function(){return c(e)}};o.registerExtraConnectPayloadProvider(a);var i={onMQTTStateChanged:function(t){var e=m.contents;if(e!=null)return e(t)}};o.subscribeChannelEvents(i);var l=o.subscribe("/ls_foreground_state",function(){}),s=d(o),u=s[0],p=s[1];return{cleanup:function(){o.unregisterExtraConnectPayloadProvider(a),n.shutdownAndClear(),o.unsubscribeChannelEvents(i),l(),u()},logEvent:function(t){},onConnectionStatusChange:function(t){return m.contents=t,function(){m.contents=void 0}},onReconnect:function(t){var e={contents:o.getConnectionState()},n={contents:e.contents==="Connected"},r={onMQTTStateChanged:function(o){o==="Connected"&&(n.contents&&e.contents!=="Connected"&&t(1),n.contents=!0),e.contents=o}};return o.subscribeChannelEvents(r),function(){o.unsubscribeChannelEvents(r)}},publish:p,subscribe:function(t){return o.subscribe("/ls_resp",function(e){return t(e)})}}}l.default=p}),98);
__d("LSPlatformRequestId",[],(function(t,n,r,o,a,i){"use strict";var e=4;function l(){var t=e;return e+=1,t}var s={generate:l};i.default=s}),66);
__d("LSPlatformRequestScheduler",["clearTimeout","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e=Math.pow(2,31)-1,s=(function(){function t(){this.requests=new Map}var n=t.prototype;return n.schedule=function(n,o,a){var t=this.requests.get(o);t!=null&&r("clearTimeout")(t);var i=Math.min(a,e);this.requests.set(o,r("setTimeout")(n,i))},n.cleanup=function(){this.requests.forEach(function(e){return r("clearTimeout")(e)})},t})();l.default=s}),98);
__d("LSPlatformServerResponseHandler",["FBLogger","clearTimeout","nullthrows","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e="executeFirstBlockForSyncTransaction",s=(function(){function t(e){this.eval=e,this.currentlyRunning=new Map}var n=t.prototype;return n.evalWhenReady=async function(t,n){var e;try{await t,e=r("setTimeout")(function(){r("FBLogger")("messenger_web").mustfix("waited longer than 30 seconds to eval sync script")},3e4),await this.eval(n)}finally{r("clearTimeout")(e)}},n.$1=function(t){var e=this.currentlyRunning.get(t);return e==null&&(e=Promise.resolve(),this.currentlyRunning.set(t,e)),e},t.getSyncScriptType=function(n){var t;if(!((t=n.sp)!=null&&t.includes(e)))return{status:"non-transactional"};var o=(function(){try{var e;return(e=JSON.parse(n.syncScript))==null?void 0:e.step}catch(e){return null}})();if(!Array.isArray(o))return r("FBLogger")("messenger_web").warn("Sync payload appears invalid."),{status:"non-transactional"};for(var a=[o];a.length;){var i=r("nullthrows")(a.shift());for(var l of i)if(Array.isArray(l)){if(l[0]===5&&l[1]===e&&Array.isArray(l[2]))return{status:"transactional",syncGroup:parseInt(l[2][1],10)};a.push(l)}}return{status:"err"}},n.maybeEvalInOrderReceived=function(n,o){var e,a=this,i=t.getSyncScriptType(o),l=0;switch(i.status){case"err":r("FBLogger")("messenger_web").warn("Sync script sync group parsing failed: employed sprocs were %s",JSON.stringify((e=o.sp)!=null?e:void 0));break;case"non-transactional":return this.evalWhenReady(n,o);case"transactional":l=i.syncGroup;break}var s=this.$1(l),u=s.then(function(){return a.evalWhenReady(n,babelHelpers.extends({},o,{priority:"sync_script"}))}).catch(function(e){throw a.currentlyRunning.delete(l),e});return this.currentlyRunning.set(l,u),u},t})();l.default=s}),98);
__d("LSReplyMessageAttachmentType",[],(function(t,n,r,o,a,i){var e=Object.freeze({OTHER:0,PHOTO:1,VIDEO:2,GIF:3,STICKER:4,LINK:5,MULTIPHOTO:6,PERMANENT_RAVEN_PHOTO:7,PERMANENT_RAVEN_VIDEO:8,AUDIO:10,ROLL_CALL_PHOTO_CONTRIBUTION:11,ROLL_CALL_VIDEO_CONTRIBUTION:12,FEED_POST:13,POWER_UP:14,XMA:15,ROLL_CALL_TEXT_CONTRIBUTION:16,BLOKS_XMA:17,EPHEMERAL_RAVEN_MESSAGE:18,THIRD_PARTY_STICKER:19,SOUND_BITE:9});i.default=e}),66);
__d("LSRequestId",["uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e="0123456789abcdef",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function u(){for(var t=r("uuidv4")().replace(/[^0-9a-f]/gi,""),n=0,o=["#"];n<33;){var a=e.indexOf(t.charAt(n))<<8,i=e.indexOf(t.charAt(n+1))<<4,l=e.indexOf(t.charAt(n+2)),u=l|(i|a),c=u>>6;o.push(s.charAt(c)),o.push(s.charAt(u&63)),n+=3}return o.join("")}var c={generate:u};l.default=c}),98);
__d("LSVerifyContactRowExistsStoredProcedure",["LSSynchronousPromise","LSVerifyContactRowExists","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSVerifyContactRowExists"),a.id,a.contactIdType,a.profilePictureUrl,a.name,a.contactType,a.profilePictureFallbackUrl,a.profilePictureUrlExpirationTimestampMs,a.urlExpirationTimestampMs,a.normalizedNameForSearch,a.isMemorialized,a.isBlocked,a.blockedByViewerStatus,a.canViewerMessage,a.isSelf,a.authorityLevel,a.capabilities,a.capabilities2,a.workForeignEntityType,a.gender,a.contactViewerRelationship,a.secondaryName,a.firstName,a.friendshipStatus);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSXmaContentType",[],(function(t,n,r,o,a,i){var e=Object.freeze({TEST:-1,NONE:0,IG_SINGLE_IMAGE_POST_SHARE:1e3,IG_MULTIPOST_SHARE:1001,IG_STORY_REPLY:1002,IG_STORY_PHOTO_SHARE:1003,IG_STORY_PHOTO_MENTION:1004,IG_CLIPS_SHARE:1005,IG_SINGLE_VIDEO_POST_SHARE:1006,IG_STORY_VIDEO_SHARE:1007,IG_STORY_REACTION:1008,IG_IGTV_SHARE:1009,IG_SHOP_SHARE:1010,IG_PROFILE_SHARE:1011,IG_STORY_PHOTO_HIGHLIGHT_SHARE:1012,IG_STORY_VIDEO_HIGHLIGHT_SHARE:1013,IG_STORY_VIDEO_MENTION:1014,IG_STORY_HIGHLIGHT_REPLY:1015,IG_STORY_HIGHLIGHT_REACTION:1016,IG_EXTERNAL_LINK:1017,IG_RECEIVER_FETCH:1018,IG_TEXT_POST_APP_SHARE:1019,IG_MULTI_MEDIA_RESPONSE:1020,FB_FEED_SHARE:2e3,FB_STORY_REPLY:2001,FB_STORY_SHARE:2002,FB_STORY_MENTION:2003,FB_FEED_VIDEO_SHARE:2004,FB_GAMING_CUSTOM_UPDATE:2005,FB_PRODUCER_STORY_REPLY:2006,FB_EVENT:2007,FB_FEED_POST_PRIVATE_REPLY:2008,FB_SHORT:2009,FB_COMMENT_MENTION_SHARE:2010,FB_STORY_LWI_REPLY:2011,FB_COMMENT_SHARE:2012,FB_POST_MENTION:2013,FB_PROFILE_DIRECTORY_ITEM:2014,FB_FEED_POST_REACTION_REPLY:2015,FB_QUICKSNAP_REPLY:2016,FB_SPARK_ICEBREAKER:2017,MSG_EXTERNAL_LINK_SHARE:3e3,MSG_P2P_PAYMENT:3001,MSG_LOCATION_SHARING:3002,MSG_LOCATION_SHARING_V2:3003,MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:3004,MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:3005,MSG_RECEIVER_FETCH:3006,MSG_IG_MEDIA_SHARE:3007,MSG_GEN_AI_SEARCH_PLUGIN_RESPONSE:3008,MSG_REELS_LIST:3009,MSG_CONTACT:3010,MSG_THREADS_POST_SHARE:3011,MSG_FILE:3012,MSG_AVATAR_DETAILS:3013,MSG_AI_CONTACT:3014,MSG_MEMORIES_SHARE:3015,MSG_SHARED_ALBUM_REPLY:3016,MSG_SHARED_ALBUM:3017,MSG_OCCAMADILLO_XMA:3018,MSG_GEN_AI_1P_SEARCH_RESULT:3019,MSG_EARLY_ACCESS_FB_SHARE:3020,MSG_GEN_AI_SUBSCRIPTION:3021,MSG_GEN_AI_REMINDER:3022,MSG_GEN_AI_MEMU_ONBOARDING_RESPONSE:3023,MSG_MAGICAL_MESSENGER_PLACES:3024,MSG_RECEIVER_FETCH_FALLBACK:3025,MSG_MAGICAL_MESSENGER_TASKS:3026,MSG_NOTE_REPLY:3027,MSG_NOTE_MENTION:3028,MSG_PROMPT_REPLY:3029,MSG_GEN_AI_TASK:3030,MSG_GEN_AI_RICH_RESPONSE:3040,MSG_RECEIVER_FETCH_ENT_DELETED:3041,MSG_GEN_AI_APP_DOWNLOAD_LINK:3042,MSG_GEN_AI_ENTITY:3043,MSG_OPG_P2P_PAYMENT:3044,MSG_MARKETPLACE:3045,MSG_MUSIC_STICKER:3046,MSG_META_AI_DIGEST:3047,MSG_PHONE_NUMBER:3048,MSG_GEN_AI_CONCORD_FEED_POST:3049,MSG_META_AI_MEDIA_SHARE:3050,MSG_PRIVATE_XMA:3051,MSG_WIDGETS_TODO_LIST:3052,BIZ_AI_REDIRECT_TO_SETTINGS:3100,BIZ_AI_ADS_UPSELL:3101,BIZ_AI_MARKETING_MESSAGES_UPSELL:3102,RTC_AUDIO_CALL:4e3,RTC_VIDEO_CALL:4001,RTC_MISSED_AUDIO_CALL:4002,RTC_MISSED_VIDEO_CALL:4003,RTC_GROUP_AUDIO_CALL:4004,RTC_GROUP_VIDEO_CALL:4005,RTC_MISSED_GROUP_AUDIO_CALL:4006,RTC_MISSED_GROUP_VIDEO_CALL:4007,RTC_ONGOING_AUDIO_CALL:4008,RTC_ONGOING_VIDEO_CALL:4009,DATACLASS_SENDER_COPY:5e3,OC_AVATAR_STATIC_STICKER:6e3,LIVE_LOCATION:7e3});i.default=e}),66);
__d("MAWODSProxy",["CurrentMessengerUser","ODS"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.amount,r=t.entity,a=t.key;(e||(e=o("ODS"))).bumpEntityKey(3185,r,a+"."+(o("CurrentMessengerUser").getAppID()||"unknown"),n)}l.odsBumpEntityKey=s}),98);
__d("WAGlobals",["WAJids","WALogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null;function u(e){s=e}function c(){if(s==null)throw r("err")("WaMsgr api called before set");return s}function d(){return c().qpl}function m(){var e;return(e=c().myJids)==null?void 0:e.deviceJid}function p(){var e;return(e=c().myJids)==null?void 0:e.userJid}function _(e){return o("WAJids").extractUserJid(e)===o("WAJids").extractUserJid(m())}function f(){return c().config}function g(){return c().dependencies}var h="WAOneQueue is not defined";function y(){var t=c().waOneQueue;if(t==null)throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["",""])),h),r("err")(h);return t}function C(){return c().hmacKey}l.setGlobals=u,l.getWaQpl=d,l.getMyDeviceJid=m,l.getMyUserJid=p,l.isPeerDevice=_,l.getConfig=f,l.getDependencies=g,l.getWaOneQueue=y,l.getHMACKey=C}),98);
__d("MAWUserJidWrapper",["ExecutionEnvironment","MAWCurrentUser","MAWODSProxy","WAGlobals","WAJids","WAOdsEnums"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=o("WAJids").toMsgrUserJid(o("MAWCurrentUser").getID());if((e||(e=r("ExecutionEnvironment"))).isInWorker){var n=o("WAGlobals").getMyUserJid();return o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_MY_USER_JID_GETTER,key:n===t?"same":"different"}),n}return t}l.getMyUserJid=s}),98);
__d("MAWAuthor",["MAWUserJidWrapper","WAJids","isStringNullOrEmpty"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){if(t==null||t===o("WAJids").AUTHOR_SYSTEM)return null;if(o("WAJids").isAuthorMe(t))return o("MAWUserJidWrapper").getMyUserJid();var e=o("WAJids").authorAsUserJid(t);return e==null||r("isStringNullOrEmpty")(o("WAJids").userIdFromJid(e))?null:o("WAJids").authorAsUserJid(t)};l.getAuthorUserJid=e}),98);
__d("MAWBridge",["WABridge"],(function(t,n,r,o,a,i,l){"use strict";function e(){return o("WABridge").getBridge()}l.getBridge=e}),98);
__d("MAWCacheServiceDB",["FBLogger","MAWCurrentUser","MAWIndexedDbMetadata","MAWWormOdsLogger","MessengerWebInitData","WAHex","Worm","WormDump","WormEAR","WormIDbDriver","getErrorSafe","promiseDone","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e={autoIncrement:!0,indexes:{key:{fields:["key"],unique:!0}},primaryKey:"id",secure:!0},s={snippets:e},u=null,c=function(t,n,a){var e="maw_cache_service",i=new(o("WormEAR")).WormEAR(a,e,n),l=new(o("WormIDbDriver")).WormIDbDriver(t,e,a,i,o("MAWWormOdsLogger").wormOdsWorkerLogger,{onTransactionError:m});return new(o("Worm")).WormDatabase(l,r("qpl")._(1056840657,"2716"))};function d(){return u!==null||(u=new Promise(async function(e,t){try{var n=c(o("MAWIndexedDbMetadata").MAWcacheServiceDbName(o("MAWCurrentUser").getID()),o("WAHex").parseHex(r("MessengerWebInitData").accountKeyV2),s);await n.init(),e(n)}catch(e){var a=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(a).mustfix("Failed to create cache service DB"),u=null,t(a)}})),u}function m(e){if(e instanceof o("WormEAR").DecryptionError){var t=e;r("FBLogger")("MAWCacheService").mustfix("EAR decryption error in store: %s. Attempting to delete the store:",t.store),r("promiseDone")(d().then(function(e){return e.runInTransaction([t.store],"readwrite",function(e){return e.stores[t.store].clear()},"delete-corrupted-entity")}).then(function(){r("FBLogger")("MAWCacheService").info("Successfully deleted corrupted store %s",t.store)}).catch(function(e){var n=r("getErrorSafe")(e);r("FBLogger")("MAWCacheService").catching(n).mustfix("Failed to delete corrupted store %s, err: %s",t.store,n.message)}))}}function p(e){return e.map(function(e){var t=e[0],n=e[1];return n})}async function _(){var e=await d();return e.dump({snippets:{customFields:{id:o("WormDump").wormNonSensitiveField,key:o("WormDump").wormNonSensitiveField,timestamp:o("WormDump").wormNonSensitiveField,value:function(t){var e;return{snippet:(e=o("WormDump")).wormRedact(t.snippet),snippetMsgAckLevel:e.wormNonSensitiveField(t.snippetMsgAckLevel),snippetMsgId:e.wormNonSensitiveField(t.snippetMsgId),snippetNewestIncomingMsgs:e.wormNonSensitiveField(t.snippetNewestIncomingMsgs),snippetReactionId:e.wormRedact(t.snippetReactionId)}}}}})}l.getOrSetupMAWCacheDB=d,l.convertCacheValueToDBRawValue=p,l.getDbDump=_}),98);
__d("MAWDbXMA",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return e}function u(e){return e}function c(t){return(e||(e=o("I64"))).to_float(t)}l.convertNumbersToXMAIds=s,l.convertNumberToXMAId=u,l.convertXMAId64ToXMAId=c}),98);
__d("WAStanzaUtils",[],(function(t,n,r,o,a,i){"use strict";var e=/^[0-9A-Za-z-]{1,32}$/;function l(e){return e}function s(t){return e.test(t)?t:null}i.toStanzaId=l,i.validateCallId=s}),66);
__d("MAWExternalId",["I64","Random","WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s=131071,u=null,c=0;function d(){var e=u,t=Date.now();if(e==null||p(e)!==p(t))return u=t,c=0,t;var n=t+100*(c+1),r=g(t),o=g(n);return r==null||o==null||r>o?t:(c++,n)}function m(e){return new Date(e).getTime()>0}function p(e){return Math.floor(e/100)*100}function _(e){return Math.floor(r("Random").random()*e)}function f(){var t=d();return o("WAStanzaUtils").toStanzaId((e||(e=o("I64"))).to_string(e.and_(e.or_(e.lsl_(e.of_float(t),22),e.and_(e.of_float(_(s)),e.of_float(s))),e.max_int)))}function g(e){return m(e)?Math.floor(Number(e)%1e5/100):null}l.generateExternalId=f,l.getThreeMostSignificantDigitsForSortOrderTimestamp=g}),98);
__d("MAWJids",["I64","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("WAJids").createJidUtils({platform:"msgr"}),u=s.toUserJid,c=function(n,r){var t=(e||(e=o("I64"))).to_string(n);return r?o("WAJids").toGroupJid(t):u(t)};function d(e){return c(e,!1)}function m(e){return c(e,!0)}var p=function(n){var t=o("WAJids").threadIdForChatJid(n);return(e||(e=o("I64"))).of_string(t)};function _(e){return o("WAJids").unsafeCoerceToChatJid(e)}l.jidUtils=s,l.toUserJid=u,l.convertIntJidToChatJid=c,l.convertIntJidToOneToOneChatJid=d,l.convertIntJidToGroupJid=m,l.convertChatJidToIntJid=p,l.threadIdToChatJid=_}),98);
__d("MAWUnsafeCoerce",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}i.unsafeCoerce=e}),66);
__d("MNLSXMALayoutType",[],(function(t,n,r,o,a,i){var e=Object.freeze({SINGLE:0,HSCROLL:1,XCENTER:2,PORTRAIT:4,LAYERED:5,PLACEHOLDER:6,EXPIRED_PLACEHOLDER:7,PILE_PROMPT:8,STACK:9,SHARED_STACK:10,STACK_CARD:11,STANDARD_DXMA:12,DXMA_PLACEHOLDER:13,THREAD_SHORTCUT:14,LIST_DXMA:15,GRID:16,BLOKS_XMA:17,TWO_CARD:18,NOTE:19,VSTACK:20,SQUIRCLE:21,REPLY:22,RICH_RESPONSE:23,CODE:24,TABLE:25,SQUIRCLE_SHARED_STACK:26,UNIFIED_RESPONSE:27,CARD:28,CONDENSED_LINK:29,DOODLE_SPACE:30,DIRECT_EVENT:31});i.default=e}),66);
__d("MNXMAPreviewImageDecorationType",[],(function(t,n,r,o,a,i){var e=Object.freeze({DEFAULT:0,COLLAGE:1,VIDEO:2,MESSENGER_ICON:3,INSTAGRAM_ICON:4,SHOPPING:5,UPCOMING_EVENT:6,LIVE:7,REEL:8,IGTV:9,YOUTUBE_VIDEO:10,YOUTUBE_SHORTS:11,COMMENT:12,BLUR:13,PILL:14,MESSENGER_CHANNEL_IMAGE:15,TROPHY:16,DXMA_LIVE:17,DXMA_LIVE_ENDED:18,LIKE_BUBBLE_REPLY:19,LIKE_BUBBLES:20,REPOST:21,FUBS_EXCLUSIVE_CONTENT_TEASER:22});i.default=e}),66);
__d("MessagingAttachmentType",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,STICKER:1,IMAGE:2,ANIMATED_IMAGE:3,VIDEO:4,AUDIO:5,FILE:6,XMA:7,EPHEMERAL_IMAGE:8,EPHEMERAL_VIDEO:9,SELFIE_STICKER:10,SOUND_BITE:12,CATALOG_ITEM:13,POWER_UP:14,THIRD_PARTY_STICKER:15});i.default=e}),66);
__d("OfflineThreadingId",["I64","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("I64"))).of_string("4194303");function u(){return(e||(e=o("I64"))).to_string(c())}function c(){var t=o("XPlatReactCrypto").getRandomValues(new Uint8Array(8)),n=new DataView(t.buffer),r=(e||(e=o("I64"))).add(e.lsl_(e.of_int32(n.getUint32(0)),32),e.of_int32(n.getUint32(4)));return d(Date.now(),r)}function d(t,n){return(e||(e=o("I64"))).and_(e.or_(e.lsl_(e.of_float(t),22),e.and_(n,s)),e.max_int)}function m(t){for(var n=c(),r=[],a=0;a<t.length;a++)r.push([t[a],(e||(e=o("I64"))).to_string(n)]),n=p(n);return r}function p(t,n){n===void 0&&(n=(e||(e=o("I64"))).one);var r=_(t),a=f(t);return d(r,(e||(e=o("I64"))).add(a,n))}function _(t){return(e||(e=o("I64"))).to_float(e.lsr_(t,22))}function f(t){return(e||(e=o("I64"))).and_(t,s)}l.createOfflineThreadingID=u,l.createForItemsInOrder=m,l.createNewFromExisting=p,l.extractTimestamp=_}),98);
__d("UFICommentFileInputAcceptValues.experimental",["cr:27633"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:27633")}),98);
__d("URLMatcherConfig",[],(function(t,n,r,o,a,i){a.exports={tlds:"(?:\\.(com|\uD55C\uAD6D|\uC0BC\uC131|\uB2F7\uCEF4|\uB2F7\uB137|\u9999\u6E2F|\u9999\u683C\u91CC\u62C9|\u9910\u5385|\u98DF\u54C1|\u98DE\u5229\u6D66|\u96FB\u8A0A\u76C8\u79D1|\u96C6\u56E2|\u901A\u8CA9|\u8D2D\u7269|\u8C37\u6B4C|\u8BFA\u57FA\u4E9A|\u8054\u901A|\u7F51\u7EDC|\u7F51\u7AD9|\u7F51\u5E97|\u7F51\u5740|\u7EC4\u7EC7\u673A\u6784|\u79FB\u52A8|\u73E0\u5B9D|\u70B9\u770B|\u6FB3\u9580|\u6E38\u620F|\u6DE1\u9A6C\u9521|\u673A\u6784|\u66F8\u7C4D|\u65F6\u5C1A|\u65B0\u95FB|\u65B0\u52A0\u5761|\u653F\u5E9C|\u653F\u52A1|\u624B\u8868|\u624B\u673A|\u6211\u7231\u4F60|\u6148\u5584|\u5FAE\u535A|\u5E7F\u4E1C|\u5DE5\u884C|\u5BB6\u96FB|\u5A31\u4E50|\u5929\u4E3B\u6559|\u5927\u62FF|\u5927\u4F17\u6C7D\u8F66|\u5728\u7EBF|\u5609\u91CC\u5927\u9152\u5E97|\u5609\u91CC|\u5546\u6807|\u5546\u5E97|\u5546\u57CE|\u53F0\u7063|\u53F0\u6E7E|\u516C\u76CA|\u516C\u53F8|\u516B\u5366|\u5065\u5EB7|\u4FE1\u606F|\u4F5B\u5C71|\u4F01\u4E1A|\u4E2D\u6587\u7F51|\u4E2D\u570B|\u4E2D\u56FD|\u4E2D\u4FE1|\u4E16\u754C|\u30DD\u30A4\u30F3\u30C8|\u30D5\u30A1\u30C3\u30B7\u30E7\u30F3|\u30BB\u30FC\u30EB|\u30B9\u30C8\u30A2|\u30B3\u30E0|\u30B0\u30FC\u30B0\u30EB|\u30AF\u30E9\u30A6\u30C9|\u307F\u3093\u306A|\u10D2\u10D4|\u0E44\u0E17\u0E22|\u0E04\u0E2D\u0E21|\u0DBD\u0D82\u0D9A\u0DCF|\u0D2D\u0D3E\u0D30\u0D24\u0D02|\u0CAD\u0CBE\u0CB0\u0CA4|\u0C2D\u0C3E\u0C30\u0C24\u0C4D|\u0B9A\u0BBF\u0B99\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0BC2\u0BB0\u0BCD|\u0B87\u0BB2\u0B99\u0BCD\u0B95\u0BC8|\u0B87\u0BA8\u0BCD\u0BA4\u0BBF\u0BAF\u0BBE|\u0B2D\u0B3E\u0B30\u0B24|\u0AAD\u0ABE\u0AB0\u0AA4|\u0A2D\u0A3E\u0A30\u0A24|\u09AD\u09BE\u09F0\u09A4|\u09AD\u09BE\u09B0\u09A4|\u09AC\u09BE\u0982\u09B2\u09BE|\u0938\u0902\u0917\u0920\u0928|\u092D\u093E\u0930\u094B\u0924|\u092D\u093E\u0930\u0924\u092E\u094D|\u092D\u093E\u0930\u0924|\u0928\u0947\u091F|\u0915\u0949\u092E|\u0680\u0627\u0631\u062A|\u067E\u0627\u06A9\u0633\u062A\u0627\u0646|\u0647\u0645\u0631\u0627\u0647|\u0645\u0648\u0642\u0639|\u0645\u0648\u0628\u0627\u064A\u0644\u064A|\u0645\u0644\u064A\u0633\u064A\u0627|\u0645\u0635\u0631|\u0643\u0648\u0645|\u0643\u0627\u062B\u0648\u0644\u064A\u0643|\u0642\u0637\u0631|\u0641\u0644\u0633\u0637\u064A\u0646|\u0639\u0645\u0627\u0646|\u0639\u0631\u0628|\u0639\u0631\u0627\u0642|\u0634\u0628\u0643\u0629|\u0633\u0648\u0631\u064A\u0629|\u0633\u0648\u062F\u0627\u0646|\u062A\u0648\u0646\u0633|\u0628\u06BE\u0627\u0631\u062A|\u0628\u064A\u062A\u0643|\u0628\u0627\u0632\u0627\u0631|\u0628\u0627\u0631\u062A|\u0627\u06CC\u0631\u0627\u0646|\u0627\u0645\u0627\u0631\u0627\u062A|\u0627\u0644\u0645\u063A\u0631\u0628|\u0627\u0644\u0639\u0644\u064A\u0627\u0646|\u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0629|\u0627\u0644\u062C\u0632\u0627\u0626\u0631|\u0627\u0644\u0627\u0631\u062F\u0646|\u0627\u0631\u0627\u0645\u0643\u0648|\u0627\u062A\u0635\u0627\u0644\u0627\u062A|\u0627\u0628\u0648\u0638\u0628\u064A|\u05E7\u05D5\u05DD|\u0570\u0561\u0575|\u049B\u0430\u0437|\u0443\u043A\u0440|\u0441\u0440\u0431|\u0441\u0430\u0439\u0442|\u0440\u0444|\u0440\u0443\u0441|\u043E\u0440\u0433|\u043E\u043D\u043B\u0430\u0439\u043D|\u043C\u043E\u0441\u043A\u0432\u0430|\u043C\u043E\u043D|\u043C\u043A\u0434|\u043A\u043E\u043C|\u043A\u0430\u0442\u043E\u043B\u0438\u043A|\u0435\u044E|\u0434\u0435\u0442\u0438|\u0431\u0435\u043B|\u0431\u0433|\u03B5\u03BB|zw|zuerich|zone|zm|zip|zero|zara|zappos|za|yun|yt|youtube|you|yokohama|yoga|yodobashi|ye|yandex|yamaxun|yahoo|yachts|xyz|xxx|xn--zfr164b|xn--ygbi2ammx|xn--yfro4i67o|xn--y9a3aq|xn--xkc2dl3a5ee0h|xn--xkc2al3hye2a|xn--xhq521b|xn--wgbl6a|xn--wgbh1c|xn--w4rs40l|xn--w4r85el8fhu5dnra|xn--vuq861b|xn--vhquv|xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--unup4y|xn--tiq49xqyj|xn--tckwe|xn--t60b56a|xn--ses554g|xn--s9brj9c|xn--rvc1e0am3e|xn--rovu88b|xn--rhqv96g|xn--qxam|xn--qxa6a|xn--qcka1pmc|xn--q9jyb4c|xn--q7ce6a|xn--pssy2u|xn--pgbs0dh|xn--p1ai|xn--p1acf|xn--otu796d|xn--ogbpf8fl|xn--o3cw4h|xn--nyqy26a|xn--nqv7fs00ema|xn--nqv7f|xn--node|xn--ngbrx|xn--ngbe9e0a|xn--ngbc5azd|xn--mxtq1m|xn--mk1bu44c|xn--mix891f|xn--mgbx4cd0ab|xn--mgbtx2b|xn--mgbt3dhd|xn--mgbpl2fh|xn--mgbi4ecexp|xn--mgbgu82a|xn--mgberp4a5d4ar|xn--mgbcpq6gpa1a|xn--mgbca7dzdo|xn--mgbc0a9azcg|xn--mgbbh1a71e|xn--mgbbh1a|xn--mgbayh7gpa|xn--mgbai9azgqp6j|xn--mgbah1a3hjkrd|xn--mgbab2bd|xn--mgbaam7a8h|xn--mgba7c0bbn0a|xn--mgba3a4f16a|xn--mgba3a3ejt|xn--mgb9awbf|xn--lgbbat1ad8j|xn--l1acc|xn--kput3i|xn--kpry57d|xn--kprw13d|xn--kcrx77d1x4a|xn--jvr189m|xn--jlq480n2rg|xn--j6w193g|xn--j1amh|xn--j1aef|xn--io0a7i|xn--imr513n|xn--i1b6b1a6a2e|xn--hxt814e|xn--h2brj9c8c|xn--h2brj9c|xn--h2breg3eve|xn--gk3at1e|xn--gecrj9c|xn--gckr3f0f|xn--g2xx48c|xn--fzys8d69uvgm|xn--fzc2c9e2c|xn--fpcrj9c3d|xn--flw351e|xn--fjq720a|xn--fiqz9s|xn--fiqs8s|xn--fiq64b|xn--fiq228c5hs|xn--fhbei|xn--fct429k|xn--efvy88h|xn--eckvdtc9d|xn--e1a4c|xn--d1alf|xn--d1acj3b|xn--czru2d|xn--czrs0t|xn--czr694b|xn--clchc0ea0b2g2a9gcd|xn--cg4bki|xn--cckwcxetd|xn--cck2b3b|xn--c2br7g|xn--c1avg|xn--bck1b9a5dre4c|xn--b4w605ferd|xn--9krt00a|xn--9et52u|xn--9dbq2a|xn--90ais|xn--90ae|xn--90a3ac|xn--8y0a063a|xn--80aswg|xn--80asehdb|xn--80aqecdr1a|xn--80ao21a|xn--80adxhks|xn--6qq986b3xl|xn--6frz82g|xn--5tzm5g|xn--5su34j936bgsg|xn--55qx5d|xn--55qw42g|xn--54b7fta0cc|xn--4gbrim|xn--4dbrk0ce|xn--45q11c|xn--45brj9c|xn--45br5cyl|xn--42c2d9a|xn--3pxu8k|xn--3hcrj9c|xn--3e0b707e|xn--3ds443g|xn--3bst00m|xn--30rr7y|xn--2scrj9c|xn--1qqw23a|xn--1ck2e1b|xn--11b4c3d|xin|xihuan|xerox|xbox|wtf|wtc|ws|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|wf|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|wanggou|wang|walter|walmart|wales|vu|voyage|voto|voting|vote|volvo|vodka|vn|vlaanderen|vivo|viva|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vi|vg|vet|versicherung|verisign|ventures|vegas|ve|vc|vanguard|vana|vacations|va|uz|uy|us|ups|uol|uno|university|unicom|uk|ug|ubs|ubank|ua|tz|tw|tvs|tv|tushu|tunes|tui|tube|tt|trv|trust|travelersinsurance|travelers|travel|training|trading|trade|tr|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|to|tn|tmall|tm|tl|tkmaxx|tk|tjx|tjmaxx|tj|tirol|tires|tips|tienda|tickets|tiaa|theatre|theater|thd|th|tg|tf|teva|tennis|temasek|tel|technology|tech|team|tdk|td|tci|tc|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|sz|systems|sydney|sy|sx|swiss|swatch|sv|suzuki|surgery|surf|support|supply|supplies|sucks|su|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statefarm|statebank|star|staples|stada|st|ss|srl|sr|spot|sport|space|spa|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|so|sncf|sn|smile|smart|sm|sling|sl|skype|sky|skin|ski|sk|sj|site|singles|sina|silk|si|show|shouji|shopping|shop|shoes|shiksha|shia|shell|sharp|shangrila|sh|sg|sfr|sexy|sex|sew|seven|services|sener|select|seek|security|secure|seat|search|se|sd|scot|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sc|sbs|sbi|sb|saxo|save|sas|sarl|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|sa|ryukyu|rwe|rw|run|ruhr|rugby|ru|rsvp|rs|room|rogers|rodeo|rocks|ro|rip|rio|ril|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|re|radio|racing|quest|quebec|qpon|qa|py|pwc|pw|pub|pt|ps|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|pr|post|porn|politie|poker|pohl|pnc|pn|pm|plus|plumbing|playstation|play|place|pl|pk|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|physio|photos|photography|photo|phone|philips|phd|pharmacy|ph|pg|pfizer|pf|pet|pe|pccw|pay|party|parts|partners|pars|paris|panasonic|page|pa|ovh|ott|otsuka|osaka|origins|organic|org|orange|oracle|open|ooo|online|onl|ong|one|omega|om|ollo|olayangroup|olayan|okinawa|office|observer|obi|nz|nyc|nu|ntt|nrw|nra|nr|np|nowtv|nowruz|now|norton|nokia|no|nl|nissay|nissan|ninja|nikon|nike|nico|ni|nhk|ngo|ng|nfl|nf|nexus|nextdirect|next|news|new|neustar|network|netflix|netbank|net|nec|ne|nc|nba|navy|name|nagoya|nab|na|mz|my|mx|mw|mv|music|museum|mu|mtr|mtn|mt|msd|ms|mr|mq|mp|movie|mov|motorcycles|moto|moscow|mortgage|mormon|monster|money|monash|mom|moi|moe|moda|mobile|mobi|mo|mn|mma|mm|mls|mlb|ml|mk|mitsubishi|mit|mint|mini|mil|microsoft|miami|mh|mg|merckmsd|menu|men|memorial|meme|melbourne|meet|media|med|me|md|mckinsey|mc|mba|mattel|marshalls|marriott|markets|marketing|market|map|mango|management|man|makeup|maison|maif|madrid|ma|ly|lv|luxury|luxe|lundbeck|lu|ltda|ltd|lt|ls|lr|lplfinancial|lpl|love|lotto|lotte|london|lol|locus|locker|loans|loan|llp|llc|lk|living|live|lipsy|link|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|li|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lc|lb|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancaster|lamer|lamborghini|lacaixa|la|kz|kyoto|ky|kw|kuokgroup|kred|krd|kr|kpn|kpmg|kp|kosher|komatsu|koeln|kn|km|kiwi|kitchen|kindle|kim|kids|kia|ki|kh|kg|kfh|kerryproperties|kerrylogistics|kerryhotels|ke|kddi|kaufen|juniper|juegos|jprs|jpmorgan|jp|joy|jot|joburg|jobs|jo|jnj|jmp|jm|jll|jio|jewelry|jetzt|jeep|je|jcb|java|jaguar|itv|itau|it|istanbul|ist|ismaili|is|irish|ir|iq|ipiranga|io|investments|intuit|international|int|insure|insurance|institute|ink|ing|info|infiniti|industries|inc|in|immobilien|immo|imdb|imamat|im|il|ikano|ifm|ieee|ie|id|icu|ice|icbc|ibm|hyundai|hyatt|hughes|hu|ht|hsbc|hr|how|house|hotmail|hotels|hot|hosting|host|hospital|horse|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hn|hm|hkt|hk|hiv|hitachi|hisamitsu|hiphop|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|gy|gw|guru|guitars|guide|guge|gucci|gu|gt|gs|group|grocery|gripe|green|gratis|graphics|grainger|gr|gq|gp|gov|got|gop|google|goog|goodyear|goo|golf|goldpoint|gold|godaddy|gn|gmx|gmo|gmbh|gmail|gm|globo|global|gle|glass|gl|giving|gives|gifts|gift|gi|gh|ggee|gg|gf|george|genting|gent|gea|ge|gdn|gd|gbiz|gb|gay|garden|gap|games|game|gallup|gallo|gallery|gal|ga|fyi|futbol|furniture|fund|fun|fujitsu|ftr|frontier|frogans|frl|fresenius|free|fr|fox|foundation|forum|forsale|forex|ford|football|food|foo|fo|fm|fly|flowers|florist|flir|flights|flickr|fk|fj|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fi|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|events|eus|eurovision|eu|et|estate|esq|es|erni|ericsson|er|equipment|epson|enterprises|engineering|engineer|energy|emerck|email|eg|ee|education|edu|edeka|eco|ec|eat|earth|dz|dvr|dvag|durban|dupont|dunlop|dubai|dtv|drive|download|dot|domains|dog|doctor|docs|do|dnp|dm|dk|dj|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|de|dds|dclk|day|datsun|dating|date|data|dance|dad|cz|cyou|cymru|cy|cx|cw|cv|cuisinella|cu|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|cr|cpa|courses|coupons|coupon|country|corsica|coop|cool|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|com|cologne|college|coffee|codes|coach|co|cn|cm|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cl|ck|city|citic|citi|citadel|cisco|circle|cipriani|ci|church|chrome|christmas|chintai|cheap|chat|chase|charity|channel|chanel|ch|cg|cfd|cfa|cf|cern|ceo|center|cd|cc|cbre|cbn|cba|catholic|catering|cat|casino|cash|case|casa|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|camp|camera|cam|calvinklein|call|cal|cafe|cab|ca|bzh|bz|by|bw|bv|buzz|buy|business|builders|build|bt|bs|brussels|brother|broker|broadway|bridgestone|bradesco|br|box|boutique|bot|boston|bostik|bosch|booking|book|boo|bond|bom|bofa|boehringer|boats|bo|bnpparibas|bn|bmw|bms|bm|blue|bloomberg|blog|blockbuster|blackfriday|black|bj|biz|bio|bingo|bing|bike|bid|bible|bi|bharti|bh|bg|bf|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|be|bd|bcn|bcg|bbva|bbt|bbc|bb|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|banamex|baidu|baby|ba|azure|az|axa|ax|aws|aw|autos|auto|author|auspost|audio|audible|audi|auction|au|attorney|athleta|at|associates|asia|asda|as|arte|art|arpa|army|archi|aramco|arab|ar|aquarelle|aq|apple|app|apartments|aol|ao|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|amazon|am|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|al|akdn|airtel|airforce|airbus|aig|ai|agency|agakhan|ag|africa|afl|af|aetna|aero|aeg|ae|adult|ads|ad|actor|aco|accountants|accountant|accenture|academy|ac|abudhabi|abogado|able|abc|abbvie|abbott|abb|aarp|aaa))"}}),null);
__d("URLMatcher",["URLMatcherConfig"],(function(t,n,r,o,a,i){var e="!\"#%&'()*,-./:;<>?@[\\]^_`{|}",l="\u2000-\u206F\xAB\xBB\uFF08\uFF09",s="(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])",u="(?:https?)://",c="(?:(^|\\s)(?:"+s+"[.]){3}"+s+")",d=c,m="\\[(?:(?:[A-Fa-f0-9]{1,4}::?){1,7}[A-Fa-f0-9]{1,4})\\]",p="(?:\\b)www\\d{0,3}[.]",_="[^\\s"+e+l+"]",f="(?:(?:(?:[.:\\-_%@]|"+_+")*"+_+")|"+m+")",g="(?::\\d+){0,1}",h="(?=[/?#])",y=n("URLMatcherConfig").tlds,C="(?:(?:"+u+f+g+")|(?:"+d+g+")|(?:"+m+g+")|(?:"+p+f+y+g+")|(?:"+f+y+g+h+"))",b="(?:(?:"+u+f+g+")|(?:"+d+g+")|(?:"+m+g+")|(?:"+p+f+y+g+")|(?:"+f+y+g+"))",v="[/#?]",S="\\([^\\s()<>]+\\)",R="[^\\s()<>?#]+",L=new RegExp(C,"im"),E="^\\[[0-9]{1,4}:[0-9]{1,4}:[A-Fa-f0-9]{1,4}\\]",k=new RegExp(E,"im"),I="(?:(?:"+v+")(?:(?:"+S+"|"+R+")*)*)*",T=new RegExp("((?:"+b+")(?:"+I+"))","im");function D(){T.compile()}var x=new RegExp("((?:"+u+f+g+")|(?:"+p+f+y+g+"))"),$=/[\s\'\";]/,P=new RegExp(v,"im"),N=new RegExp("[\\s!\"#%&'()*,./:;<>?@[\\]^`{|}\xAB\xBB\u2000-\u206F\uFF08\uFF09]","im"),M=new RegExp("[\\s()<>?#]","im"),w=new RegExp("\\s()<>"),A=function(t){return t!=null&&t.indexOf("@")!==-1?x.exec(t)?t:null:t},F=function(t){return new RegExp("((?:"+C+")(?:"+I+"))",t)};function O(){return T.source}var B=function(t){return U(t,F("im"))},W=function(t){return V(t,F("igm"))},q=function(t){return U(t,T)},U=function(t,n){var e=n.exec(t);return e==null||e.length===0?null:A(e[1]||null)},V=function(t,n){var e=t.match(n);return e==null?[]:e.filter(Boolean)||[]},H=function(t){return L.exec(t)},G=function(t){return!$.test(t.charAt(t.length-1))},z=function(t){var e=t,n=!1;do{var r,o=L.exec(e);if(!o)return null;if(((r=o[1])==null?void 0:r.trim())===""&&(o[0]=o[0].trim(),o.index+=o[1].length),n=!1,o[0][0]==="["&&o.index>0&&e[o.index-1]==="@"){var a=k.exec(o[0]);a&&(n=!0,e=e.substr(o.index+a[0].length))}}while(n);if(!o)return null;var i=e.substr(o.index+o[0].length);if(i.length===0||!P.test(i[0]))return A(o[0]);for(var l=0,s=0,u=1,c=["(","["],d=[")","]"],m=0,p=s,_=1;_<i.length;_++){var f=i[_];if(p===s){if(c.includes(f))m+=1,p=u;else if(P.test(f)||!N.test(f))l=_;else if(M.test(f))break}else if(c.includes(f))m+=1;else if(d.includes(f))m-=1,m===0&&(p=s,l=_);else if(w.test(f))break}return A(o[0]+i.substring(0,l+1))},j={compilePermissiveHostPathMatcher:D,permissiveHostPathMatch:q,permissiveMatch:B,permissiveMultiMatch:W,matchToPattern:U,multiMatchToPattern:V,matchHost:H,trigger:G,match:z,getPermissiveHostPathMatcherSource:O};a.exports=j}),null);
__d("WAArrayZip",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n=Math.min(e.length,t.length);return e.slice(0,n).map(function(e,n){return[e,t[n]]})}i.zip=e}),66);
__d("WABlobToArrayBuffer",["Promise","err"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return"arrayBuffer"in t?t.arrayBuffer():new(e||(e=n("Promise")))(function(e,n){var o=new FileReader;o.onload=function(){var t=o.result;t instanceof ArrayBuffer?e(t):n(r("err")("blobToArrayBuffer got error because result is not ArrayBuffer: "+typeof t))},o.onerror=function(){var e;n((e=o.error)!=null?e:r("err")("blobToArrayBuffer got unknown error"))},o.readAsArrayBuffer(t)})}l.blobToArrayBuffer=s}),98);
__d("WADbContact",[],(function(t,n,r,o,a,i){"use strict";var e=0,l=1,s=2,u=3;i.NON_CONTACT=e,i.ONE_WAY_CONTACT=l,i.REVERSED_ONE_WAY_CONTACT=s,i.TWO_WAY_CONTACT=u}),66);
__d("WAIsOgg",[],(function(t,n,r,o,a,i){"use strict";function e(e){return!(e.length<4||e[0]!==79||e[1]!==103||e[2]!==103||e[3]!==83)}i.isOgg=e}),66);
__d("WALongInt",["WAHex","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t){if(typeof t!="number")throw o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose([""," is not a safe integer"])),t).color("red"),new Error("numberOrThrowIfTooLarge is given a non-safe integer");return t}var d=function(t){return t==null?t:c(t)};function m(e){return e==null||typeof e!="number"?null:e}function p(e,t){if(typeof e=="number"&&typeof t=="number")return e>t;var n=typeof e=="number"?o("WAHex").hexLongFromNumber(e):e,r=typeof t=="number"?o("WAHex").hexLongFromNumber(t):t;return o("WAHex").isBiggerHexLong(n,r)}function _(e){if(typeof e=="number")return e.toString(10);for(var t=o("WAHex").hexLongToHex(e),n=[0],r=0,a=0;a<t.length;a++){r=o("WAHex").hexAt(t,a);for(var i=0;i<n.length;i++)n[i]=n[i]*16+r,r=n[i]/10|0,n[i]%=10;for(;r>0;)n.push(r%10),r=r/10|0}var l=n.reverse().join("");return o("WAHex").hexLongIsNegative(e)?"-"+l:l}function f(e){if(!/^-?\d+$/.test(e))throw o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid decimal string'])),e).color("red"),new Error("decimalStringToLongInt is given an invalid decimal string");var t=e[0]==="-",n=e.replace(/^-?0*/,""),r=n.length;if(r<16||r===16&&n<="9007199254740991")return t?-Number(n):Number(n);if(r>20||r===20&&n>"18446744073709551615"||t&&(r>19||r===19&&n>"9223372036854775807"))throw o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(['"','" is over 64 bits'])),e).color("red"),new Error("decimalStringToHexLong is given value over 64 bits");for(var a=0,i=0,l=0;l<r;l++)a=a*10+Number(n[l]),i=i*10+Math.floor(a/4294967296),a=a%4294967296;return o("WAHex").createHexLongFrom32Bits(i,a,t)}l.numberOrThrowIfTooLarge=c,l.maybeNumberOrThrowIfTooLarge=d,l.maybeNumber=m,l.isBiggerLongInt=p,l.longIntToDecimalString=_,l.decimalStringToLongInt=f}),98);
__d("XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/static_resources/webworker_v1/init_script/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("WorkerBundleResource",["TrustedTypesWebWorkerScriptURLPolicy","XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder","getWorkerInitScriptSPINParams","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,o,a,i=(n=t==null?void 0:t.logImportScriptsErrors)!=null?n:!1,l=(o=t==null?void 0:t.name)!=null?o:e.name,u=new window.URL(e.url,window.location.href).href;if(u==null){var c=new Error("Can't start up worker without a resource url.");throw c.stack,c}for(var d=r("nullthrows")((a=r("XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder").buildUri({}).addQueryParams(r("getWorkerInitScriptSPINParams")()))==null||(a=a.addQueryParams(s()))==null?void 0:a.toString()),m=new Worker(r("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(d),{name:l}),p=arguments.length,_=new Array(p>2?p-2:0),f=2;f<p;f++)_[f-2]=arguments[f];return m.postMessage({bundleUrl:u,initArgs:_,isDev:!1,resource:e,logImportScriptsErrors:i,type:"sr-init"}),m}function s(){var e=new URLSearchParams(window.location.search),t=new Map;return e.forEach(function(e,n){["gk_enable","gk_enable[]","gk_disable","gk_disable[]"].includes(n)&&t.set(n,e)}),t}l.createDedicatedWebWorker=e}),98);
__d("WAOpusRecorderWorkerClient",["WAWebOpusRecorderWorkerResource","WorkerBundleResource"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){this.$1=o("WorkerBundleResource").createDedicatedWebWorker(r("WAWebOpusRecorderWorkerResource")),this.$1.onmessage=e!=null?e:null}var t=e.prototype;return t.getWorker=function(){return this.$1},t.postMessage=function(t,n){var e={type:"message",message:t};this.$1.postMessage(e,n)},t.addEventListener=function(t,n){this.$1.addEventListener(t,n)},t.removeEventListener=function(t,n){this.$1.addEventListener(t,n)},e})();function s(){return new e}function u(t){return new e(t)}l.WAOpusRecorderWorkerClient=e,l.getOpusEncoderWorker=s,l.getOpusDecoderWorker=u}),98);
__d("WAOpusRecorderPlayer",["Promise","WABinary","WABlobToArrayBuffer","WALogger","WAOpusRecorderWorkerClient"],(function(t,n,r,o,a,i,l){var e,s,u,c,d="audio/wav",m,p=0;function _(){return p++,m||(m=new window.AudioContext),m}function f(){if(p--,p===0&&m){try{m.close().catch(function(t){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["releaseAudioContext close async error: ",""])),t)})}catch(e){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["releaseAudioContext close sync error: ",""])),e)}m=void 0}}var g=(function(){function e(e){this.oggBlob=e}var t=e.prototype;return t.generateBlob=function(){return this.oggBlobToWAVBlob(this.oggBlob,1)},t.oggBlobToWAVBlob=function(t,r){var e=this;r===void 0&&(r=2);var a=r;return new(c||(c=n("Promise")))(function(n){var r=function(r){if(r.data==null){for(var t=function(t){l.forEach(function(e){for(var n=e[t]||e[0],r=0;r<n.length;r++)s.push(n[r])})},o=0;o<a;o++)t(o);var i=e.encodeWAV(s,c,a),u=new Blob([i.readByteArrayView()],{type:d});f(),n(u)}else l.push(r.data),a=l[0].length},i=o("WAOpusRecorderWorkerClient").getOpusDecoderWorker(r),l=[],s=[],c=_(),m={outputBufferSampleRate:c.sampleRate,bufferLength:4096};i.postMessage({command:"decode-init",config:m}),o("WABlobToArrayBuffer").blobToArrayBuffer(t).then(function(e){i.postMessage({command:"decode",pages:new Uint8Array(e)}),i.postMessage({command:"decode-done"})}).catch(function(e){o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Player::oggBlobToWAVBlob error: ",""])),e)})})},t.encodeWAV=function(t,n,r){var e=new(o("WABinary")).Binary(void 0,!0);e.ensureCapacity(44+t.length*2),e.writeString("RIFF"),e.writeUint32(36+t.length*2),e.writeString("WAVE"),e.writeString("fmt "),e.writeUint32(16),e.writeUint16(1),e.writeUint16(r),e.writeUint32(n.sampleRate),e.writeUint32(n.sampleRate*r*2),e.writeUint16(r*2),e.writeUint16(16),e.writeString("data"),e.writeUint32(t.length*2);for(var a=0;a<t.length;a++){var i=Math.max(-1,Math.min(t[a],1));i*=i>0?32767:32768,e.writeInt16(Math.floor(i))}return e},e})();l.default=g}),98);
__d("WAMaybeTranscodeOggOpusToWavForPlayback",["FBLogger","WABlobToArrayBuffer","WAIsOgg","WAOpusRecorderPlayer","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=function(){return r("FBLogger")("wmi").tags(["audio"])},m=r("justknobx")._("4988"),p=new Audio().canPlayType("audio/ogg"),_=p==="probably"||p==="maybe";async function f(t){if(_)return d().DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Ogg playback supported no need to transcode"]))),t;if(d().DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Ogg playback is not supported. Start transcoding"]))),t.size>m)return d().MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["blob size too large"]))),t;var n=await o("WABlobToArrayBuffer").blobToArrayBuffer(t);if(!o("WAIsOgg").isOgg(new Uint8Array(n)))return d().DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["blob is not Ogg, skip transcode"]))),t;var a=new(r("WAOpusRecorderPlayer"))(t);return a.generateBlob()}l.isOggPlaybackSupported=_,l.maybeTranscodeOggOpusToWavForPlayback=f}),98);
__d("cometIsMimeTypeForMedia",["FBLogger","UFICommentFileInputAcceptValues.experimental"],(function(t,n,r,o,a,i,l){"use strict";var e={file:null,photo:null,video:null},s={"image/gif":"video","image/webp":"video"};function u(e){return e.split(",").map(function(e){return e.trim()}).map(function(e){return e.replace(/\/\*$/,"/")})}function c(t,n,o){e[t]==null&&(e[t]=u(o));var a=e[t];if(a==null)throw r("FBLogger")("ufi2").mustfixThrow("CometIsMimeTypeForMedia prefixes can't be null");var i=s[n];return i!=null?i===t:a.some(function(e){return n.startsWith(e)})}function d(e){return c("photo",e,r("UFICommentFileInputAcceptValues.experimental").photos)}function m(e){return c("video",e,r("UFICommentFileInputAcceptValues.experimental").videos)}function p(e){return c("file",e,r("UFICommentFileInputAcceptValues.experimental").files)}l.mimeTypeAcceptStringToArray=u,l.isMimeTypeForPhoto=d,l.isMimeTypeForVideo=m,l.isMimeTypeForFile=p}),98);